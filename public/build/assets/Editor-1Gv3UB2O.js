const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BrXtjC9y.js","assets/index-BH53Isel.js","assets/index-yBjzXJbu.js","assets/index-fNjTmf9T.js"])))=>i.map(i=>d[i]);
import{_ as co}from"./preload-helper-BfFHrpNk.js";import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{R as re,r as C}from"./index-BH53Isel.js";import{b as mn,c as uo,a as po,d as go,T as Ir,l as ie,i as wt,e as fo,D as vo,H as mo,B as Ve,F as ho,U as bo,R as xo,E as hn}from"./EditableCell-D92opMrq.js";import{a as yo,b as Vr,_ as L}from"./objectWithoutPropertiesLoose-CoVnHxV7.js";import{h as bn}from"./hoist-non-react-statics.cjs-kbdZbs82.js";import{r as wo,R as Co}from"./index-BrXtjC9y.js";import{c as J}from"./createLucideIcon-Cy5Ya80P.js";import{I as Ur,C as So}from"./image-cwhXnF8c.js";import"./EditorLayout-B4bUL1bb.js";import{h as Io}from"./thumbnailGenerator-B4goYG9Y.js";import{E as Do}from"./jspdf.es.min-DsE6j1uk.js";import{t as sr,T as No}from"./index-Bx7_DjT0.js";import{m as xn}from"./main-BvVILmTO.js";import{X as Eo}from"./x-DBMwyD6F.js";import{P as Po}from"./palette-DV_Vpyg9.js";import{M as yn}from"./minus-jyhodMPN.js";import{P as wn}from"./plus-Bot15Khs.js";import{C as Ao}from"./chevron-down-DS-mdh9v.js";import{B as jo}from"./V1Edit-CByRkdIm.js";import{G as lt}from"./Global-ErywZRdd.js";import{d as ko,B as Ct}from"./dom-to-image-more.min-CaE2rOw2.js";import{C as Ro}from"./chevron-left-B2s3ZsB7.js";import{T as Bo}from"./trash-2-DK1wnsDn.js";import{C as Oo}from"./circle-check-big-D6DM3vPb.js";import"./index-yBjzXJbu.js";import"./objectSpread2-8ZRf701l.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./sparkles-DeLUn6av.js";import"./sliders-vertical-C5ts4taK.js";import"./settings-BSPs3Zt8.js";import"./chevron-up-D78jyEhP.js";import"./index-BSWw-p5k.js";import"./EditorMain-_pvTHO57.js";import"./upload-qgEr5bIl.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-Chjiymov.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=J("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=J("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=J("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=J("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=J("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=J("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=J("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=J("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=J("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=J("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=J("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=J("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=J("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=J("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=J("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=J("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=J("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=J("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=J("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=J("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=J("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=J("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=J("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=J("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=J("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=J("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=J("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=J("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=J("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);function ta(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,yo(e,r)}var na=re.createContext(null);function ui(e){e()}var aa=ui,pi=function(r){return aa=r},gi=function(){return aa};function fi(){var e=gi(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){e(function(){for(var a=r;a;)a.callback(),a=a.next})},get:function(){for(var a=[],o=r;o;)a.push(o),o=o.next;return a},subscribe:function(a){var o=!0,i=t={callback:a,next:null,prev:t};return i.prev?i.prev.next=i:r=i,function(){!o||r===null||(o=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var Cn={notify:function(){},get:function(){return[]}};function oa(e,r){var t,n=Cn;function a(d){return c(),n.subscribe(d)}function o(){n.notify()}function i(){g.onStateChange&&g.onStateChange()}function l(){return!!t}function c(){t||(t=r?r.addNestedSub(i):e.subscribe(i),n=fi())}function p(){t&&(t(),t=void 0,n.clear(),n=Cn)}var g={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:i,isSubscribed:l,trySubscribe:c,tryUnsubscribe:p,getListeners:function(){return n}};return g}var ia=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect;function vi(e){var r=e.store,t=e.context,n=e.children,a=C.useMemo(function(){var l=oa(r);return{store:r,subscription:l}},[r]),o=C.useMemo(function(){return r.getState()},[r]);ia(function(){var l=a.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==r.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[a,o]);var i=t||na;return re.createElement(i.Provider,{value:a},n)}var st={exports:{}},Z={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sn;function mi(){if(Sn)return Z;Sn=1;var e=60103,r=60106,t=60107,n=60108,a=60114,o=60109,i=60110,l=60112,c=60113,p=60120,g=60115,d=60116,u=60121,v=60122,f=60117,w=60129,b=60131;if(typeof Symbol=="function"&&Symbol.for){var S=Symbol.for;e=S("react.element"),r=S("react.portal"),t=S("react.fragment"),n=S("react.strict_mode"),a=S("react.profiler"),o=S("react.provider"),i=S("react.context"),l=S("react.forward_ref"),c=S("react.suspense"),p=S("react.suspense_list"),g=S("react.memo"),d=S("react.lazy"),u=S("react.block"),v=S("react.server.block"),f=S("react.fundamental"),w=S("react.debug_trace_mode"),b=S("react.legacy_hidden")}function D(j){if(typeof j=="object"&&j!==null){var W=j.$$typeof;switch(W){case e:switch(j=j.type,j){case t:case a:case n:case c:case p:return j;default:switch(j=j&&j.$$typeof,j){case i:case l:case d:case g:case o:return j;default:return W}}case r:return W}}}var E=o,N=e,B=l,k=t,G=d,U=g,z=r,q=a,$=n,te=c;return Z.ContextConsumer=i,Z.ContextProvider=E,Z.Element=N,Z.ForwardRef=B,Z.Fragment=k,Z.Lazy=G,Z.Memo=U,Z.Portal=z,Z.Profiler=q,Z.StrictMode=$,Z.Suspense=te,Z.isAsyncMode=function(){return!1},Z.isConcurrentMode=function(){return!1},Z.isContextConsumer=function(j){return D(j)===i},Z.isContextProvider=function(j){return D(j)===o},Z.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},Z.isForwardRef=function(j){return D(j)===l},Z.isFragment=function(j){return D(j)===t},Z.isLazy=function(j){return D(j)===d},Z.isMemo=function(j){return D(j)===g},Z.isPortal=function(j){return D(j)===r},Z.isProfiler=function(j){return D(j)===a},Z.isStrictMode=function(j){return D(j)===n},Z.isSuspense=function(j){return D(j)===c},Z.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===t||j===a||j===w||j===n||j===c||j===p||j===b||typeof j=="object"&&j!==null&&(j.$$typeof===d||j.$$typeof===g||j.$$typeof===o||j.$$typeof===i||j.$$typeof===l||j.$$typeof===f||j.$$typeof===u||j[0]===v)},Z.typeOf=D,Z}var In;function hi(){return In||(In=1,st.exports=mi()),st.exports}var bi=hi(),xi=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],yi=["reactReduxForwardedRef"],wi=[],Ci=[null,null];function Si(e,r){var t=e[1];return[r.payload,t+1]}function Dn(e,r,t){ia(function(){return e.apply(void 0,r)},t)}function Ii(e,r,t,n,a,o,i){e.current=n,r.current=a,t.current=!1,o.current&&(o.current=null,i())}function Di(e,r,t,n,a,o,i,l,c,p){if(e){var g=!1,d=null,u=function(){if(!g){var w=r.getState(),b,S;try{b=n(w,a.current)}catch(D){S=D,d=D}S||(d=null),b===o.current?i.current||c():(o.current=b,l.current=b,i.current=!0,p({type:"STORE_UPDATED",payload:{error:S}}))}};t.onStateChange=u,t.trySubscribe(),u();var v=function(){if(g=!0,t.tryUnsubscribe(),t.onStateChange=null,d)throw d};return v}}var Ni=function(){return[null,0]};function Ei(e,r){r===void 0&&(r={});var t=r,n=t.getDisplayName,a=n===void 0?function(E){return"ConnectAdvanced("+E+")"}:n,o=t.methodName,i=o===void 0?"connectAdvanced":o,l=t.renderCountProp,c=l===void 0?void 0:l,p=t.shouldHandleStateChanges,g=p===void 0?!0:p,d=t.storeKey,u=d===void 0?"store":d;t.withRef;var v=t.forwardRef,f=v===void 0?!1:v,w=t.context,b=w===void 0?na:w,S=Vr(t,xi),D=b;return function(N){var B=N.displayName||N.name||"Component",k=a(B),G=L({},S,{getDisplayName:a,methodName:i,renderCountProp:c,shouldHandleStateChanges:g,storeKey:u,displayName:k,wrappedComponentName:B,WrappedComponent:N}),U=S.pure;function z(W){return e(W.dispatch,G)}var q=U?C.useMemo:function(W){return W()};function $(W){var ae=C.useMemo(function(){var Te=W.reactReduxForwardedRef,Me=Vr(W,yi);return[W.context,Te,Me]},[W]),R=ae[0],ve=ae[1],me=ae[2],Q=C.useMemo(function(){return R&&R.Consumer&&bi.isContextConsumer(re.createElement(R.Consumer,null))?R:D},[R,D]),Y=C.useContext(Q),ce=!!W.store&&!!W.store.getState&&!!W.store.dispatch;Y&&Y.store;var oe=ce?W.store:Y.store,Ae=C.useMemo(function(){return z(oe)},[oe]),ee=C.useMemo(function(){if(!g)return Ci;var Te=oa(oe,ce?null:Y.subscription),Me=Te.notifyNestedSubs.bind(Te);return[Te,Me]},[oe,ce,Y]),he=ee[0],Se=ee[1],Ie=C.useMemo(function(){return ce?Y:L({},Y,{subscription:he})},[ce,Y,he]),Re=C.useReducer(Si,wi,Ni),We=Re[0],pe=We[0],Le=Re[1];if(pe&&pe.error)throw pe.error;var Qe=C.useRef(),$e=C.useRef(me),Be=C.useRef(),Fe=C.useRef(!1),Oe=q(function(){return Be.current&&me===$e.current?Be.current:Ae(oe.getState(),me)},[oe,pe,me]);Dn(Ii,[$e,Qe,Fe,me,Oe,Be,Se]),Dn(Di,[g,oe,he,Ae,$e,Qe,Fe,Be,Se,Le],[oe,he,Ae]);var Ge=C.useMemo(function(){return re.createElement(N,L({},Oe,{ref:ve}))},[ve,N,Oe]),tr=C.useMemo(function(){return g?re.createElement(Q.Provider,{value:Ie},Ge):Ge},[Q,Ge,Ie]);return tr}var te=U?re.memo($):$;if(te.WrappedComponent=N,te.displayName=$.displayName=k,f){var j=re.forwardRef(function(ae,R){return re.createElement(te,L({},ae,{reactReduxForwardedRef:R}))});return j.displayName=k,j.WrappedComponent=N,bn(j,N)}return bn(te,N)}}function Nn(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function ct(e,r){if(Nn(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!Object.prototype.hasOwnProperty.call(r,t[a])||!Nn(e[t[a]],r[t[a]]))return!1;return!0}function Pi(e,r){var t={},n=function(i){var l=e[i];typeof l=="function"&&(t[i]=function(){return r(l.apply(void 0,arguments))})};for(var a in e)n(a);return t}function At(e){return function(t,n){var a=e(t,n);function o(){return a}return o.dependsOnOwnProps=!1,o}}function En(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function la(e,r){return function(n,a){a.displayName;var o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=En(e);var p=o(l,c);return typeof p=="function"&&(o.mapToProps=p,o.dependsOnOwnProps=En(p),p=o(l,c)),p},o}}function Ai(e){return typeof e=="function"?la(e):void 0}function ji(e){return e?void 0:At(function(r){return{dispatch:r}})}function ki(e){return e&&typeof e=="object"?At(function(r){return Pi(e,r)}):void 0}const Ri=[Ai,ji,ki];function Bi(e){return typeof e=="function"?la(e):void 0}function Oi(e){return e?void 0:At(function(){return{}})}const Ti=[Bi,Oi];function Mi(e,r,t){return L({},t,e,r)}function Li(e){return function(t,n){n.displayName;var a=n.pure,o=n.areMergedPropsEqual,i=!1,l;return function(p,g,d){var u=e(p,g,d);return i?(!a||!o(u,l))&&(l=u):(i=!0,l=u),l}}}function Fi(e){return typeof e=="function"?Li(e):void 0}function Gi(e){return e?void 0:function(){return Mi}}const zi=[Fi,Gi];var Wi=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function $i(e,r,t,n){return function(o,i){return t(e(o,i),r(n,i),i)}}function Ui(e,r,t,n,a){var o=a.areStatesEqual,i=a.areOwnPropsEqual,l=a.areStatePropsEqual,c=!1,p,g,d,u,v;function f(E,N){return p=E,g=N,d=e(p,g),u=r(n,g),v=t(d,u,g),c=!0,v}function w(){return d=e(p,g),r.dependsOnOwnProps&&(u=r(n,g)),v=t(d,u,g),v}function b(){return e.dependsOnOwnProps&&(d=e(p,g)),r.dependsOnOwnProps&&(u=r(n,g)),v=t(d,u,g),v}function S(){var E=e(p,g),N=!l(E,d);return d=E,N&&(v=t(d,u,g)),v}function D(E,N){var B=!i(N,g),k=!o(E,p,N,g);return p=E,g=N,B&&k?w():B?b():k?S():v}return function(N,B){return c?D(N,B):f(N,B)}}function Hi(e,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,a=r.initMergeProps,o=Vr(r,Wi),i=t(e,o),l=n(e,o),c=a(e,o),p=o.pure?Ui:$i;return p(i,l,c,e,o)}var Vi=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function dt(e,r,t){for(var n=r.length-1;n>=0;n--){var a=r[n](e);if(a)return a}return function(o,i){throw new Error("Invalid value of type "+typeof e+" for "+t+" argument when connecting component "+i.wrappedComponentName+".")}}function qi(e,r){return e===r}function Ki(e){var r=e===void 0?{}:e,t=r.connectHOC,n=t===void 0?Ei:t,a=r.mapStateToPropsFactories,o=a===void 0?Ti:a,i=r.mapDispatchToPropsFactories,l=i===void 0?Ri:i,c=r.mergePropsFactories,p=c===void 0?zi:c,g=r.selectorFactory,d=g===void 0?Hi:g;return function(v,f,w,b){b===void 0&&(b={});var S=b,D=S.pure,E=D===void 0?!0:D,N=S.areStatesEqual,B=N===void 0?qi:N,k=S.areOwnPropsEqual,G=k===void 0?ct:k,U=S.areStatePropsEqual,z=U===void 0?ct:U,q=S.areMergedPropsEqual,$=q===void 0?ct:q,te=Vr(S,Vi),j=dt(v,o,"mapStateToProps"),W=dt(f,l,"mapDispatchToProps"),ae=dt(w,p,"mergeProps");return n(d,L({methodName:"connect",getDisplayName:function(ve){return"Connect("+ve+")"},shouldHandleStateChanges:!!v,initMapStateToProps:j,initMapDispatchToProps:W,initMergeProps:ae,pure:E,areStatesEqual:B,areOwnPropsEqual:G,areStatePropsEqual:z,areMergedPropsEqual:$},te))}}const sa=Ki();pi(wo.unstable_batchedUpdates);function Ji(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function ca(e,r){var t=C.useState(function(){return{inputs:r,result:e()}})[0],n=C.useRef(!0),a=C.useRef(t),o=n.current||!!(r&&a.current.inputs&&Ji(r,a.current.inputs)),i=o?a.current:{inputs:r,result:e()};return C.useEffect(function(){n.current=!1,a.current=i},[i]),i.result}function Yi(e,r){return ca(function(){return e},r)}var V=ca,T=Yi,Xi="Invariant failed";function Qi(e,r){throw new Error(Xi)}var ke=function(r){var t=r.top,n=r.right,a=r.bottom,o=r.left,i=n-o,l=a-t,c={top:t,right:n,bottom:a,left:o,width:i,height:l,x:o,y:t,center:{x:(n+o)/2,y:(a+t)/2}};return c},jt=function(r,t){return{top:r.top-t.top,left:r.left-t.left,bottom:r.bottom+t.bottom,right:r.right+t.right}},Pn=function(r,t){return{top:r.top+t.top,left:r.left+t.left,bottom:r.bottom-t.bottom,right:r.right-t.right}},Zi=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},ut={top:0,right:0,bottom:0,left:0},kt=function(r){var t=r.borderBox,n=r.margin,a=n===void 0?ut:n,o=r.border,i=o===void 0?ut:o,l=r.padding,c=l===void 0?ut:l,p=ke(jt(t,a)),g=ke(Pn(t,i)),d=ke(Pn(g,c));return{marginBox:p,borderBox:ke(t),paddingBox:g,contentBox:d,margin:a,border:i,padding:c}},Ne=function(r){var t=r.slice(0,-2),n=r.slice(-2);if(n!=="px")return 0;var a=Number(t);return isNaN(a)&&Qi(),a},_i=function(){return{x:window.pageXOffset,y:window.pageYOffset}},qr=function(r,t){var n=r.borderBox,a=r.border,o=r.margin,i=r.padding,l=Zi(n,t);return kt({borderBox:l,border:a,margin:o,padding:i})},Kr=function(r,t){return t===void 0&&(t=_i()),qr(r,t)},da=function(r,t){var n={top:Ne(t.marginTop),right:Ne(t.marginRight),bottom:Ne(t.marginBottom),left:Ne(t.marginLeft)},a={top:Ne(t.paddingTop),right:Ne(t.paddingRight),bottom:Ne(t.paddingBottom),left:Ne(t.paddingLeft)},o={top:Ne(t.borderTopWidth),right:Ne(t.borderRightWidth),bottom:Ne(t.borderBottomWidth),left:Ne(t.borderLeftWidth)};return kt({borderBox:r,margin:n,padding:a,border:o})},ua=function(r){var t=r.getBoundingClientRect(),n=window.getComputedStyle(r);return da(t,n)},An=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function el(e,r){return!!(e===r||An(e)&&An(r))}function rl(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!el(e[t],r[t]))return!1;return!0}function le(e,r){r===void 0&&(r=rl);var t,n=[],a,o=!1;function i(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return o&&t===this&&r(l,n)||(a=e.apply(this,l),o=!0,t=this,n=l),a}return i}var Er=function(r){var t=[],n=null,a=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];t=l,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function pa(e,r){}pa.bind(null,"warn");pa.bind(null,"error");function qe(){}function tl(e,r){return L({},e,{},r)}function Ee(e,r,t){var n=r.map(function(a){var o=tl(t,a.options);return e.addEventListener(a.eventName,a.fn,o),function(){e.removeEventListener(a.eventName,a.fn,o)}});return function(){n.forEach(function(o){o()})}}var nl="Invariant failed";function Jr(e){this.message=e}Jr.prototype.toString=function(){return this.message};function P(e,r){throw new Jr(nl)}var al=function(e){ta(r,e);function r(){for(var n,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,n.callbacks=null,n.unbind=qe,n.onWindowError=function(l){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var p=l.error;p instanceof Jr&&l.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(l){n.callbacks=l},n}var t=r.prototype;return t.componentDidMount=function(){this.unbind=Ee(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(a){if(a instanceof Jr){this.setState({});return}throw a},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r}(re.Component),ol=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Yr=function(r){return r+1},il=function(r){return`
  You have lifted an item in position `+Yr(r.source.index)+`
`},ga=function(r,t){var n=r.droppableId===t.droppableId,a=Yr(r.index),o=Yr(t.index);return n?`
      You have moved the item from position `+a+`
      to position `+o+`
    `:`
    You have moved the item from position `+a+`
    in list `+r.droppableId+`
    to list `+t.droppableId+`
    in position `+o+`
  `},fa=function(r,t,n){var a=t.droppableId===n.droppableId;return a?`
      The item `+r+`
      has been combined with `+n.draggableId:`
      The item `+r+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},ll=function(r){var t=r.destination;if(t)return ga(r.source,t);var n=r.combine;return n?fa(r.draggableId,r.source,n):"You are over an area that cannot be dropped on"},jn=function(r){return`
  The item has returned to its starting position
  of `+Yr(r.index)+`
`},sl=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+jn(r.source)+`
    `;var t=r.destination,n=r.combine;return t?`
      You have dropped the item.
      `+ga(r.source,t)+`
    `:n?`
      You have dropped the item.
      `+fa(r.draggableId,r.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+jn(r.source)+`
  `},Hr={dragHandleUsageInstructions:ol,onDragStart:il,onDragUpdate:ll,onDragEnd:sl},se={x:0,y:0},ue=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},ye=function(r,t){return{x:r.x-t.x,y:r.y-t.y}},Ke=function(r,t){return r.x===t.x&&r.y===t.y},pr=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},rr=function(r,t,n){var a;return n===void 0&&(n=0),a={},a[r]=t,a[r==="x"?"y":"x"]=n,a},Pr=function(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},kn=function(r,t){return Math.min.apply(Math,t.map(function(n){return Pr(r,n)}))},va=function(r){return function(t){return{x:r(t.x),y:r(t.y)}}},cl=function(e,r){var t=ke({top:Math.max(r.top,e.top),right:Math.min(r.right,e.right),bottom:Math.min(r.bottom,e.bottom),left:Math.max(r.left,e.left)});return t.width<=0||t.height<=0?null:t},Rr=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Rn=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},dl={top:0,right:0,bottom:0,left:0},ul=function(r,t){return t?Rr(r,t.scroll.diff.displacement):r},pl=function(r,t,n){if(n&&n.increasedBy){var a;return L({},r,(a={},a[t.end]=r[t.end]+n.increasedBy[t.line],a))}return r},gl=function(r,t){return t&&t.shouldClipSubject?cl(t.pageMarginBox,r):ke(r)},cr=function(e){var r=e.page,t=e.withPlaceholder,n=e.axis,a=e.frame,o=ul(r.marginBox,a),i=pl(o,n,t),l=gl(i,a);return{page:r,withPlaceholder:t,active:l}},Rt=function(e,r){e.frame||P();var t=e.frame,n=ye(r,t.scroll.initial),a=pr(n),o=L({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:a},max:t.scroll.max}}),i=cr({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o}),l=L({},e,{frame:o,subject:i});return l};function Xr(e){return Object.values?Object.values(e):Object.keys(e).map(function(r){return e[r]})}function Bt(e,r){if(e.findIndex)return e.findIndex(r);for(var t=0;t<e.length;t++)if(r(e[t]))return t;return-1}function Xe(e,r){if(e.find)return e.find(r);var t=Bt(e,r);if(t!==-1)return e[t]}function ma(e){return Array.prototype.slice.call(e)}var ha=le(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),ba=le(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),et=le(function(e){return Xr(e)}),fl=le(function(e){return Xr(e)}),gr=le(function(e,r){var t=fl(r).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return t});function Ot(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function rt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var tt=le(function(e,r){return r.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),vl=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,a=e.insideDestination,o=e.previousImpact;if(!n.isCombineEnabled)return null;var i=Ot(o);if(!i)return null;function l(w){var b={type:"COMBINE",combine:{draggableId:w,droppableId:n.descriptor.id}};return L({},o,{at:b})}var c=o.displaced.all,p=c.length?c[0]:null;if(r)return p?l(p):null;var g=tt(t,a);if(!p){if(!g.length)return null;var d=g[g.length-1];return l(d.descriptor.id)}var u=Bt(g,function(w){return w.descriptor.id===p});u===-1&&P();var v=u-1;if(v<0)return null;var f=g[v];return l(f.descriptor.id)},fr=function(e,r){return e.descriptor.droppableId===r.descriptor.id},xa={point:se,value:0},Ar={invisible:{},visible:{},all:[]},ml={displaced:Ar,displacedBy:xa,at:null},Pe=function(e,r){return function(t){return e<=t&&t<=r}},ya=function(e){var r=Pe(e.top,e.bottom),t=Pe(e.left,e.right);return function(n){var a=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);if(a)return!0;var o=r(n.top)||r(n.bottom),i=t(n.left)||t(n.right),l=o&&i;if(l)return!0;var c=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,g=c&&p;if(g)return!0;var d=c&&i||p&&o;return d}},hl=function(e){var r=Pe(e.top,e.bottom),t=Pe(e.left,e.right);return function(n){var a=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);return a}},Tt={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},wa={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},bl=function(e){return function(r){var t=Pe(r.top,r.bottom),n=Pe(r.left,r.right);return function(a){return e===Tt?t(a.top)&&t(a.bottom):n(a.left)&&n(a.right)}}},xl=function(r,t){var n=t.frame?t.frame.scroll.diff.displacement:se;return Rr(r,n)},yl=function(r,t,n){return t.subject.active?n(t.subject.active)(r):!1},wl=function(r,t,n){return n(t)(r)},Mt=function(r){var t=r.target,n=r.destination,a=r.viewport,o=r.withDroppableDisplacement,i=r.isVisibleThroughFrameFn,l=o?xl(t,n):t;return yl(l,n,i)&&wl(l,a,i)},Cl=function(r){return Mt(L({},r,{isVisibleThroughFrameFn:ya}))},Ca=function(r){return Mt(L({},r,{isVisibleThroughFrameFn:hl}))},Sl=function(r){return Mt(L({},r,{isVisibleThroughFrameFn:bl(r.destination.axis)}))},Il=function(r,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var a=t.invisible,o=t.visible;if(a[r])return!1;var i=o[r];return i?i.shouldAnimate:!0};function Dl(e,r){var t=e.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return ke(jt(t,n))}function jr(e){var r=e.afterDragging,t=e.destination,n=e.displacedBy,a=e.viewport,o=e.forceShouldAnimate,i=e.last;return r.reduce(function(c,p){var g=Dl(p,n),d=p.descriptor.id;c.all.push(d);var u=Cl({target:g,destination:t,viewport:a,withDroppableDisplacement:!0});if(!u)return c.invisible[p.descriptor.id]=!0,c;var v=Il(d,i,o),f={draggableId:d,shouldAnimate:v};return c.visible[d]=f,c},{all:[],visible:{},invisible:{}})}function Nl(e,r){if(!e.length)return 0;var t=e[e.length-1].descriptor.index;return r.inHomeList?t:t+1}function Bn(e){var r=e.insideDestination,t=e.inHomeList,n=e.displacedBy,a=e.destination,o=Nl(r,{inHomeList:t});return{displaced:Ar,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:o}}}}function Qr(e){var r=e.draggable,t=e.insideDestination,n=e.destination,a=e.viewport,o=e.displacedBy,i=e.last,l=e.index,c=e.forceShouldAnimate,p=fr(r,n);if(l==null)return Bn({insideDestination:t,inHomeList:p,displacedBy:o,destination:n});var g=Xe(t,function(w){return w.descriptor.index===l});if(!g)return Bn({insideDestination:t,inHomeList:p,displacedBy:o,destination:n});var d=tt(r,t),u=t.indexOf(g),v=d.slice(u),f=jr({afterDragging:v,destination:n,displacedBy:o,last:i,viewport:a.frame,forceShouldAnimate:c});return{displaced:f,displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function Ye(e,r){return!!r.effected[e]}var El=function(e){var r=e.isMovingForward,t=e.destination,n=e.draggables,a=e.combine,o=e.afterCritical;if(!t.isCombineEnabled)return null;var i=a.draggableId,l=n[i],c=l.descriptor.index,p=Ye(i,o);return p?r?c:c-1:r?c+1:c},Pl=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var o=a.index,i=r?o+1:o-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,p=t?c:c+1;return i<l||i>p?null:i},Al=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.draggable,a=e.draggables,o=e.destination,i=e.insideDestination,l=e.previousImpact,c=e.viewport,p=e.afterCritical,g=l.at;if(g||P(),g.type==="REORDER"){var d=Pl({isMovingForward:r,isInHomeList:t,location:g.destination,insideDestination:i});return d==null?null:Qr({draggable:n,insideDestination:i,destination:o,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:d})}var u=El({isMovingForward:r,destination:o,displaced:l.displaced,draggables:a,combine:g.combine,afterCritical:p});return u==null?null:Qr({draggable:n,insideDestination:i,destination:o,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:u})},jl=function(e){var r=e.displaced,t=e.afterCritical,n=e.combineWith,a=e.displacedBy,o=!!(r.visible[n]||r.invisible[n]);return Ye(n,t)?o?se:pr(a.point):o?a.point:se},kl=function(e){var r=e.afterCritical,t=e.impact,n=e.draggables,a=rt(t);a||P();var o=a.draggableId,i=n[o].page.borderBox.center,l=jl({displaced:t.displaced,afterCritical:r,combineWith:o,displacedBy:t.displacedBy});return ue(i,l)},Sa=function(r,t){return t.margin[r.start]+t.borderBox[r.size]/2},Rl=function(r,t){return t.margin[r.end]+t.borderBox[r.size]/2},Lt=function(r,t,n){return t[r.crossAxisStart]+n.margin[r.crossAxisStart]+n.borderBox[r.crossAxisSize]/2},On=function(r){var t=r.axis,n=r.moveRelativeTo,a=r.isMoving;return rr(t.line,n.marginBox[t.end]+Sa(t,a),Lt(t,n.marginBox,a))},Tn=function(r){var t=r.axis,n=r.moveRelativeTo,a=r.isMoving;return rr(t.line,n.marginBox[t.start]-Rl(t,a),Lt(t,n.marginBox,a))},Bl=function(r){var t=r.axis,n=r.moveInto,a=r.isMoving;return rr(t.line,n.contentBox[t.start]+Sa(t,a),Lt(t,n.contentBox,a))},Ol=function(e){var r=e.impact,t=e.draggable,n=e.draggables,a=e.droppable,o=e.afterCritical,i=gr(a.descriptor.id,n),l=t.page,c=a.axis;if(!i.length)return Bl({axis:c,moveInto:a.page,isMoving:l});var p=r.displaced,g=r.displacedBy,d=p.all[0];if(d){var u=n[d];if(Ye(d,o))return Tn({axis:c,moveRelativeTo:u.page,isMoving:l});var v=qr(u.page,g.point);return Tn({axis:c,moveRelativeTo:v,isMoving:l})}var f=i[i.length-1];if(f.descriptor.id===t.descriptor.id)return l.borderBox.center;if(Ye(f.descriptor.id,o)){var w=qr(f.page,pr(o.displacedBy.point));return On({axis:c,moveRelativeTo:w,isMoving:l})}return On({axis:c,moveRelativeTo:f.page,isMoving:l})},St=function(e,r){var t=e.frame;return t?ue(r,t.scroll.diff.displacement):r},Tl=function(r){var t=r.impact,n=r.draggable,a=r.droppable,o=r.draggables,i=r.afterCritical,l=n.page.borderBox.center,c=t.at;return!a||!c?l:c.type==="REORDER"?Ol({impact:t,draggable:n,draggables:o,droppable:a,afterCritical:i}):kl({impact:t,draggables:o,afterCritical:i})},nt=function(e){var r=Tl(e),t=e.droppable,n=t?St(t,r):r;return n},Ia=function(e,r){var t=ye(r,e.scroll.initial),n=pr(t),a=ke({top:r.y,bottom:r.y+e.frame.height,left:r.x,right:r.x+e.frame.width}),o={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:r,diff:{value:t,displacement:n}}};return o};function Mn(e,r){return e.map(function(t){return r[t]})}function Ml(e,r){for(var t=0;t<r.length;t++){var n=r[t].visible[e];if(n)return n}return null}var Ll=function(e){var r=e.impact,t=e.viewport,n=e.destination,a=e.draggables,o=e.maxScrollChange,i=Ia(t,ue(t.scroll.current,o)),l=n.frame?Rt(n,ue(n.frame.scroll.current,o)):n,c=r.displaced,p=jr({afterDragging:Mn(c.all,a),destination:n,displacedBy:r.displacedBy,viewport:i.frame,last:c,forceShouldAnimate:!1}),g=jr({afterDragging:Mn(c.all,a),destination:l,displacedBy:r.displacedBy,viewport:t.frame,last:c,forceShouldAnimate:!1}),d={},u={},v=[c,p,g];c.all.forEach(function(w){var b=Ml(w,v);if(b){u[w]=b;return}d[w]=!0});var f=L({},r,{displaced:{all:c.all,invisible:d,visible:u}});return f},Fl=function(e,r){return ue(e.scroll.diff.displacement,r)},Ft=function(e){var r=e.pageBorderBoxCenter,t=e.draggable,n=e.viewport,a=Fl(n,r),o=ye(a,t.page.borderBox.center);return ue(t.client.borderBox.center,o)},Da=function(e){var r=e.draggable,t=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,o=e.withDroppableDisplacement,i=e.onlyOnMainAxis,l=i===void 0?!1:i,c=ye(n,r.page.borderBox.center),p=Rr(r.page.borderBox,c),g={target:p,destination:t,withDroppableDisplacement:o,viewport:a};return l?Sl(g):Ca(g)},Gl=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,a=e.draggables,o=e.previousImpact,i=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var g=gr(n.descriptor.id,a),d=fr(t,n),u=vl({isMovingForward:r,draggable:t,destination:n,insideDestination:g,previousImpact:o})||Al({isMovingForward:r,isInHomeList:d,draggable:t,draggables:a,destination:n,insideDestination:g,previousImpact:o,viewport:i,afterCritical:p});if(!u)return null;var v=nt({impact:u,draggable:t,droppable:n,draggables:a,afterCritical:p}),f=Da({draggable:t,destination:n,newPageBorderBoxCenter:v,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(f){var w=Ft({pageBorderBoxCenter:v,draggable:t,viewport:i});return{clientSelection:w,impact:u,scrollJumpRequest:null}}var b=ye(v,l),S=Ll({impact:u,viewport:i,destination:n,draggables:a,maxScrollChange:b});return{clientSelection:c,impact:S,scrollJumpRequest:b}},fe=function(r){var t=r.subject.active;return t||P(),t},zl=function(e){var r=e.isMovingForward,t=e.pageBorderBoxCenter,n=e.source,a=e.droppables,o=e.viewport,i=n.subject.active;if(!i)return null;var l=n.axis,c=Pe(i[l.start],i[l.end]),p=et(a).filter(function(d){return d!==n}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return ya(o.frame)(fe(d))}).filter(function(d){var u=fe(d);return r?i[l.crossAxisEnd]<u[l.crossAxisEnd]:u[l.crossAxisStart]<i[l.crossAxisStart]}).filter(function(d){var u=fe(d),v=Pe(u[l.start],u[l.end]);return c(u[l.start])||c(u[l.end])||v(i[l.start])||v(i[l.end])}).sort(function(d,u){var v=fe(d)[l.crossAxisStart],f=fe(u)[l.crossAxisStart];return r?v-f:f-v}).filter(function(d,u,v){return fe(d)[l.crossAxisStart]===fe(v[0])[l.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var g=p.filter(function(d){var u=Pe(fe(d)[l.start],fe(d)[l.end]);return u(t[l.line])});return g.length===1?g[0]:g.length>1?g.sort(function(d,u){return fe(d)[l.start]-fe(u)[l.start]})[0]:p.sort(function(d,u){var v=kn(t,Rn(fe(d))),f=kn(t,Rn(fe(u)));return v!==f?v-f:fe(d)[l.start]-fe(u)[l.start]})[0]},Ln=function(r,t){var n=r.page.borderBox.center;return Ye(r.descriptor.id,t)?ye(n,t.displacedBy.point):n},Wl=function(r,t){var n=r.page.borderBox;return Ye(r.descriptor.id,t)?Rr(n,pr(t.displacedBy.point)):n},$l=function(e){var r=e.pageBorderBoxCenter,t=e.viewport,n=e.destination,a=e.insideDestination,o=e.afterCritical,i=a.filter(function(l){return Ca({target:Wl(l,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var p=Pr(r,St(n,Ln(l,o))),g=Pr(r,St(n,Ln(c,o)));return p<g?-1:g<p?1:l.descriptor.index-c.descriptor.index});return i[0]||null},Br=le(function(r,t){var n=t[r.line];return{value:n,point:rr(r.line,n)}}),Ul=function(r,t,n){var a=r.axis;if(r.descriptor.mode==="virtual")return rr(a.line,t[a.line]);var o=r.subject.page.contentBox[a.size],i=gr(r.descriptor.id,n),l=i.reduce(function(g,d){return g+d.client.marginBox[a.size]},0),c=l+t[a.line],p=c-o;return p<=0?null:rr(a.line,p)},Na=function(r,t){return L({},r,{scroll:L({},r.scroll,{max:t})})},Ea=function(r,t,n){var a=r.frame;fr(t,r)&&P(),r.subject.withPlaceholder&&P();var o=Br(r.axis,t.displaceBy).point,i=Ul(r,o,n),l={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!a){var c=cr({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:r.frame});return L({},r,{subject:c})}var p=i?ue(a.scroll.max,i):a.scroll.max,g=Na(a,p),d=cr({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:g});return L({},r,{subject:d,frame:g})},Hl=function(r){var t=r.subject.withPlaceholder;t||P();var n=r.frame;if(!n){var a=cr({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return L({},r,{subject:a})}var o=t.oldFrameMaxScroll;o||P();var i=Na(n,o),l=cr({page:r.subject.page,axis:r.axis,frame:i,withPlaceholder:null});return L({},r,{subject:l,frame:i})},Vl=function(e){var r=e.previousPageBorderBoxCenter,t=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,o=e.draggables,i=e.destination,l=e.viewport,c=e.afterCritical;if(!t){if(n.length)return null;var p={displaced:Ar,displacedBy:xa,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},g=nt({impact:p,draggable:a,droppable:i,draggables:o,afterCritical:c}),d=fr(a,i)?i:Ea(i,a,o),u=Da({draggable:a,destination:d,newPageBorderBoxCenter:g,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return u?p:null}var v=r[i.axis.line]<=t.page.borderBox.center[i.axis.line],f=function(){var b=t.descriptor.index;return t.descriptor.id===a.descriptor.id||v?b:b+1}(),w=Br(i.axis,a.displaceBy);return Qr({draggable:a,insideDestination:n,destination:i,viewport:l,displacedBy:w,last:Ar,index:f})},ql=function(e){var r=e.isMovingForward,t=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,o=e.draggables,i=e.droppables,l=e.viewport,c=e.afterCritical,p=zl({isMovingForward:r,pageBorderBoxCenter:t,source:a,droppables:i,viewport:l});if(!p)return null;var g=gr(p.descriptor.id,o),d=$l({pageBorderBoxCenter:t,viewport:l,destination:p,insideDestination:g,afterCritical:c}),u=Vl({previousPageBorderBoxCenter:t,destination:p,draggable:n,draggables:o,moveRelativeTo:d,insideDestination:g,viewport:l,afterCritical:c});if(!u)return null;var v=nt({impact:u,draggable:n,droppable:p,draggables:o,afterCritical:c}),f=Ft({pageBorderBoxCenter:v,draggable:n,viewport:l});return{clientSelection:f,impact:u,scrollJumpRequest:null}},we=function(e){var r=e.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},Kl=function(r,t){var n=we(r);return n?t[n]:null},Jl=function(e){var r=e.state,t=e.type,n=Kl(r.impact,r.dimensions.droppables),a=!!n,o=r.dimensions.droppables[r.critical.droppable.id],i=n||o,l=i.axis.direction,c=l==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||l==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(c&&!a)return null;var p=t==="MOVE_DOWN"||t==="MOVE_RIGHT",g=r.dimensions.draggables[r.critical.draggable.id],d=r.current.page.borderBoxCenter,u=r.dimensions,v=u.draggables,f=u.droppables;return c?Gl({isMovingForward:p,previousPageBorderBoxCenter:d,draggable:g,destination:i,draggables:v,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):ql({isMovingForward:p,previousPageBorderBoxCenter:d,draggable:g,isOver:i,draggables:v,droppables:f,viewport:r.viewport,afterCritical:r.afterCritical})};function er(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Pa(e){var r=Pe(e.top,e.bottom),t=Pe(e.left,e.right);return function(a){return r(a.y)&&t(a.x)}}function Yl(e,r){return e.left<r.right&&e.right>r.left&&e.top<r.bottom&&e.bottom>r.top}function Xl(e){var r=e.pageBorderBox,t=e.draggable,n=e.candidates,a=t.page.borderBox.center,o=n.map(function(i){var l=i.axis,c=rr(i.axis.line,r.center[l.line],i.page.borderBox.center[l.crossAxisLine]);return{id:i.descriptor.id,distance:Pr(a,c)}}).sort(function(i,l){return l.distance-i.distance});return o[0]?o[0].id:null}function Ql(e){var r=e.pageBorderBox,t=e.draggable,n=e.droppables,a=et(n).filter(function(o){if(!o.isEnabled)return!1;var i=o.subject.active;if(!i||!Yl(r,i))return!1;if(Pa(i)(r.center))return!0;var l=o.axis,c=i.center[l.crossAxisLine],p=r[l.crossAxisStart],g=r[l.crossAxisEnd],d=Pe(i[l.crossAxisStart],i[l.crossAxisEnd]),u=d(p),v=d(g);return!u&&!v?!0:u?p<c:g>c});return a.length?a.length===1?a[0].descriptor.id:Xl({pageBorderBox:r,draggable:t,candidates:a}):null}var Aa=function(r,t){return ke(Rr(r,t))},Zl=function(e,r){var t=e.frame;return t?Aa(r,t.scroll.diff.value):r};function ja(e){var r=e.displaced,t=e.id;return!!(r.visible[t]||r.invisible[t])}function _l(e){var r=e.draggable,t=e.closest,n=e.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var es=function(e){var r=e.pageBorderBoxWithDroppableScroll,t=e.draggable,n=e.destination,a=e.insideDestination,o=e.last,i=e.viewport,l=e.afterCritical,c=n.axis,p=Br(n.axis,t.displaceBy),g=p.value,d=r[c.start],u=r[c.end],v=tt(t,a),f=Xe(v,function(b){var S=b.descriptor.id,D=b.page.borderBox.center[c.line],E=Ye(S,l),N=ja({displaced:o,id:S});return E?N?u<=D:d<D-g:N?u<=D+g:d<D}),w=_l({draggable:t,closest:f,inHomeList:fr(t,n)});return Qr({draggable:t,insideDestination:a,destination:n,viewport:i,last:o,displacedBy:p,index:w})},rs=4,ts=function(e){var r=e.draggable,t=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,o=e.insideDestination,i=e.afterCritical;if(!a.isCombineEnabled)return null;var l=a.axis,c=Br(a.axis,r.displaceBy),p=c.value,g=t[l.start],d=t[l.end],u=tt(r,o),v=Xe(u,function(w){var b=w.descriptor.id,S=w.page.borderBox,D=S[l.size],E=D/rs,N=Ye(b,i),B=ja({displaced:n.displaced,id:b});return N?B?d>S[l.start]+E&&d<S[l.end]-E:g>S[l.start]-p+E&&g<S[l.end]-p-E:B?d>S[l.start]+p+E&&d<S[l.end]+p-E:g>S[l.start]+E&&g<S[l.end]-E});if(!v)return null;var f={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:v.descriptor.id,droppableId:a.descriptor.id}}};return f},ka=function(e){var r=e.pageOffset,t=e.draggable,n=e.draggables,a=e.droppables,o=e.previousImpact,i=e.viewport,l=e.afterCritical,c=Aa(t.page.borderBox,r),p=Ql({pageBorderBox:c,draggable:t,droppables:a});if(!p)return ml;var g=a[p],d=gr(g.descriptor.id,n),u=Zl(g,c);return ts({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:o,destination:g,insideDestination:d,afterCritical:l})||es({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:g,insideDestination:d,last:o.displaced,viewport:i,afterCritical:l})},Gt=function(e,r){var t;return L({},e,(t={},t[r.descriptor.id]=r,t))},ns=function(r){var t=r.previousImpact,n=r.impact,a=r.droppables,o=we(t),i=we(n);if(!o||o===i)return a;var l=a[o];if(!l.subject.withPlaceholder)return a;var c=Hl(l);return Gt(a,c)},as=function(e){var r=e.draggable,t=e.draggables,n=e.droppables,a=e.previousImpact,o=e.impact,i=ns({previousImpact:a,impact:o,droppables:n}),l=we(o);if(!l)return i;var c=n[l];if(fr(r,c)||c.subject.withPlaceholder)return i;var p=Ea(c,r,t);return Gt(i,p)},Dr=function(e){var r=e.state,t=e.clientSelection,n=e.dimensions,a=e.viewport,o=e.impact,i=e.scrollJumpRequest,l=a||r.viewport,c=n||r.dimensions,p=t||r.current.client.selection,g=ye(p,r.initial.client.selection),d={offset:g,selection:p,borderBoxCenter:ue(r.initial.client.borderBoxCenter,g)},u={selection:ue(d.selection,l.scroll.current),borderBoxCenter:ue(d.borderBoxCenter,l.scroll.current),offset:ue(d.offset,l.scroll.diff.value)},v={client:d,page:u};if(r.phase==="COLLECTING")return L({phase:"COLLECTING"},r,{dimensions:c,viewport:l,current:v});var f=c.draggables[r.critical.draggable.id],w=o||ka({pageOffset:u.offset,draggable:f,draggables:c.draggables,droppables:c.droppables,previousImpact:r.impact,viewport:l,afterCritical:r.afterCritical}),b=as({draggable:f,impact:w,previousImpact:r.impact,draggables:c.draggables,droppables:c.droppables}),S=L({},r,{current:v,dimensions:{draggables:c.draggables,droppables:b},impact:w,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null});return S};function os(e,r){return e.map(function(t){return r[t]})}var Ra=function(e){var r=e.impact,t=e.viewport,n=e.draggables,a=e.destination,o=e.forceShouldAnimate,i=r.displaced,l=os(i.all,n),c=jr({afterDragging:l,destination:a,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:i});return L({},r,{displaced:c})},Ba=function(e){var r=e.impact,t=e.draggable,n=e.droppable,a=e.draggables,o=e.viewport,i=e.afterCritical,l=nt({impact:r,draggable:t,draggables:a,droppable:n,afterCritical:i});return Ft({pageBorderBoxCenter:l,draggable:t,viewport:o})},Oa=function(e){var r=e.state,t=e.dimensions,n=e.viewport;r.movementMode!=="SNAP"&&P();var a=r.impact,o=n||r.viewport,i=t||r.dimensions,l=i.draggables,c=i.droppables,p=l[r.critical.draggable.id],g=we(a);g||P();var d=c[g],u=Ra({impact:a,viewport:o,destination:d,draggables:l}),v=Ba({impact:u,draggable:p,droppable:d,draggables:l,viewport:o,afterCritical:r.afterCritical});return Dr({impact:u,clientSelection:v,state:r,dimensions:i,viewport:o})},is=function(e){return{index:e.index,droppableId:e.droppableId}},Ta=function(e){var r=e.draggable,t=e.home,n=e.draggables,a=e.viewport,o=Br(t.axis,r.displaceBy),i=gr(t.descriptor.id,n),l=i.indexOf(r);l===-1&&P();var c=i.slice(l+1),p=c.reduce(function(v,f){return v[f.descriptor.id]=!0,v},{}),g={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:p},d=jr({afterDragging:c,destination:t,displacedBy:o,last:null,viewport:a.frame,forceShouldAnimate:!1}),u={displaced:d,displacedBy:o,at:{type:"REORDER",destination:is(r.descriptor)}};return{impact:u,afterCritical:g}},ls=function(e,r){return{draggables:e.draggables,droppables:Gt(e.droppables,r)}},ss=function(e){var r=e.draggable,t=e.offset,n=e.initialWindowScroll,a=qr(r.client,t),o=Kr(a,n),i=L({},r,{placeholder:L({},r.placeholder,{client:a}),client:a,page:o});return i},cs=function(e){var r=e.frame;return r||P(),r},ds=function(e){var r=e.additions,t=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return r.map(function(o){var i=o.descriptor.droppableId,l=t[i],c=cs(l),p=c.scroll.diff.value,g=ue(a,p),d=ss({draggable:o,offset:g,initialWindowScroll:n.scroll.initial});return d})},us=function(e){var r=e.state,t=e.published,n=t.modified.map(function(E){var N=r.dimensions.droppables[E.droppableId],B=Rt(N,E.scroll);return B}),a=L({},r.dimensions.droppables,{},ha(n)),o=ba(ds({additions:t.additions,updatedDroppables:a,viewport:r.viewport})),i=L({},r.dimensions.draggables,{},o);t.removals.forEach(function(E){delete i[E]});var l={droppables:a,draggables:i},c=we(r.impact),p=c?l.droppables[c]:null,g=l.draggables[r.critical.draggable.id],d=l.droppables[r.critical.droppable.id],u=Ta({draggable:g,home:d,draggables:i,viewport:r.viewport}),v=u.impact,f=u.afterCritical,w=p&&p.isCombineEnabled?r.impact:v,b=ka({pageOffset:r.current.page.offset,draggable:l.draggables[r.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:w,viewport:r.viewport,afterCritical:f}),S=L({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:b,onLiftImpact:v,dimensions:l,afterCritical:f,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return S;var D=L({phase:"DROP_PENDING"},S,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return D},It=function(r){return r.movementMode==="SNAP"},pt=function(r,t,n){var a=ls(r.dimensions,t);return!It(r)||n?Dr({state:r,dimensions:a}):Oa({state:r,dimensions:a})};function gt(e){return e.isDragging&&e.movementMode==="SNAP"?L({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Fn={phase:"IDLE",completed:null,shouldFlush:!1},ps=function(e,r){if(e===void 0&&(e=Fn),r.type==="FLUSH")return L({},Fn,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&P();var t=r.payload,n=t.critical,a=t.clientSelection,o=t.viewport,i=t.dimensions,l=t.movementMode,c=i.draggables[n.draggable.id],p=i.droppables[n.droppable.id],g={selection:a,borderBoxCenter:c.client.borderBox.center,offset:se},d={client:g,page:{selection:ue(g.selection,o.scroll.initial),borderBoxCenter:ue(g.selection,o.scroll.initial),offset:ue(g.selection,o.scroll.diff.value)}},u=et(i.droppables).every(function(Le){return!Le.isFixedOnPage}),v=Ta({draggable:c,home:p,draggables:i.draggables,viewport:o}),f=v.impact,w=v.afterCritical,b={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:i,initial:d,current:d,isWindowScrollAllowed:u,impact:f,afterCritical:w,onLiftImpact:f,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null};return b}if(r.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&P();var S=L({phase:"COLLECTING"},e,{phase:"COLLECTING"});return S}if(r.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||P(),us({state:e,published:r.payload});if(r.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;er(e)||P();var D=r.payload.client;return Ke(D,e.current.client.selection)?e:Dr({state:e,clientSelection:D,impact:It(e)?e.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return gt(e);er(e)||P();var E=r.payload,N=E.id,B=E.newScroll,k=e.dimensions.droppables[N];if(!k)return e;var G=Rt(k,B);return pt(e,G,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;er(e)||P();var U=r.payload,z=U.id,q=U.isEnabled,$=e.dimensions.droppables[z];$||P(),$.isEnabled===q&&P();var te=L({},$,{isEnabled:q});return pt(e,te,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;er(e)||P();var j=r.payload,W=j.id,ae=j.isCombineEnabled,R=e.dimensions.droppables[W];R||P(),R.isCombineEnabled===ae&&P();var ve=L({},R,{isCombineEnabled:ae});return pt(e,ve,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;er(e)||P(),e.isWindowScrollAllowed||P();var me=r.payload.newScroll;if(Ke(e.viewport.scroll.current,me))return gt(e);var Q=Ia(e.viewport,me);return It(e)?Oa({state:e,viewport:Q}):Dr({state:e,viewport:Q})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!er(e))return e;var Y=r.payload.maxScroll;if(Ke(Y,e.viewport.scroll.max))return e;var ce=L({},e.viewport,{scroll:L({},e.viewport.scroll,{max:Y})});return L({phase:"DRAGGING"},e,{viewport:ce})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&P();var oe=Jl({state:e,type:r.type});return oe?Dr({state:e,impact:oe.impact,clientSelection:oe.clientSelection,scrollJumpRequest:oe.scrollJumpRequest}):e}if(r.type==="DROP_PENDING"){var Ae=r.payload.reason;e.phase!=="COLLECTING"&&P();var ee=L({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Ae});return ee}if(r.type==="DROP_ANIMATE"){var he=r.payload,Se=he.completed,Ie=he.dropDuration,Re=he.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||P();var We={phase:"DROP_ANIMATING",completed:Se,dropDuration:Ie,newHomeClientOffset:Re,dimensions:e.dimensions};return We}if(r.type==="DROP_COMPLETE"){var pe=r.payload.completed;return{phase:"IDLE",completed:pe,shouldFlush:!1}}return e},gs=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},fs=function(r){return{type:"LIFT",payload:r}},vs=function(r){return{type:"INITIAL_PUBLISH",payload:r}},ms=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},hs=function(){return{type:"COLLECTION_STARTING",payload:null}},bs=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},xs=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},ys=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},Ma=function(r){return{type:"MOVE",payload:r}},ws=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},Cs=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},Ss=function(){return{type:"MOVE_UP",payload:null}},Is=function(){return{type:"MOVE_DOWN",payload:null}},Ds=function(){return{type:"MOVE_RIGHT",payload:null}},Ns=function(){return{type:"MOVE_LEFT",payload:null}},zt=function(){return{type:"FLUSH",payload:null}},Es=function(r){return{type:"DROP_ANIMATE",payload:r}},Wt=function(r){return{type:"DROP_COMPLETE",payload:r}},La=function(r){return{type:"DROP",payload:r}},Ps=function(r){return{type:"DROP_PENDING",payload:r}},Fa=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},As=function(e){return function(r){var t=r.getState,n=r.dispatch;return function(a){return function(o){if(o.type!=="LIFT"){a(o);return}var i=o.payload,l=i.id,c=i.clientSelection,p=i.movementMode,g=t();g.phase==="DROP_ANIMATING"&&n(Wt({completed:g.completed})),t().phase!=="IDLE"&&P(),n(zt()),n(gs({draggableId:l,movementMode:p}));var d={shouldPublishImmediately:p==="SNAP"},u={draggableId:l,scrollOptions:d},v=e.startPublishing(u),f=v.critical,w=v.dimensions,b=v.viewport;n(vs({critical:f,dimensions:w,clientSelection:c,movementMode:p,viewport:b}))}}}},js=function(e){return function(){return function(r){return function(t){t.type==="INITIAL_PUBLISH"&&e.dragging(),t.type==="DROP_ANIMATE"&&e.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&e.resting(),r(t)}}}},$t={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},kr={opacity:{drop:0,combining:.7},scale:{drop:.75}},Ut={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},_e=Ut.outOfTheWay+"s "+$t.outOfTheWay,Nr={fluid:"opacity "+_e,snap:"transform "+_e+", opacity "+_e,drop:function(r){var t=r+"s "+$t.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+_e,placeholder:"height "+_e+", width "+_e+", margin "+_e},Gn=function(r){return Ke(r,se)?null:"translate("+r.x+"px, "+r.y+"px)"},Dt={moveTo:Gn,drop:function(r,t){var n=Gn(r);return n?t?n+" scale("+kr.scale.drop+")":n:null}},Nt=Ut.minDropTime,Ga=Ut.maxDropTime,ks=Ga-Nt,zn=1500,Rs=.6,Bs=function(e){var r=e.current,t=e.destination,n=e.reason,a=Pr(r,t);if(a<=0)return Nt;if(a>=zn)return Ga;var o=a/zn,i=Nt+ks*o,l=n==="CANCEL"?i*Rs:i;return Number(l.toFixed(2))},Os=function(e){var r=e.impact,t=e.draggable,n=e.dimensions,a=e.viewport,o=e.afterCritical,i=n.draggables,l=n.droppables,c=we(r),p=c?l[c]:null,g=l[t.descriptor.droppableId],d=Ba({impact:r,draggable:t,draggables:i,afterCritical:o,droppable:p||g,viewport:a}),u=ye(d,t.client.borderBox.center);return u},Ts=function(e){var r=e.draggables,t=e.reason,n=e.lastImpact,a=e.home,o=e.viewport,i=e.onLiftImpact;if(!n.at||t!=="DROP"){var l=Ra({draggables:r,impact:i,destination:a,viewport:o,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=L({},n,{displaced:Ar});return{impact:c,didDropInsideDroppable:!0}},Ms=function(e){var r=e.getState,t=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var o=r(),i=a.payload.reason;if(o.phase==="COLLECTING"){t(Ps({reason:i}));return}if(o.phase!=="IDLE"){var l=o.phase==="DROP_PENDING"&&o.isWaiting;l&&P(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||P();var c=o.critical,p=o.dimensions,g=p.draggables[o.critical.draggable.id],d=Ts({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),u=d.impact,v=d.didDropInsideDroppable,f=v?Ot(u):null,w=v?rt(u):null,b={index:c.draggable.index,droppableId:c.droppable.id},S={draggableId:g.descriptor.id,type:g.descriptor.type,source:b,reason:i,mode:o.movementMode,destination:f,combine:w},D=Os({impact:u,draggable:g,dimensions:p,viewport:o.viewport,afterCritical:o.afterCritical}),E={critical:o.critical,afterCritical:o.afterCritical,result:S,impact:u},N=!Ke(o.current.client.offset,D)||!!S.combine;if(!N){t(Wt({completed:E}));return}var B=Bs({current:o.current.client.offset,destination:D,reason:i}),k={newHomeClientOffset:D,dropDuration:B,completed:E};t(Es(k))}}}},za=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Ls(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function Fs(e){var r=e.onWindowScroll;function t(){r(za())}var n=Er(t),a=Ls(n),o=qe;function i(){return o!==qe}function l(){i()&&P(),o=Ee(window,[a])}function c(){i()||P(),n.cancel(),o(),o=qe}return{start:l,stop:c,isActive:i}}var Gs=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},zs=function(e){var r=Fs({onWindowScroll:function(n){e.dispatch(ws({newScroll:n}))}});return function(t){return function(n){!r.isActive()&&n.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&Gs(n)&&r.stop(),t(n)}}},Ws=function(e){var r=!1,t=!1,n=setTimeout(function(){t=!0}),a=function(i){r||t||(r=!0,e(i),clearTimeout(n))};return a.wasCalled=function(){return r},a},$s=function(){var e=[],r=function(o){var i=Bt(e,function(p){return p.timerId===o});i===-1&&P();var l=e.splice(i,1),c=l[0];c.callback()},t=function(o){var i=setTimeout(function(){return r(i)}),l={timerId:i,callback:o};e.push(l)},n=function(){if(e.length){var o=[].concat(e);e.length=0,o.forEach(function(i){clearTimeout(i.timerId),i.callback()})}};return{add:t,flush:n}},Us=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.droppableId===t.droppableId&&r.index===t.index},Hs=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.draggableId===t.draggableId&&r.droppableId===t.droppableId},Vs=function(r,t){if(r===t)return!0;var n=r.draggable.id===t.draggable.id&&r.draggable.droppableId===t.draggable.droppableId&&r.draggable.type===t.draggable.type&&r.draggable.index===t.draggable.index,a=r.droppable.id===t.droppable.id&&r.droppable.type===t.droppable.type;return n&&a},wr=function(r,t){t()},Gr=function(r,t){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:t}},ft=function(r,t,n,a){if(!r){n(a(t));return}var o=Ws(n),i={announce:o};r(t,i),o.wasCalled()||n(a(t))},qs=function(e,r){var t=$s(),n=null,a=function(u,v){n&&P(),wr("onBeforeCapture",function(){var f=e().onBeforeCapture;if(f){var w={draggableId:u,mode:v};f(w)}})},o=function(u,v){n&&P(),wr("onBeforeDragStart",function(){var f=e().onBeforeDragStart;f&&f(Gr(u,v))})},i=function(u,v){n&&P();var f=Gr(u,v);n={mode:v,lastCritical:u,lastLocation:f.source,lastCombine:null},t.add(function(){wr("onDragStart",function(){return ft(e().onDragStart,f,r,Hr.onDragStart)})})},l=function(u,v){var f=Ot(v),w=rt(v);n||P();var b=!Vs(u,n.lastCritical);b&&(n.lastCritical=u);var S=!Us(n.lastLocation,f);S&&(n.lastLocation=f);var D=!Hs(n.lastCombine,w);if(D&&(n.lastCombine=w),!(!b&&!S&&!D)){var E=L({},Gr(u,n.mode),{combine:w,destination:f});t.add(function(){wr("onDragUpdate",function(){return ft(e().onDragUpdate,E,r,Hr.onDragUpdate)})})}},c=function(){n||P(),t.flush()},p=function(u){n||P(),n=null,wr("onDragEnd",function(){return ft(e().onDragEnd,u,r,Hr.onDragEnd)})},g=function(){if(n){var u=L({},Gr(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(u)}};return{beforeCapture:a,beforeStart:o,start:i,update:l,flush:c,drop:p,abort:g}},Ks=function(e,r){var t=qs(e,r);return function(n){return function(a){return function(o){if(o.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){var i=o.payload.critical;t.beforeStart(i,o.payload.movementMode),a(o),t.start(i,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){var l=o.payload.completed.result;t.flush(),a(o),t.drop(l);return}if(a(o),o.type==="FLUSH"){t.abort();return}var c=n.getState();c.phase==="DRAGGING"&&t.update(c.critical,c.impact)}}}},Js=function(e){return function(r){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){r(t);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&P(),e.dispatch(Wt({completed:n.completed}))}}},Ys=function(e){var r=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)}return function(a){return function(o){if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),a(o),o.type==="DROP_ANIMATE"){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Fa())}};t=requestAnimationFrame(function(){t=null,r=Ee(window,[i])})}}}},Xs=function(e){return function(){return function(r){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&e.stopPublishing(),r(t)}}}},Qs=function(e){var r=!1;return function(){return function(t){return function(n){if(n.type==="INITIAL_PUBLISH"){r=!0,e.tryRecordFocus(n.payload.critical.draggable.id),t(n),e.tryRestoreFocusRecorded();return}if(t(n),!!r){if(n.type==="FLUSH"){r=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){r=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Zs=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},_s=function(e){return function(r){return function(t){return function(n){if(Zs(n)){e.stop(),t(n);return}if(n.type==="INITIAL_PUBLISH"){t(n);var a=r.getState();a.phase!=="DRAGGING"&&P(),e.start(a);return}t(n),e.scroll(r.getState())}}}},ec=function(e){return function(r){return function(t){if(r(t),t.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(La({reason:n.reason})))}}}},rc=po,tc=function(e){var r=e.dimensionMarshal,t=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,o=e.announce,i=e.autoScroller;return uo(ps,rc(go(js(n),Xs(r),As(r),Ms,Js,Ys,ec,_s(i),zs,Qs(t),Ks(a,o))))},vt=function(){return{additions:{},removals:{},modified:{}}};function nc(e){var r=e.registry,t=e.callbacks,n=vt(),a=null,o=function(){a||(t.collectionStarting(),a=requestAnimationFrame(function(){a=null;var g=n,d=g.additions,u=g.removals,v=g.modified,f=Object.keys(d).map(function(S){return r.draggable.getById(S).getDimension(se)}).sort(function(S,D){return S.descriptor.index-D.descriptor.index}),w=Object.keys(v).map(function(S){var D=r.droppable.getById(S),E=D.callbacks.getScrollWhileDragging();return{droppableId:S,scroll:E}}),b={additions:f,removals:Object.keys(u),modified:w};n=vt(),t.publish(b)}))},i=function(g){var d=g.descriptor.id;n.additions[d]=g,n.modified[g.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],o()},l=function(g){var d=g.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],o()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=vt())};return{add:i,remove:l,stop:c}}var Wa=function(e){var r=e.scrollHeight,t=e.scrollWidth,n=e.height,a=e.width,o=ye({x:t,y:r},{x:a,y:n}),i={x:Math.max(0,o.x),y:Math.max(0,o.y)};return i},$a=function(){var e=document.documentElement;return e||P(),e},Ua=function(){var e=$a(),r=Wa({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return r},ac=function(){var e=za(),r=Ua(),t=e.y,n=e.x,a=$a(),o=a.clientWidth,i=a.clientHeight,l=n+o,c=t+i,p=ke({top:t,left:n,right:l,bottom:c}),g={frame:p,scroll:{initial:e,current:e,max:r,diff:{value:se,displacement:se}}};return g},oc=function(e){var r=e.critical,t=e.scrollOptions,n=e.registry,a=ac(),o=a.scroll.current,i=r.droppable,l=n.droppable.getAllByType(i.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(o,t)}),c=n.draggable.getAllByType(r.draggable.type).map(function(d){return d.getDimension(o)}),p={draggables:ba(c),droppables:ha(l)},g={dimensions:p,critical:r,viewport:a};return g};function Wn(e,r,t){if(t.descriptor.id===r.id||t.descriptor.type!==r.type)return!1;var n=e.droppable.getById(t.descriptor.droppableId);return n.descriptor.mode==="virtual"}var ic=function(e,r){var t=null,n=nc({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:e}),a=function(v,f){e.droppable.exists(v)||P(),t&&r.updateDroppableIsEnabled({id:v,isEnabled:f})},o=function(v,f){t&&(e.droppable.exists(v)||P(),r.updateDroppableIsCombineEnabled({id:v,isCombineEnabled:f}))},i=function(v,f){t&&(e.droppable.exists(v)||P(),r.updateDroppableScroll({id:v,newScroll:f}))},l=function(v,f){t&&e.droppable.getById(v).callbacks.scroll(f)},c=function(){if(t){n.stop();var v=t.critical.droppable;e.droppable.getAllByType(v.type).forEach(function(f){return f.callbacks.dragStopped()}),t.unsubscribe(),t=null}},p=function(v){t||P();var f=t.critical.draggable;v.type==="ADDITION"&&Wn(e,f,v.value)&&n.add(v.value),v.type==="REMOVAL"&&Wn(e,f,v.value)&&n.remove(v.value)},g=function(v){t&&P();var f=e.draggable.getById(v.draggableId),w=e.droppable.getById(f.descriptor.droppableId),b={draggable:f.descriptor,droppable:w.descriptor},S=e.subscribe(p);return t={critical:b,unsubscribe:S},oc({critical:b,registry:e,scrollOptions:v.scrollOptions})},d={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:i,startPublishing:g,stopPublishing:c};return d},Ha=function(e,r){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===r?!1:e.completed.result.reason==="DROP"},lc=function(e){window.scrollBy(e.x,e.y)},sc=le(function(e){return et(e).filter(function(r){return!(!r.isEnabled||!r.frame)})}),cc=function(r,t){var n=Xe(sc(t),function(a){return a.frame||P(),Pa(a.frame.pageMarginBox)(r)});return n},dc=function(e){var r=e.center,t=e.destination,n=e.droppables;if(t){var a=n[t];return a.frame?a:null}var o=cc(r,n);return o},Je={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},uc=function(e,r){var t=e[r.size]*Je.startFromPercentage,n=e[r.size]*Je.maxScrollAtPercentage,a={startScrollingFrom:t,maxScrollValueAt:n};return a},Va=function(e){var r=e.startOfRange,t=e.endOfRange,n=e.current,a=t-r;if(a===0)return 0;var o=n-r,i=o/a;return i},Ht=1,pc=function(e,r){if(e>r.startScrollingFrom)return 0;if(e<=r.maxScrollValueAt)return Je.maxPixelScroll;if(e===r.startScrollingFrom)return Ht;var t=Va({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:e}),n=1-t,a=Je.maxPixelScroll*Je.ease(n);return Math.ceil(a)},$n=Je.durationDampening.accelerateAt,Un=Je.durationDampening.stopDampeningAt,gc=function(e,r){var t=r,n=Un,a=Date.now(),o=a-t;if(o>=Un)return e;if(o<$n)return Ht;var i=Va({startOfRange:$n,endOfRange:n,current:o}),l=e*Je.ease(i);return Math.ceil(l)},Hn=function(e){var r=e.distanceToEdge,t=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,o=pc(r,t);return o===0?0:a?Math.max(gc(o,n),Ht):o},Vn=function(e){var r=e.container,t=e.distanceToEdges,n=e.dragStartTime,a=e.axis,o=e.shouldUseTimeDampening,i=uc(r,a),l=t[a.end]<t[a.start];return l?Hn({distanceToEdge:t[a.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o}):-1*Hn({distanceToEdge:t[a.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o})},fc=function(e){var r=e.container,t=e.subject,n=e.proposedScroll,a=t.height>r.height,o=t.width>r.width;return!o&&!a?n:o&&a?null:{x:o?0:n.x,y:a?0:n.y}},vc=va(function(e){return e===0?0:e}),qa=function(e){var r=e.dragStartTime,t=e.container,n=e.subject,a=e.center,o=e.shouldUseTimeDampening,i={top:a.y-t.top,right:t.right-a.x,bottom:t.bottom-a.y,left:a.x-t.left},l=Vn({container:t,distanceToEdges:i,dragStartTime:r,axis:Tt,shouldUseTimeDampening:o}),c=Vn({container:t,distanceToEdges:i,dragStartTime:r,axis:wa,shouldUseTimeDampening:o}),p=vc({x:c,y:l});if(Ke(p,se))return null;var g=fc({container:t,subject:n,proposedScroll:p});return g?Ke(g,se)?null:g:null},mc=va(function(e){return e===0?0:e>0?1:-1}),Vt=function(){var e=function(t,n){return t<0?t:t>n?t-n:0};return function(r){var t=r.current,n=r.max,a=r.change,o=ue(t,a),i={x:e(o.x,n.x),y:e(o.y,n.y)};return Ke(i,se)?null:i}}(),Ka=function(r){var t=r.max,n=r.current,a=r.change,o={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=mc(a),l=Vt({max:o,current:n,change:i});return!l||i.x!==0&&l.x===0||i.y!==0&&l.y===0},qt=function(r,t){return Ka({current:r.scroll.current,max:r.scroll.max,change:t})},hc=function(r,t){if(!qt(r,t))return null;var n=r.scroll.max,a=r.scroll.current;return Vt({current:a,max:n,change:t})},Kt=function(r,t){var n=r.frame;return n?Ka({current:n.scroll.current,max:n.scroll.max,change:t}):!1},bc=function(r,t){var n=r.frame;return!n||!Kt(r,t)?null:Vt({current:n.scroll.current,max:n.scroll.max,change:t})},xc=function(e){var r=e.viewport,t=e.subject,n=e.center,a=e.dragStartTime,o=e.shouldUseTimeDampening,i=qa({dragStartTime:a,container:r.frame,subject:t,center:n,shouldUseTimeDampening:o});return i&&qt(r,i)?i:null},yc=function(e){var r=e.droppable,t=e.subject,n=e.center,a=e.dragStartTime,o=e.shouldUseTimeDampening,i=r.frame;if(!i)return null;var l=qa({dragStartTime:a,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o});return l&&Kt(r,l)?l:null},qn=function(e){var r=e.state,t=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,o=e.scrollDroppable,i=r.current.page.borderBoxCenter,l=r.dimensions.draggables[r.critical.draggable.id],c=l.page.marginBox;if(r.isWindowScrollAllowed){var p=r.viewport,g=xc({dragStartTime:t,viewport:p,subject:c,center:i,shouldUseTimeDampening:n});if(g){a(g);return}}var d=dc({center:i,destination:we(r.impact),droppables:r.dimensions.droppables});if(d){var u=yc({dragStartTime:t,droppable:d,subject:c,center:i,shouldUseTimeDampening:n});u&&o(d.descriptor.id,u)}},wc=function(e){var r=e.scrollWindow,t=e.scrollDroppable,n=Er(r),a=Er(t),o=null,i=function(g){o||P();var d=o,u=d.shouldUseTimeDampening,v=d.dragStartTime;qn({state:g,scrollWindow:n,scrollDroppable:a,dragStartTime:v,shouldUseTimeDampening:u})},l=function(g){o&&P();var d=Date.now(),u=!1,v=function(){u=!0};qn({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:v,scrollDroppable:v}),o={dragStartTime:d,shouldUseTimeDampening:u},u&&i(g)},c=function(){o&&(n.cancel(),a.cancel(),o=null)};return{start:l,stop:c,scroll:i}},Cc=function(e){var r=e.move,t=e.scrollDroppable,n=e.scrollWindow,a=function(p,g){var d=ue(p.current.client.selection,g);r({client:d})},o=function(p,g){if(!Kt(p,g))return g;var d=bc(p,g);if(!d)return t(p.descriptor.id,g),null;var u=ye(g,d);t(p.descriptor.id,u);var v=ye(g,u);return v},i=function(p,g,d){if(!p||!qt(g,d))return d;var u=hc(g,d);if(!u)return n(d),null;var v=ye(d,u);n(v);var f=ye(d,v);return f},l=function(p){var g=p.scrollJumpRequest;if(g){var d=we(p.impact);d||P();var u=o(p.dimensions.droppables[d],g);if(u){var v=p.viewport,f=i(p.isWindowScrollAllowed,v,u);f&&a(p,f)}}};return l},Sc=function(e){var r=e.scrollDroppable,t=e.scrollWindow,n=e.move,a=wc({scrollWindow:t,scrollDroppable:r}),o=Cc({move:n,scrollWindow:t,scrollDroppable:r}),i=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&o(p)}},l={scroll:i,start:a.start,stop:a.stop};return l},dr="data-rbd",ur=function(){var e=dr+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Et=function(){var e=dr+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Ic=function(){var e=dr+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Kn={contextId:dr+"-scroll-container-context-id"},Dc=function(r){return function(t){return"["+t+'="'+r+'"]'}},Cr=function(r,t){return r.map(function(n){var a=n.styles[t];return a?n.selector+" { "+a+" }":""}).join(" ")},Nc="pointer-events: none;",Ec=function(e){var r=Dc(e),t=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(ur.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Nc,dropAnimating:l}}}(),n=function(){var l=`
      transition: `+Nr.outOfTheWay+`;
    `;return{selector:r(Et.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),a={selector:r(Ic.contextId),styles:{always:"overflow-anchor: none;"}},o={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},i=[n,t,a,o];return{always:Cr(i,"always"),resting:Cr(i,"resting"),dragging:Cr(i,"dragging"),dropAnimating:Cr(i,"dropAnimating"),userCancel:Cr(i,"userCancel")}},Ce=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect,mt=function(){var r=document.querySelector("head");return r||P(),r},Jn=function(r){var t=document.createElement("style");return r&&t.setAttribute("nonce",r),t.type="text/css",t};function Pc(e,r){var t=V(function(){return Ec(e)},[e]),n=C.useRef(null),a=C.useRef(null),o=T(le(function(d){var u=a.current;u||P(),u.textContent=d}),[]),i=T(function(d){var u=n.current;u||P(),u.textContent=d},[]);Ce(function(){!n.current&&!a.current||P();var d=Jn(r),u=Jn(r);return n.current=d,a.current=u,d.setAttribute(dr+"-always",e),u.setAttribute(dr+"-dynamic",e),mt().appendChild(d),mt().appendChild(u),i(t.always),o(t.resting),function(){var v=function(w){var b=w.current;b||P(),mt().removeChild(b),w.current=null};v(n),v(a)}},[r,i,o,t.always,t.resting,e]);var l=T(function(){return o(t.dragging)},[o,t.dragging]),c=T(function(d){if(d==="DROP"){o(t.dropAnimating);return}o(t.userCancel)},[o,t.dropAnimating,t.userCancel]),p=T(function(){a.current&&o(t.resting)},[o,t.resting]),g=V(function(){return{dragging:l,dropping:c,resting:p}},[l,c,p]);return g}var Ja=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function at(e){return e instanceof Ja(e).HTMLElement}function Ac(e,r){var t="["+ur.contextId+'="'+e+'"]',n=ma(document.querySelectorAll(t));if(!n.length)return null;var a=Xe(n,function(o){return o.getAttribute(ur.draggableId)===r});return!a||!at(a)?null:a}function jc(e){var r=C.useRef({}),t=C.useRef(null),n=C.useRef(null),a=C.useRef(!1),o=T(function(u,v){var f={id:u,focus:v};return r.current[u]=f,function(){var b=r.current,S=b[u];S!==f&&delete b[u]}},[]),i=T(function(u){var v=Ac(e,u);v&&v!==document.activeElement&&v.focus()},[e]),l=T(function(u,v){t.current===u&&(t.current=v)},[]),c=T(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var u=t.current;u&&i(u)}))},[i]),p=T(function(u){t.current=null;var v=document.activeElement;v&&v.getAttribute(ur.draggableId)===u&&(t.current=u)},[]);Ce(function(){return a.current=!0,function(){a.current=!1;var u=n.current;u&&cancelAnimationFrame(u)}},[]);var g=V(function(){return{register:o,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[o,p,c,l]);return g}function kc(){var e={draggables:{},droppables:{}},r=[];function t(d){return r.push(d),function(){var v=r.indexOf(d);v!==-1&&r.splice(v,1)}}function n(d){r.length&&r.forEach(function(u){return u(d)})}function a(d){return e.draggables[d]||null}function o(d){var u=a(d);return u||P(),u}var i={register:function(u){e.draggables[u.descriptor.id]=u,n({type:"ADDITION",value:u})},update:function(u,v){var f=e.draggables[v.descriptor.id];f&&f.uniqueId===u.uniqueId&&(delete e.draggables[v.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:function(u){var v=u.descriptor.id,f=a(v);f&&u.uniqueId===f.uniqueId&&(delete e.draggables[v],n({type:"REMOVAL",value:u}))},getById:o,findById:a,exists:function(u){return!!a(u)},getAllByType:function(u){return Xr(e.draggables).filter(function(v){return v.descriptor.type===u})}};function l(d){return e.droppables[d]||null}function c(d){var u=l(d);return u||P(),u}var p={register:function(u){e.droppables[u.descriptor.id]=u},unregister:function(u){var v=l(u.descriptor.id);v&&u.uniqueId===v.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:l,exists:function(u){return!!l(u)},getAllByType:function(u){return Xr(e.droppables).filter(function(v){return v.descriptor.type===u})}};function g(){e.draggables={},e.droppables={},r.length=0}return{draggable:i,droppable:p,subscribe:t,clean:g}}function Rc(){var e=V(kc,[]);return C.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Jt=re.createContext(null),Zr=function(){var e=document.body;return e||P(),e},Bc={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Oc=function(r){return"rbd-announcement-"+r};function Tc(e){var r=V(function(){return Oc(e)},[e]),t=C.useRef(null);C.useEffect(function(){var o=document.createElement("div");return t.current=o,o.id=r,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),L(o.style,Bc),Zr().appendChild(o),function(){setTimeout(function(){var c=Zr();c.contains(o)&&c.removeChild(o),o===t.current&&(t.current=null)})}},[r]);var n=T(function(a){var o=t.current;if(o){o.textContent=a;return}},[]);return n}var Mc=0,Lc={separator:"::"};function Yt(e,r){return r===void 0&&(r=Lc),V(function(){return""+e+r.separator+Mc++},[r.separator,e])}function Fc(e){var r=e.contextId,t=e.uniqueId;return"rbd-hidden-text-"+r+"-"+t}function Gc(e){var r=e.contextId,t=e.text,n=Yt("hidden-text",{separator:"-"}),a=V(function(){return Fc({contextId:r,uniqueId:n})},[n,r]);return C.useEffect(function(){var i=document.createElement("div");return i.id=a,i.textContent=t,i.style.display="none",Zr().appendChild(i),function(){var c=Zr();c.contains(i)&&c.removeChild(i)}},[a,t]),a}var ot=re.createContext(null);function Ya(e){var r=C.useRef(e);return C.useEffect(function(){r.current=e}),r}function zc(){var e=null;function r(){return!!e}function t(i){return i===e}function n(i){e&&P();var l={abandon:i};return e=l,l}function a(){e||P(),e=null}function o(){e&&(e.abandon(),a())}return{isClaimed:r,isActive:t,claim:n,release:a,tryAbandon:o}}var Wc=9,$c=13,Xt=27,Xa=32,Uc=33,Hc=34,Vc=35,qc=36,Kc=37,Jc=38,Yc=39,Xc=40,zr,Qc=(zr={},zr[$c]=!0,zr[Wc]=!0,zr),Qa=function(e){Qc[e.keyCode]&&e.preventDefault()},it=function(){var e="visibilitychange";if(typeof document>"u")return e;var r=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],t=Xe(r,function(n){return"on"+n in document});return t||e}(),Za=0,Yn=5;function Zc(e,r){return Math.abs(r.x-e.x)>=Yn||Math.abs(r.y-e.y)>=Yn}var Xn={type:"IDLE"};function _c(e){var r=e.cancel,t=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(i){var l=i.button,c=i.clientX,p=i.clientY;if(l===Za){var g={x:c,y:p},d=n();if(d.type==="DRAGGING"){i.preventDefault(),d.actions.move(g);return}d.type!=="PENDING"&&P();var u=d.point;if(Zc(u,g)){i.preventDefault();var v=d.actions.fluidLift(g);a({type:"DRAGGING",actions:v})}}}},{eventName:"mouseup",fn:function(i){var l=n();if(l.type!=="DRAGGING"){r();return}i.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(i){n().type==="DRAGGING"&&i.preventDefault(),r()}},{eventName:"keydown",fn:function(i){var l=n();if(l.type==="PENDING"){r();return}if(i.keyCode===Xt){i.preventDefault(),r();return}Qa(i)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(i){var l=n();if(l.type==="IDLE"&&P(),l.actions.shouldRespectForcePress()){r();return}i.preventDefault()}},{eventName:it,fn:r}]}function ed(e){var r=C.useRef(Xn),t=C.useRef(qe),n=V(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===Za&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var u=e.findClosestDraggableId(d);if(u){var v=e.tryGetLock(u,i,{sourceEvent:d});if(v){d.preventDefault();var f={x:d.clientX,y:d.clientY};t.current(),p(v,f)}}}}}},[e]),a=V(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var u=e.findClosestDraggableId(d);if(u){var v=e.findOptionsForDraggable(u);v&&(v.shouldRespectForcePress||e.canGetLock(u)&&d.preventDefault())}}}}},[e]),o=T(function(){var d={passive:!1,capture:!0};t.current=Ee(window,[a,n],d)},[a,n]),i=T(function(){var g=r.current;g.type!=="IDLE"&&(r.current=Xn,t.current(),o())},[o]),l=T(function(){var g=r.current;i(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[i]),c=T(function(){var d={capture:!0,passive:!1},u=_c({cancel:l,completed:i,getPhase:function(){return r.current},setPhase:function(f){r.current=f}});t.current=Ee(window,u,d)},[l,i]),p=T(function(d,u){r.current.type!=="IDLE"&&P(),r.current={type:"PENDING",point:u,actions:d},c()},[c]);Ce(function(){return o(),function(){t.current()}},[o])}var lr;function rd(){}var td=(lr={},lr[Hc]=!0,lr[Uc]=!0,lr[qc]=!0,lr[Vc]=!0,lr);function nd(e,r){function t(){r(),e.cancel()}function n(){r(),e.drop()}return[{eventName:"keydown",fn:function(o){if(o.keyCode===Xt){o.preventDefault(),t();return}if(o.keyCode===Xa){o.preventDefault(),n();return}if(o.keyCode===Xc){o.preventDefault(),e.moveDown();return}if(o.keyCode===Jc){o.preventDefault(),e.moveUp();return}if(o.keyCode===Yc){o.preventDefault(),e.moveRight();return}if(o.keyCode===Kc){o.preventDefault(),e.moveLeft();return}if(td[o.keyCode]){o.preventDefault();return}Qa(o)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:it,fn:t}]}function ad(e){var r=C.useRef(rd),t=V(function(){return{eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==Xa)return;var i=e.findClosestDraggableId(o);if(!i)return;var l=e.tryGetLock(i,g,{sourceEvent:o});if(!l)return;o.preventDefault();var c=!0,p=l.snapLift();r.current();function g(){c||P(),c=!1,r.current(),n()}r.current=Ee(window,nd(p,g),{capture:!0,passive:!1})}}},[e]),n=T(function(){var o={passive:!1,capture:!0};r.current=Ee(window,[t],o)},[t]);Ce(function(){return n(),function(){r.current()}},[n])}var ht={type:"IDLE"},od=120,id=.15;function ld(e){var r=e.cancel,t=e.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(t().type!=="DRAGGING"){r();return}a.keyCode===Xt&&a.preventDefault(),r()}},{eventName:it,fn:r}]}function sd(e){var r=e.cancel,t=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(o){var i=n();if(i.type!=="DRAGGING"){r();return}i.hasMoved=!0;var l=o.touches[0],c=l.clientX,p=l.clientY,g={x:c,y:p};o.preventDefault(),i.actions.move(g)}},{eventName:"touchend",fn:function(o){var i=n();if(i.type!=="DRAGGING"){r();return}o.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(o){if(n().type!=="DRAGGING"){r();return}o.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(o){var i=n();i.type==="IDLE"&&P();var l=o.touches[0];if(l){var c=l.force>=id;if(c){var p=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){p&&r();return}if(p){if(i.hasMoved){o.preventDefault();return}r();return}o.preventDefault()}}}},{eventName:it,fn:r}]}function cd(e){var r=C.useRef(ht),t=C.useRef(qe),n=T(function(){return r.current},[]),a=T(function(v){r.current=v},[]),o=V(function(){return{eventName:"touchstart",fn:function(v){if(!v.defaultPrevented){var f=e.findClosestDraggableId(v);if(f){var w=e.tryGetLock(f,l,{sourceEvent:v});if(w){var b=v.touches[0],S=b.clientX,D=b.clientY,E={x:S,y:D};t.current(),d(w,E)}}}}}},[e]),i=T(function(){var v={capture:!0,passive:!1};t.current=Ee(window,[o],v)},[o]),l=T(function(){var u=r.current;u.type!=="IDLE"&&(u.type==="PENDING"&&clearTimeout(u.longPressTimerId),a(ht),t.current(),i())},[i,a]),c=T(function(){var u=r.current;l(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[l]),p=T(function(){var v={capture:!0,passive:!1},f={cancel:c,completed:l,getPhase:n},w=Ee(window,sd(f),v),b=Ee(window,ld(f),v);t.current=function(){w(),b()}},[c,n,l]),g=T(function(){var v=n();v.type!=="PENDING"&&P();var f=v.actions.fluidLift(v.point);a({type:"DRAGGING",actions:f,hasMoved:!1})},[n,a]),d=T(function(v,f){n().type!=="IDLE"&&P();var w=setTimeout(g,od);a({type:"PENDING",point:f,actions:v,longPressTimerId:w}),p()},[p,n,a,g]);Ce(function(){return i(),function(){t.current();var f=n();f.type==="PENDING"&&(clearTimeout(f.longPressTimerId),a(ht))}},[n,i,a]),Ce(function(){var v=Ee(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return v},[])}var dd={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function _a(e,r){if(r==null)return!1;var t=!!dd[r.tagName.toLowerCase()];if(t)return!0;var n=r.getAttribute("contenteditable");return n==="true"||n===""?!0:r===e?!1:_a(e,r.parentElement)}function ud(e,r){var t=r.target;return at(t)?_a(e,t):!1}var pd=function(e){return ke(e.getBoundingClientRect()).center};function gd(e){return e instanceof Ja(e).Element}var fd=function(){var e="matches";if(typeof document>"u")return e;var r=[e,"msMatchesSelector","webkitMatchesSelector"],t=Xe(r,function(n){return n in Element.prototype});return t||e}();function eo(e,r){return e==null?null:e[fd](r)?e:eo(e.parentElement,r)}function vd(e,r){return e.closest?e.closest(r):eo(e,r)}function md(e){return"["+ur.contextId+'="'+e+'"]'}function hd(e,r){var t=r.target;if(!gd(t))return null;var n=md(e),a=vd(t,n);return!a||!at(a)?null:a}function bd(e,r){var t=hd(e,r);return t?t.getAttribute(ur.draggableId):null}function xd(e,r){var t="["+Et.contextId+'="'+e+'"]',n=ma(document.querySelectorAll(t)),a=Xe(n,function(o){return o.getAttribute(Et.id)===r});return!a||!at(a)?null:a}function yd(e){e.preventDefault()}function Wr(e){var r=e.expected,t=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||r!==t)}function ro(e){var r=e.lockAPI,t=e.store,n=e.registry,a=e.draggableId;if(r.isClaimed())return!1;var o=n.draggable.findById(a);return!(!o||!o.options.isEnabled||!Ha(t.getState(),a))}function wd(e){var r=e.lockAPI,t=e.contextId,n=e.store,a=e.registry,o=e.draggableId,i=e.forceSensorStop,l=e.sourceEvent,c=ro({lockAPI:r,store:n,registry:a,draggableId:o});if(!c)return null;var p=a.draggable.getById(o),g=xd(t,p.descriptor.id);if(!g||l&&!p.options.canDragInteractiveElements&&ud(g,l))return null;var d=r.claim(i||qe),u="PRE_DRAG";function v(){return p.options.shouldRespectForcePress}function f(){return r.isActive(d)}function w(k,G){Wr({expected:k,phase:u,isLockActive:f,shouldWarn:!0})&&n.dispatch(G())}var b=w.bind(null,"DRAGGING");function S(k){function G(){r.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(G(),u!=="PRE_DRAG"&&P()),n.dispatch(fs(k.liftActionArgs)),u="DRAGGING";function U(z,q){if(q===void 0&&(q={shouldBlockNextClick:!1}),k.cleanup(),q.shouldBlockNextClick){var $=Ee(window,[{eventName:"click",fn:yd,options:{once:!0,passive:!1,capture:!0}}]);setTimeout($)}G(),n.dispatch(La({reason:z}))}return L({isActive:function(){return Wr({expected:"DRAGGING",phase:u,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:v,drop:function(q){return U("DROP",q)},cancel:function(q){return U("CANCEL",q)}},k.actions)}function D(k){var G=Er(function(z){b(function(){return Ma({client:z})})}),U=S({liftActionArgs:{id:o,clientSelection:k,movementMode:"FLUID"},cleanup:function(){return G.cancel()},actions:{move:G}});return L({},U,{move:G})}function E(){var k={moveUp:function(){return b(Ss)},moveRight:function(){return b(Ds)},moveDown:function(){return b(Is)},moveLeft:function(){return b(Ns)}};return S({liftActionArgs:{id:o,clientSelection:pd(g),movementMode:"SNAP"},cleanup:qe,actions:k})}function N(){var k=Wr({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!0});k&&r.release()}var B={isActive:function(){return Wr({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:v,fluidLift:D,snapLift:E,abort:N};return B}var Cd=[ed,ad,cd];function Sd(e){var r=e.contextId,t=e.store,n=e.registry,a=e.customSensors,o=e.enableDefaultSensors,i=[].concat(o?Cd:[],a||[]),l=C.useState(function(){return zc()})[0],c=T(function(D,E){D.isDragging&&!E.isDragging&&l.tryAbandon()},[l]);Ce(function(){var D=t.getState(),E=t.subscribe(function(){var N=t.getState();c(D,N),D=N});return E},[l,t,c]),Ce(function(){return l.tryAbandon},[l.tryAbandon]);for(var p=T(function(S){return ro({lockAPI:l,registry:n,store:t,draggableId:S})},[l,n,t]),g=T(function(S,D,E){return wd({lockAPI:l,registry:n,contextId:r,store:t,draggableId:S,forceSensorStop:D,sourceEvent:E&&E.sourceEvent?E.sourceEvent:null})},[r,l,n,t]),d=T(function(S){return bd(r,S)},[r]),u=T(function(S){var D=n.draggable.findById(S);return D?D.options:null},[n.draggable]),v=T(function(){l.isClaimed()&&(l.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(zt()))},[l,t]),f=T(l.isClaimed,[l]),w=V(function(){return{canGetLock:p,tryGetLock:g,findClosestDraggableId:d,findOptionsForDraggable:u,tryReleaseLock:v,isLockClaimed:f}},[p,g,d,u,v,f]),b=0;b<i.length;b++)i[b](w)}var Id=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function Sr(e){return e.current||P(),e.current}function Dd(e){var r=e.contextId,t=e.setCallbacks,n=e.sensors,a=e.nonce,o=e.dragHandleUsageInstructions,i=C.useRef(null),l=Ya(e),c=T(function(){return Id(l.current)},[l]),p=Tc(r),g=Gc({contextId:r,text:o}),d=Pc(r,a),u=T(function(z){Sr(i).dispatch(z)},[]),v=V(function(){return mn({publishWhileDragging:ms,updateDroppableScroll:bs,updateDroppableIsEnabled:xs,updateDroppableIsCombineEnabled:ys,collectionStarting:hs},u)},[u]),f=Rc(),w=V(function(){return ic(f,v)},[f,v]),b=V(function(){return Sc(L({scrollWindow:lc,scrollDroppable:w.scrollDroppable},mn({move:Ma},u)))},[w.scrollDroppable,u]),S=jc(r),D=V(function(){return tc({announce:p,autoScroller:b,dimensionMarshal:w,focusMarshal:S,getResponders:c,styleMarshal:d})},[p,b,w,S,c,d]);i.current=D;var E=T(function(){var z=Sr(i),q=z.getState();q.phase!=="IDLE"&&z.dispatch(zt())},[]),N=T(function(){var z=Sr(i).getState();return z.isDragging||z.phase==="DROP_ANIMATING"},[]),B=V(function(){return{isDragging:N,tryAbort:E}},[N,E]);t(B);var k=T(function(z){return Ha(Sr(i).getState(),z)},[]),G=T(function(){return er(Sr(i).getState())},[]),U=V(function(){return{marshal:w,focus:S,contextId:r,canLift:k,isMovementAllowed:G,dragHandleUsageInstructionsId:g,registry:f}},[r,w,g,S,k,G,f]);return Sd({contextId:r,store:D,registry:f,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),C.useEffect(function(){return E},[E]),re.createElement(ot.Provider,{value:U},re.createElement(vi,{context:Jt,store:D},e.children))}var Nd=0;function Ed(){return V(function(){return""+Nd++},[])}function Pd(e){var r=Ed(),t=e.dragHandleUsageInstructions||Hr.dragHandleUsageInstructions;return re.createElement(al,null,function(n){return re.createElement(Dd,{nonce:e.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var to=function(r){return function(t){return r===t}},Ad=to("scroll"),jd=to("auto"),Qn=function(r,t){return t(r.overflowX)||t(r.overflowY)},kd=function(r){var t=window.getComputedStyle(r),n={overflowX:t.overflowX,overflowY:t.overflowY};return Qn(n,Ad)||Qn(n,jd)},Rd=function(){return!1},Bd=function e(r){return r==null?null:r===document.body?Rd()?r:null:r===document.documentElement?null:kd(r)?r:e(r.parentElement)},Pt=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Od=function e(r){if(!r)return!1;var t=window.getComputedStyle(r);return t.position==="fixed"?!0:e(r.parentElement)},Td=function(e){var r=Bd(e),t=Od(e);return{closestScrollable:r,isFixedOnPage:t}},Md=function(e){var r=e.descriptor,t=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,o=e.direction,i=e.client,l=e.page,c=e.closest,p=function(){if(!c)return null;var v=c.scrollSize,f=c.client,w=Wa({scrollHeight:v.scrollHeight,scrollWidth:v.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:f,scrollSize:v,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:w,diff:{value:se,displacement:se}}}}(),g=o==="vertical"?Tt:wa,d=cr({page:l,withPlaceholder:null,axis:g,frame:p}),u={descriptor:r,isCombineEnabled:n,isFixedOnPage:a,axis:g,isEnabled:t,client:i,page:l,frame:p,subject:d};return u},Ld=function(r,t){var n=ua(r);if(!t||r!==t)return n;var a=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,i=a+t.scrollHeight,l=o+t.scrollWidth,c={top:a,right:l,bottom:i,left:o},p=jt(c,n.border),g=kt({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return g},Fd=function(e){var r=e.ref,t=e.descriptor,n=e.env,a=e.windowScroll,o=e.direction,i=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,p=n.closestScrollable,g=Ld(r,p),d=Kr(g,a),u=function(){if(!p)return null;var f=ua(p),w={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:f,page:Kr(f,a),scroll:Pt(p),scrollSize:w,shouldClipSubject:c}}(),v=Md({descriptor:t,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:o,client:g,page:d,closest:u});return v},Gd={passive:!1},zd={passive:!0},Zn=function(e){return e.shouldPublishImmediately?Gd:zd};function _r(e){var r=C.useContext(e);return r||P(),r}var $r=function(r){return r&&r.env.closestScrollable||null};function Wd(e){var r=C.useRef(null),t=_r(ot),n=Yt("droppable"),a=t.registry,o=t.marshal,i=Ya(e),l=V(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=C.useRef(l),p=V(function(){return le(function(N,B){r.current||P();var k={x:N,y:B};o.updateDroppableScroll(l.id,k)})},[l.id,o]),g=T(function(){var N=r.current;return!N||!N.env.closestScrollable?se:Pt(N.env.closestScrollable)},[]),d=T(function(){var N=g();p(N.x,N.y)},[g,p]),u=V(function(){return Er(d)},[d]),v=T(function(){var N=r.current,B=$r(N);N&&B||P();var k=N.scrollOptions;if(k.shouldPublishImmediately){d();return}u()},[u,d]),f=T(function(N,B){r.current&&P();var k=i.current,G=k.getDroppableRef();G||P();var U=Td(G),z={ref:G,descriptor:l,env:U,scrollOptions:B};r.current=z;var q=Fd({ref:G,descriptor:l,env:U,windowScroll:N,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),$=U.closestScrollable;return $&&($.setAttribute(Kn.contextId,t.contextId),$.addEventListener("scroll",v,Zn(z.scrollOptions))),q},[t.contextId,l,v,i]),w=T(function(){var N=r.current,B=$r(N);return N&&B||P(),Pt(B)},[]),b=T(function(){var N=r.current;N||P();var B=$r(N);r.current=null,B&&(u.cancel(),B.removeAttribute(Kn.contextId),B.removeEventListener("scroll",v,Zn(N.scrollOptions)))},[v,u]),S=T(function(N){var B=r.current;B||P();var k=$r(B);k||P(),k.scrollTop+=N.y,k.scrollLeft+=N.x},[]),D=V(function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:w,dragStopped:b,scroll:S}},[b,f,w,S]),E=V(function(){return{uniqueId:n,descriptor:l,callbacks:D}},[D,l,n]);Ce(function(){return c.current=E.descriptor,a.droppable.register(E),function(){r.current&&b(),a.droppable.unregister(E)}},[D,l,b,E,o,a.droppable]),Ce(function(){r.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),Ce(function(){r.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function bt(){}var _n={width:0,height:0,margin:dl},$d=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,a=r.animate;return t||a==="close"?_n:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Ud=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,a=r.animate,o=$d({isAnimatingOpenOnMount:t,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Nr.placeholder:null}};function Hd(e){var r=C.useRef(null),t=T(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),n=e.animate,a=e.onTransitionEnd,o=e.onClose,i=e.contextId,l=C.useState(e.animate==="open"),c=l[0],p=l[1];C.useEffect(function(){return c?n!=="open"?(t(),p(!1),bt):r.current?bt:(r.current=setTimeout(function(){r.current=null,p(!1)}),t):bt},[n,c,t]);var g=T(function(u){u.propertyName==="height"&&(a(),n==="close"&&o())},[n,o,a]),d=Ud({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return re.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":i,onTransitionEnd:g,ref:e.innerRef})}var Vd=re.memo(Hd),Qt=re.createContext(null),qd=function(e){ta(r,e);function r(){for(var n,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}r.getDerivedStateFromProps=function(a,o){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:o.isVisible?{isVisible:!0,data:o.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var t=r.prototype;return t.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},r}(re.PureComponent),ea={dragging:5e3,dropAnimating:4500},Kd=function(r,t){return t?Nr.drop(t.duration):r?Nr.snap:Nr.fluid},Jd=function(r,t){return r?t?kr.opacity.drop:kr.opacity.combining:null},Yd=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function Xd(e){var r=e.dimension,t=r.client,n=e.offset,a=e.combineWith,o=e.dropping,i=!!a,l=Yd(e),c=!!o,p=c?Dt.drop(n,i):Dt.moveTo(n),g={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:Kd(l,o),transform:p,opacity:Jd(i,c),zIndex:c?ea.dropAnimating:ea.dragging,pointerEvents:"none"};return g}function Qd(e){return{transform:Dt.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Zd(e){return e.type==="DRAGGING"?Xd(e):Qd(e)}function _d(e,r,t){t===void 0&&(t=se);var n=window.getComputedStyle(r),a=r.getBoundingClientRect(),o=da(a,n),i=Kr(o,t),l={client:o,tagName:r.tagName.toLowerCase(),display:n.display},c={x:o.marginBox.width,y:o.marginBox.height},p={descriptor:e,placeholder:l,displaceBy:c,client:o,page:i};return p}function eu(e){var r=Yt("draggable"),t=e.descriptor,n=e.registry,a=e.getDraggableRef,o=e.canDragInteractiveElements,i=e.shouldRespectForcePress,l=e.isEnabled,c=V(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}},[o,l,i]),p=T(function(v){var f=a();return f||P(),_d(t,f,v)},[t,a]),g=V(function(){return{uniqueId:r,descriptor:t,options:c,getDimension:p}},[t,p,c,r]),d=C.useRef(g),u=C.useRef(!0);Ce(function(){return n.draggable.register(d.current),function(){return n.draggable.unregister(d.current)}},[n.draggable]),Ce(function(){if(u.current){u.current=!1;return}var v=d.current;d.current=g,n.draggable.update(g,v)},[g,n.draggable])}function ru(e){e.preventDefault()}function tu(e){var r=C.useRef(null),t=T(function(z){r.current=z},[]),n=T(function(){return r.current},[]),a=_r(ot),o=a.contextId,i=a.dragHandleUsageInstructionsId,l=a.registry,c=_r(Qt),p=c.type,g=c.droppableId,d=V(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:g}},[e.draggableId,e.index,p,g]),u=e.children,v=e.draggableId,f=e.isEnabled,w=e.shouldRespectForcePress,b=e.canDragInteractiveElements,S=e.isClone,D=e.mapped,E=e.dropAnimationFinished;if(!S){var N=V(function(){return{descriptor:d,registry:l,getDraggableRef:n,canDragInteractiveElements:b,shouldRespectForcePress:w,isEnabled:f}},[d,l,n,b,w,f]);eu(N)}var B=V(function(){return f?{tabIndex:0,role:"button","aria-describedby":i,"data-rbd-drag-handle-draggable-id":v,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:ru}:null},[o,i,v,f]),k=T(function(z){D.type==="DRAGGING"&&D.dropping&&z.propertyName==="transform"&&E()},[E,D]),G=V(function(){var z=Zd(D),q=D.type==="DRAGGING"&&D.dropping?k:null,$={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":v,style:z,onTransitionEnd:q},dragHandleProps:B};return $},[o,B,v,D,k,t]),U=V(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return u(G,D.snapshot,U)}var no=function(e,r){return e===r},ao=function(e){var r=e.combine,t=e.destination;return t?t.droppableId:r?r.droppableId:null},nu=function(r){return r.combine?r.combine.draggableId:null},au=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function ou(){var e=le(function(a,o){return{x:a,y:o}}),r=le(function(a,o,i,l,c){return{isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:i,combineWith:l,combineTargetFor:null}}),t=le(function(a,o,i,l,c,p,g){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:o,offset:a,dimension:i,forceShouldAnimate:g,snapshot:r(o,l,c,p,null)}}}),n=function(o,i){if(o.isDragging){if(o.critical.draggable.id!==i.draggableId)return null;var l=o.current.client.offset,c=o.dimensions.draggables[i.draggableId],p=we(o.impact),g=au(o.impact),d=o.forceShouldAnimate;return t(e(l.x,l.y),o.movementMode,c,i.isClone,p,g,d)}if(o.phase==="DROP_ANIMATING"){var u=o.completed;if(u.result.draggableId!==i.draggableId)return null;var v=i.isClone,f=o.dimensions.draggables[i.draggableId],w=u.result,b=w.mode,S=ao(w),D=nu(w),E=o.dropDuration,N={duration:E,curve:$t.drop,moveTo:o.newHomeClientOffset,opacity:D?kr.opacity.drop:null,scale:D?kr.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:f,dropping:N,draggingOver:S,combineWith:D,mode:b,forceShouldAnimate:null,snapshot:r(b,v,S,D,N)}}}return null};return n}function oo(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var iu={mapped:{type:"SECONDARY",offset:se,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:oo(null)}};function lu(){var e=le(function(i,l){return{x:i,y:l}}),r=le(oo),t=le(function(i,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:r(l)}}}),n=function(l){return l?t(se,l,!0):null},a=function(l,c,p,g){var d=p.displaced.visible[l],u=!!(g.inVirtualList&&g.effected[l]),v=rt(p),f=v&&v.draggableId===l?c:null;if(!d){if(!u)return n(f);if(p.displaced.invisible[l])return null;var w=pr(g.displacedBy.point),b=e(w.x,w.y);return t(b,f,!0)}if(u)return n(f);var S=p.displacedBy.point,D=e(S.x,S.y);return t(D,f,d.shouldAnimate)},o=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:a(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var p=l.completed;return p.result.draggableId===c.draggableId?null:a(c.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return o}var su=function(){var r=ou(),t=lu(),n=function(o,i){return r(o,i)||t(o,i)||iu};return n},cu={dropAnimationFinished:Fa},du=sa(su,cu,null,{context:Jt,pure:!0,areStatePropsEqual:no})(tu);function io(e){var r=_r(Qt),t=r.isUsingCloneFor;return t===e.draggableId&&!e.isClone?null:re.createElement(du,e)}function uu(e){var r=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,t=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return re.createElement(io,L({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}function pu(e){var r=C.useContext(ot);r||P();var t=r.contextId,n=r.isMovementAllowed,a=C.useRef(null),o=C.useRef(null),i=e.children,l=e.droppableId,c=e.type,p=e.mode,g=e.direction,d=e.ignoreContainerClipping,u=e.isDropDisabled,v=e.isCombineEnabled,f=e.snapshot,w=e.useClone,b=e.updateViewportMaxScroll,S=e.getContainerForClone,D=T(function(){return a.current},[]),E=T(function($){a.current=$},[]);T(function(){return o.current},[]);var N=T(function($){o.current=$},[]),B=T(function(){n()&&b({maxScroll:Ua()})},[n,b]);Wd({droppableId:l,type:c,mode:p,direction:g,isDropDisabled:u,isCombineEnabled:v,ignoreContainerClipping:d,getDroppableRef:D});var k=re.createElement(qd,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function($){var te=$.onClose,j=$.data,W=$.animate;return re.createElement(Vd,{placeholder:j,onClose:te,innerRef:N,animate:W,contextId:t,onTransitionEnd:B})}),G=V(function(){return{innerRef:E,placeholder:k,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":t}}},[t,l,k,E]),U=w?w.dragging.draggableId:null,z=V(function(){return{droppableId:l,type:c,isUsingCloneFor:U}},[l,U,c]);function q(){if(!w)return null;var $=w.dragging,te=w.render,j=re.createElement(io,{draggableId:$.draggableId,index:$.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(W,ae){return te(W,ae,$)});return Co.createPortal(j,S())}return re.createElement(Qt.Provider,{value:z},i(G,f),q())}var xt=function(r,t){return r===t.droppable.type},ra=function(r,t){return t.draggables[r.draggable.id]},gu=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=L({},r,{shouldAnimatePlaceholder:!1}),n=le(function(i){return{draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}}}),a=le(function(i,l,c,p,g,d){var u=g.descriptor.id,v=g.descriptor.droppableId===i;if(v){var f=d?{render:d,dragging:n(g.descriptor)}:null,w={isDraggingOver:c,draggingOverWith:c?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:w,useClone:f}}if(!l)return t;if(!p)return r;var b={isDraggingOver:c,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}}),o=function(l,c){var p=c.droppableId,g=c.type,d=!c.isDropDisabled,u=c.renderClone;if(l.isDragging){var v=l.critical;if(!xt(g,v))return t;var f=ra(v,l.dimensions),w=we(l.impact)===p;return a(p,d,w,w,f,u)}if(l.phase==="DROP_ANIMATING"){var b=l.completed;if(!xt(g,b.critical))return t;var S=ra(b.critical,l.dimensions);return a(p,d,ao(b.result)===p,we(b.impact)===p,S,u)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var D=l.completed;if(!xt(g,D.critical))return t;var E=we(D.impact)===p,N=!!(D.impact.at&&D.impact.at.type==="COMBINE"),B=D.critical.droppable.id===p;return E?N?r:t:B?r:t}return t};return o},fu={updateViewportMaxScroll:Cs};function vu(){return document.body||P(),document.body}var mu={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:vu},lo=sa(gu,fu,null,{context:Jt,pure:!0,areStatePropsEqual:no})(pu);lo.defaultProps=mu;const hu=({elements:e,onReorder:r,onSelect:t,selectedElement:n})=>{const a=o=>{if(!o.destination)return;const i=Array.from(e),[l]=i.splice(o.source.index,1);i.splice(o.destination.index,0,l),r(i)};return s.jsx("div",{className:"bg-white ",children:s.jsx(Pd,{onDragEnd:a,children:s.jsx(lo,{droppableId:"layers",children:o=>s.jsxs("div",{...o.droppableProps,ref:o.innerRef,className:"space-y-2",children:[e.map((i,l)=>s.jsx(uu,{draggableId:i.id,index:l,children:c=>s.jsxs("div",{ref:c.innerRef,...c.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===i.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>t(i.id),children:[s.jsx("div",{...c.dragHandleProps,className:"mr-2",children:s.jsx($o,{size:16})}),i.type==="image"?s.jsx(Ur,{size:16,className:"mr-2"}):s.jsx(Ir,{size:16,className:"mr-2"}),s.jsx("span",{className:"text-sm truncate",children:i.type==="text"?i.content.substring(0,20):`Imagen ${l+1}`})]})},i.id)),o.placeholder]})})})})};function bu({currentLayoutId:e,onLayoutChange:r}){const[t,n]=C.useState("all"),a={all:{name:"Todos",layouts:ie},hero:{name:"Hero",layouts:ie.filter(o=>o.category==="hero")},editorial:{name:"Editorial",layouts:ie.filter(o=>o.category==="editorial")},storytelling:{name:"Historia",layouts:ie.filter(o=>o.category==="storytelling")},minimal:{name:"Minimal",layouts:ie.filter(o=>o.category==="minimal")},creative:{name:"Creativo",layouts:ie.filter(o=>o.category==="creative")},classic:{name:"Clásico",layouts:ie.filter(o=>o.category==="classic")}};return Object.keys(a).filter(o=>o==="all"||a[o].layouts.length>0),s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"grid grid-cols-2  gap-3 overflow-x-hidden custom-scroll",children:a[t].layouts.map(o=>s.jsxs("div",{className:`relative group cursor-pointer transition-all duration-200 
                                 hover:shadow-md hover:scale-102
                        `,onClick:()=>r(o.id),children:[s.jsxs("div",{className:"aspect-square relative bg-white rounded-lg p-2 border border-gray-200",children:[s.jsx("div",{className:`w-full h-full grid ${o.template}`,style:{gap:"2px",padding:"4px"},children:Array.from({length:o.cells}).map((i,l)=>{var c,p;return s.jsx("div",{className:`bg-gradient-to-br from-purple-100 to-purple-200 ${(p=(c=o.cellStyles)==null?void 0:c[l])!=null&&p.includes("rounded")?"rounded":"rounded-sm"}`,style:{minHeight:"8px"}},l)})}),e===o.id&&s.jsx("div",{className:"absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2 w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"mt-2 text-center",children:[s.jsx("h4",{className:"text-xs font-medium text-gray-900 truncate",children:o.name}),o.description&&s.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:o.description}),s.jsx("div",{className:"flex items-center justify-center mt-1 space-x-2",children:s.jsxs("span",{className:"text-xs text-gray-400",children:[o.cells," ",o.cells===1?"celda":"celdas"]})})]})]},o.id))}),a[t].layouts.length===0&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:s.jsx("p",{children:"No hay layouts disponibles en esta categoría."})})]})}const xu=({selectedMask:e,onSelect:r,availableMasks:t=[],selectedImage:n})=>{var l,c;const[a,o]=C.useState("Básicas"),i={};return wt.forEach(p=>{i[p.category]||(i[p.category]=[]),(t.includes(p.id)||p.id==="none")&&i[p.category].push(p)}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"grid grid-cols-2 gap-1 bg-gray-100 p-1 rounded-lg",children:Object.keys(i).slice(0,2).map(p=>i[p].length>0&&s.jsx("button",{onClick:()=>o(p),className:`py-1.5 px-2 text-xs rounded-md transition font-medium ${a===p?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-purple-600"}`,children:p},p))}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:(l=i[a])==null?void 0:l.slice(0,6).map(p=>s.jsxs("div",{onClick:()=>r(p.id),className:`cursor-pointer border rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all ${e===p.id?"ring-2 ring-purple-500 border-purple-300":"border-gray-200"}`,children:[s.jsx("div",{className:"aspect-square bg-white flex items-center justify-center p-1",children:n!=null&&n.content?s.jsx("img",{src:n.content,alt:p.name,className:`w-full h-full object-cover ${p.class}`}):s.jsx("div",{className:`w-full h-full bg-gray-200 ${p.class}`})}),s.jsx("p",{className:"text-center text-[10px] text-gray-700 p-1 truncate",children:p.name})]},p.id))}),((c=i[a])==null?void 0:c.length)>6&&s.jsxs("button",{className:"w-full py-2 text-xs text-purple-600 hover:text-purple-700 border border-purple-200 rounded-lg hover:bg-purple-50 transition",children:["Ver más máscaras (",i[a].length-6," más)"]})]})},yu=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],wu=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],Cu=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],Su=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],Iu=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],Du=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],Nu=({element:e,onUpdate:r,onClose:t})=>{var ce,oe,Ae,ee,he,Se,Ie,Re,We,pe,Le,Qe,$e,Be,Fe,Oe,Ge,tr,Te,Me,nr,ar,je,Ue,Or,ze,He,or,Tr,Mr,Lr,Ze,Fr,vr,mr,hr,br,xr,yr,m,x;const[n,a]=C.useState(!1),[o,i]=C.useState(!1),[l,c]=C.useState(!1),[p,g]=C.useState(!1),[d,u]=C.useState(!1),[v,f]=C.useState(!1),[w,b]=C.useState(!1),[S,D]=C.useState(!1),[E,N]=C.useState("basic"),[B,k]=C.useState(((ce=e==null?void 0:e.style)==null?void 0:ce.color)||"#000000"),[G,U]=C.useState(((oe=e==null?void 0:e.style)==null?void 0:oe.backgroundColor)||"transparent"),z=C.useRef(null),q=C.useRef(null),$=C.useRef(null),te=C.useRef(null),j=C.useRef(null),W=C.useRef(null),ae=C.useRef(null);C.useEffect(()=>{function h(y){z.current&&!z.current.contains(y.target)&&a(!1),q.current&&!q.current.contains(y.target)&&i(!1),$.current&&!$.current.contains(y.target)&&g(!1),te.current&&!te.current.contains(y.target)&&u(!1),j.current&&!j.current.contains(y.target)&&f(!1),W.current&&!W.current.contains(y.target)&&c(!1),ae.current&&!ae.current.contains(y.target)&&b(!1)}return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const R=(h,y)=>{r({style:{...e==null?void 0:e.style,[h]:y}})},ve=(h,y,I)=>{var A;r({style:{...e==null?void 0:e.style,[h]:((A=e==null?void 0:e.style)==null?void 0:A[h])===y?I:y}})},me=(h,y)=>{R(h,y)};if(!e)return null;const Q=({active:h,onClick:y,icon:I,title:A,className:O=""})=>s.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${h?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${O}`,onClick:y,title:A,children:I}),Y=({onClick:h,icon:y,text:I,isOpen:A,title:O})=>s.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${A?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:h,title:O,children:[y&&s.jsx("span",{className:"flex-shrink-0",children:y}),I&&s.jsx("span",{className:"text-sm truncate",children:I}),s.jsx(Ao,{className:"h-3.5 w-3.5 opacity-70"})]});return s.jsx("div",{className:"  bg-white  rounded-lg shadow-sm px-4  border-gray-200  z-50 transition-all duration-200",children:s.jsxs("div",{className:"w-full ",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[s.jsx(Ir,{className:"h-4 w-4"}),"Formato de texto"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>D(!S),title:S?"Modo compacto":"Modo expandido",children:S?s.jsx(ri,{className:"h-4 w-4"}):s.jsx(ei,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:t,title:"Cerrar",children:s.jsx(Eo,{className:"h-4 w-4"})})]})]}),S&&s.jsxs("div",{className:"flex border-b mb-2",children:[s.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${E==="basic"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("basic"),children:"Básico"}),s.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${E==="paragraph"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("paragraph"),children:"Párrafo"}),s.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${E==="advanced"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("advanced"),children:"Avanzado"})]}),(E==="basic"||!S)&&s.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[s.jsx("div",{className:"relative",ref:$,children:s.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((Ae=e.style)==null?void 0:Ae.fontFamily)||"Arial",onChange:h=>{R("fontFamily",h.target.value)},children:yu.map(h=>s.jsx("option",{value:h.value,style:{fontFamily:h.value},children:h.name},h.value))})}),s.jsxs("div",{className:"relative",ref:te,children:[s.jsx(Y,{onClick:()=>u(!d),text:((ee=e.style)==null?void 0:ee.fontSize)||"16px",isOpen:d,title:"Tamaño de fuente"}),d&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:wu.map(h=>s.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{R("fontSize",h),u(!1)},children:h},h))})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(Q,{active:((he=e.style)==null?void 0:he.fontWeight)==="bold",onClick:()=>ve("fontWeight","bold","normal"),icon:s.jsx(Go,{className:"h-4 w-4"}),title:"Negrita"}),s.jsx(Q,{active:((Se=e.style)==null?void 0:Se.fontStyle)==="italic",onClick:()=>ve("fontStyle","italic","normal"),icon:s.jsx(Xo,{className:"h-4 w-4"}),title:"Cursiva"}),s.jsx(Q,{active:((Ie=e.style)==null?void 0:Ie.textDecoration)==="underline",onClick:()=>ve("textDecoration","underline","none"),icon:s.jsx(di,{className:"h-4 w-4"}),title:"Subrayado"}),s.jsx(Q,{active:((Re=e.style)==null?void 0:Re.textDecoration)==="line-through",onClick:()=>ve("textDecoration","line-through","none"),icon:s.jsx(li,{className:"h-4 w-4"}),title:"Tachado"})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(Q,{active:((We=e.style)==null?void 0:We.textAlign)==="left",onClick:()=>R("textAlign","left"),icon:s.jsx(Lo,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),s.jsx(Q,{active:((pe=e.style)==null?void 0:pe.textAlign)==="center",onClick:()=>R("textAlign","center"),icon:s.jsx(To,{className:"h-4 w-4"}),title:"Centrar"}),s.jsx(Q,{active:((Le=e.style)==null?void 0:Le.textAlign)==="right",onClick:()=>R("textAlign","right"),icon:s.jsx(Fo,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),s.jsx(Q,{active:((Qe=e.style)==null?void 0:Qe.textAlign)==="justify",onClick:()=>R("textAlign","justify"),icon:s.jsx(Mo,{className:"h-4 w-4"}),title:"Justificar"})]}),s.jsxs("div",{className:"relative",ref:z,children:[s.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[s.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:B}}),s.jsx(Po,{className:"h-4 w-4"})]}),n&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),s.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:B}})]}),s.jsx("input",{type:"color",value:B,onChange:h=>{k(h.target.value),R("color",h.target.value)},className:"w-full h-8 cursor-pointer"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),s.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:Su.map(h=>s.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${B===h.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:h.color},onClick:()=>{k(h.color),R("color",h.color)},title:h.name},h.color))})]})]})})]}),s.jsxs("div",{className:"relative",ref:q,children:[s.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>i(!o),title:"Color de fondo",children:[s.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:G,backgroundImage:G==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),s.jsx(ti,{className:"h-4 w-4"})]}),o&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),s.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:G,backgroundImage:G==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),s.jsx("input",{type:"color",value:G==="transparent"?"#ffffff":G,onChange:h=>{U(h.target.value),R("backgroundColor",h.target.value)},className:"w-full h-8 cursor-pointer"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),s.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Iu.map(h=>s.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${G===h.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:h.color,backgroundImage:h.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{U(h.color),R("backgroundColor",h.color)},title:h.name},h.color))})]})]})})]}),s.jsxs("div",{className:"relative",ref:j,children:[s.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>f(!v),title:"Transformación de texto",children:s.jsx(zo,{className:"h-4 w-4"})}),v&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:Cu.map(h=>{var y;return s.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((y=e.style)==null?void 0:y.textTransform)===h.value?"bg-gray-100":""}`,style:{textTransform:h.value},onClick:()=>{R("textTransform",h.value),f(!1)},children:h.label},h.value)})})]}),s.jsxs("div",{className:"relative",ref:ae,children:[s.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>b(!w),title:"Encabezados",children:s.jsx(Ir,{className:"h-4 w-4"})}),w&&s.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","32px"),R("fontWeight","bold"),b(!1)},children:[s.jsx(Uo,{className:"h-4 w-4"})," ","Encabezado 1"]}),s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","24px"),R("fontWeight","bold"),b(!1)},children:[s.jsx(Ho,{className:"h-4 w-4"})," ","Encabezado 2"]}),s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","20px"),R("fontWeight","bold"),b(!1)},children:[s.jsx(Vo,{className:"h-4 w-4"})," ","Encabezado 3"]}),s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","16px"),R("fontWeight","bold"),b(!1)},children:[s.jsx(qo,{className:"h-4 w-4"})," ","Encabezado 4"]}),s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","16px"),R("fontWeight","normal"),b(!1)},children:[s.jsx(Ir,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(Q,{active:(($e=e.style)==null?void 0:$e.verticalAlign)==="super",onClick:()=>ve("verticalAlign","super","baseline"),icon:s.jsx(ci,{className:"h-4 w-4"}),title:"Superíndice"}),s.jsx(Q,{active:((Be=e.style)==null?void 0:Be.verticalAlign)==="sub",onClick:()=>ve("verticalAlign","sub","baseline"),icon:s.jsx(si,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),S&&E==="paragraph"&&s.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(Q,{active:((Fe=e.style)==null?void 0:Fe.listStyleType)==="disc",onClick:()=>{var h;return R("listStyleType",((h=e.style)==null?void 0:h.listStyleType)==="disc"?"none":"disc")},icon:s.jsx(Zo,{className:"h-4 w-4"}),title:"Lista con viñetas"}),s.jsx(Q,{active:((Oe=e.style)==null?void 0:Oe.listStyleType)==="decimal",onClick:()=>{var h;return R("listStyleType",((h=e.style)==null?void 0:h.listStyleType)==="decimal"?"none":"decimal")},icon:s.jsx(Qo,{className:"h-4 w-4"}),title:"Lista numerada"})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(Q,{onClick:()=>{var y;const h=Number.parseInt(((y=e.style)==null?void 0:y.textIndent)||"0");R("textIndent",`${h+20}px`)},icon:s.jsx(Yo,{className:"h-4 w-4"}),title:"Aumentar sangría"}),s.jsx(Q,{onClick:()=>{var y;const h=Number.parseInt(((y=e.style)==null?void 0:y.textIndent)||"0");h>=20&&R("textIndent",`${h-20}px`)},icon:s.jsx(Jo,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yn,{className:"h-3 w-3 text-gray-500"}),s.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((Ge=e.style)==null?void 0:Ge.lineHeight)||"1.5"),onChange:h=>me("lineHeight",h.target.value),className:"w-24"}),s.jsx(wn,{className:"h-3 w-3 text-gray-500"})]}),s.jsx("span",{className:"text-xs",children:((tr=e.style)==null?void 0:tr.lineHeight)||"1.5"})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yn,{className:"h-3 w-3 text-gray-500"}),s.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((Te=e.style)==null?void 0:Te.letterSpacing)||"0"),onChange:h=>me("letterSpacing",`${h.target.value}px`),className:"w-24"}),s.jsx(wn,{className:"h-3 w-3 text-gray-500"})]}),s.jsx("span",{className:"text-xs",children:((Me=e.style)==null?void 0:Me.letterSpacing)||"0px"})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(Q,{active:((nr=e.style)==null?void 0:nr.fontStyle)==="italic"&&((ar=e.style)==null?void 0:ar.paddingLeft)==="20px"&&((je=e.style)==null?void 0:je.borderLeft)==="4px solid #ccc",onClick:()=>{var h,y,I;((h=e.style)==null?void 0:h.fontStyle)==="italic"&&((y=e.style)==null?void 0:y.paddingLeft)==="20px"&&((I=e.style)==null?void 0:I.borderLeft)==="4px solid #ccc"?(R("fontStyle","normal"),R("paddingLeft","0"),R("borderLeft","none")):(R("fontStyle","italic"),R("paddingLeft","20px"),R("borderLeft","4px solid #ccc"))},icon:s.jsx(ai,{className:"h-4 w-4"}),title:"Formato de cita"}),s.jsx(Q,{active:((Ue=e.style)==null?void 0:Ue.fontFamily)==="'Courier New', monospace"&&((Or=e.style)==null?void 0:Or.backgroundColor)==="#f5f5f5"&&((ze=e.style)==null?void 0:ze.padding)==="2px 4px",onClick:()=>{var h,y;((h=e.style)==null?void 0:h.fontFamily)==="'Courier New', monospace"&&((y=e.style)==null?void 0:y.backgroundColor)==="#f5f5f5"?(R("fontFamily","Arial, sans-serif"),R("backgroundColor","transparent"),R("padding","0")):(R("fontFamily","'Courier New', monospace"),R("backgroundColor","#f5f5f5"),R("padding","2px 4px"))},icon:s.jsx(Wo,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),S&&E==="advanced"&&s.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[s.jsxs("div",{className:"relative",ref:W,children:[s.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>c(!l),title:"Opciones de borde",children:[s.jsx(ii,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Bordes"})]}),l&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),s.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((He=e.style)==null?void 0:He.borderStyle)||"none",onChange:h=>R("borderStyle",h.target.value),children:Du.map(h=>s.jsx("option",{value:h.value,children:h.label},h.value))})]}),((or=e.style)==null?void 0:or.borderStyle)&&((Tr=e.style)==null?void 0:Tr.borderStyle)!=="none"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((Mr=e.style)==null?void 0:Mr.borderWidth)||"1"),onChange:h=>R("borderWidth",`${h.target.value}px`),className:"flex-1"}),s.jsx("span",{className:"text-xs",children:((Lr=e.style)==null?void 0:Lr.borderWidth)||"1px"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:((Ze=e.style)==null?void 0:Ze.borderColor)||"#000000",onChange:h=>R("borderColor",h.target.value),className:"w-8 h-8"}),s.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(h=>s.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:h},onClick:()=>R("borderColor",h)},h))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((Fr=e.style)==null?void 0:Fr.borderRadius)||"0"),onChange:h=>R("borderRadius",`${h.target.value}px`),className:"flex-1"}),s.jsx("span",{className:"text-xs",children:((vr=e.style)==null?void 0:vr.borderRadius)||"0px"})]})]})]})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),s.jsx("button",{className:`px-2 py-1 text-xs rounded ${(mr=e.style)!=null&&mr.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var h;(h=e.style)!=null&&h.textShadow?R("textShadow",""):R("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(hr=e.style)!=null&&hr.textShadow?"Quitar":"Añadir"}),((br=e.style)==null?void 0:br.textShadow)&&s.jsxs("select",{className:"text-xs p-1 border rounded",value:(xr=e.style)==null?void 0:xr.textShadow,onChange:h=>R("textShadow",h.target.value),children:[s.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),s.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),s.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),s.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),s.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((yr=e.style)==null?void 0:yr.opacity)||"1"),onChange:h=>me("opacity",h.target.value),className:"w-24"})}),s.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat(((m=e.style)==null?void 0:m.opacity)||"1")*100),"%"]})]}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((x=e.style)==null?void 0:x.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var h;((h=e.style)==null?void 0:h.backgroundColor)==="#ffff00"?R("backgroundColor","transparent"):R("backgroundColor","#ffff00")},title:"Resaltar texto",children:[s.jsx(Ko,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[s.jsx(Q,{onClick:()=>{alert("Función deshacer (implementar)")},icon:s.jsx(fo,{className:"h-4 w-4"}),title:"Deshacer"}),s.jsx(Q,{onClick:()=>{alert("Función rehacer (implementar)")},icon:s.jsx(oi,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},Eu=({currentSize:e,onSizeChange:r,presetData:t,workspaceDimensions:n})=>((()=>{if(t!=null&&t.canvas_config){const o=typeof t.canvas_config=="string"?JSON.parse(t.canvas_config):t.canvas_config;let i=o.width,l=o.height;return{width:i,height:l,unit:"cm"}}return null})(),s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:n&&s.jsx("div",{className:"text-sm customtext-neutral-dark font-medium ml-2",children:n.originalWidth&&s.jsxs("div",{children:["Dimensiones: ",n.originalWidth," cm x",n.originalHeight," cm"]})})})),Pu=async(e,r,t)=>{var n;try{console.log("📤 [SAVE] Subiendo imagen al backend:",r);const[a,o]=e.split(","),i=((n=a.match(/data:image\/(\w+)/))==null?void 0:n[1])||"png",l=new FormData,c=atob(o),p=new Array(c.length);for(let w=0;w<c.length;w++)p[w]=c.charCodeAt(w);const g=new Uint8Array(p),d=new Blob([g],{type:`image/${i}`});l.append("image",d,`element_${r}.${i}`),l.append("project_id",t),l.append("element_id",r);const u=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",v=await fetch(`${u}/api/canvas/projects/upload-image`,{method:"POST",headers:{Accept:"application/json"},credentials:"include",body:l});if(!v.ok)throw new Error("Error al subir imagen al servidor");const f=await v.json();return console.log("✅ [SAVE] Imagen subida exitosamente:",f.url),f.url}catch(a){throw console.error("❌ [SAVE] Error subiendo imagen:",a),a}},Au=async(e,r)=>{var o,i;console.log("🔄 [SAVE] Procesando imágenes para guardado...");const t=[];let n=0,a=0;for(const l of e)for(const c of l.cells||[])for(const p of c.elements||[])p.type==="image"&&((o=p.content)!=null&&o.startsWith("data:image/"))&&n++;console.log(`📊 [SAVE] Total de imágenes base64 a procesar: ${n}`);for(const l of e){const c={...l};c.cells=[];for(const p of l.cells||[]){const g={...p};g.elements=[];for(const d of p.elements||[]){const u={...d};if(d.type==="image"&&((i=d.content)!=null&&i.startsWith("data:image/")))try{const v=await Pu(d.content,d.id,r);u.content=v,u.isUploaded=!0,a++,console.log(`✅ [SAVE] Imagen ${a}/${n} procesada`)}catch(v){console.error("❌ [SAVE] Error procesando imagen:",d.id,v),u.uploadError=v.message}g.elements.push(u)}c.cells.push(g)}t.push(c)}return console.log(`✅ [SAVE] Procesamiento completado: ${a}/${n} imágenes subidas`),t},ju=async(e,r,t,n,a,o,i=!1)=>{try{if(!(r!=null&&r.id))throw new Error("No se encontró el ID del proyecto");console.log(`💾 [SAVE] Iniciando ${i?"auto-guardado":"guardado manual"}...`);let l=e;i||(l=await Au(e,r.id));const c={pages:l,projectInfo:{id:r.id,item_id:t==null?void 0:t.id,title:t==null?void 0:t.title,preset_id:n==null?void 0:n.id},workspace:{width:a.width,height:a.height,scale:a.scale},meta:{savedAt:new Date().toISOString(),version:"2.0",isAutoSave:i,totalPages:e.length}},p=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",g=i?"save-progress":"save",d=await fetch(`${p}/api/canvas/projects/${r.id}/${g}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({design_data:c,thumbnails:o})});if(!d.ok){const v=await d.json().catch(()=>({}));throw new Error(v.message||"Error al guardar el proyecto")}const u=await d.json();return console.log(`✅ [SAVE] ${i?"Auto-guardado":"Guardado"} exitoso:`,u),{success:!0,data:u}}catch(l){return console.error(`❌ [SAVE] Error en ${i?"auto-guardado":"guardado"}:`,l),{success:!1,error:l.message}}},ku=(e,r,t,n,a,o)=>{const[i,l]=C.useState(!1),[c,p]=C.useState(null),[g,d]=C.useState(null),u=async(f=!1)=>{if(i)return console.log("⏳ [SAVE] Ya hay un guardado en progreso..."),!1;try{l(!0),d(null);const w=await ju(e,r,t,n,a,o,f);return w.success?(p(new Date),f||sr.success("✅ Proyecto guardado exitosamente")):(d(w.error),f||sr.error(`❌ Error al guardar: ${w.error}`)),w.success}catch(w){return console.error("❌ [SAVE] Error inesperado:",w),d(w.message),f||sr.error(`❌ Error inesperado: ${w.message}`),!1}finally{l(!1)}},v=()=>{u(!1)};return C.useEffect(()=>{if(!(r!=null&&r.id)||e.length===0)return;const f=setInterval(()=>{u(!0)},3e4);return()=>clearInterval(f)},[e,r==null?void 0:r.id,a]),{isSaving:i,lastSaved:c,saveError:g,saveProject:u,handleManualSave:v}},Ru=({isSaving:e,lastSaved:r,saveError:t,onManualSave:n})=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center gap-2 text-white/80 text-xs",children:e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin h-3 w-3 border border-white/50 border-t-white rounded-full"}),s.jsx("span",{children:"Guardando..."})]}):r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-2 w-2 bg-green-400 rounded-full"}),s.jsxs("span",{children:["Guardado ",new Date(r).toLocaleTimeString()]})]}):t?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-2 w-2 bg-red-400 rounded-full"}),s.jsx("span",{children:"Error al guardar"})]}):null}),s.jsxs("button",{onClick:n,disabled:e,className:"bg-white/10 hover:bg-white/20 text-white px-3 py-1.5 rounded-md text-sm font-medium flex items-center gap-1.5 transition-colors disabled:opacity-50",title:"Guardar proyecto manualmente",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})}),"Guardar"]})]}),yt=re.memo(({pageId:e,thumbnail:r,altText:t,type:n})=>{if(r)return s.jsx("img",{src:r,alt:t,className:"w-full h-full object-contain",loading:"lazy",style:{transition:"opacity 0.2s ease-in-out",imageRendering:"optimizeQuality"}});const a=n==="cover"||n==="final"?Ct:()=>s.jsx("div",{className:"grid grid-cols-2 gap-0.5 w-8 h-8",children:Array.from({length:4}).map((o,i)=>s.jsx("div",{className:"bg-gray-300 rounded-sm"},i))});return s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("div",{className:`${n==="cover"?"text-purple-300":n==="final"?"text-green-300":"text-gray-300"}`,children:s.jsx(a,{})})})});function yp(){var vr,mr,hr,br,xr,yr;const[e,r]=C.useState(null),[t,n]=C.useState(null),[a,o]=C.useState(null),[i,l]=C.useState(null),[c,p]=C.useState(!0),[g,d]=C.useState(null);C.useEffect(()=>{(async()=>{var x;try{const y=new URLSearchParams(window.location.search).get("project");if(!y){d("No se encontró el ID del proyecto en la URL"),p(!1);return}console.log("� Cargando proyecto con ID:",y);const I=await fetch(`/api/canvas/projects/${y}`,{headers:{"X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.content)||""}});if(!I.ok)throw new Error("Error al cargar el proyecto");const A=await I.json();console.log("✅ Datos del proyecto cargados:",A),r(A.project),n(A.item),o(A.canvasPreset),l(A.initialProject),p(!1)}catch(h){console.error("❌ Error cargando proyecto:",h),d(h.message),p(!1)}})()},[]),C.useEffect(()=>{e&&t&&a&&(console.log("🔍 Editor datos cargados exitosamente:"),console.log("📦 project:",e),console.log("🎯 item:",t),console.log("🎨 canvasPreset:",a),console.log("📄 initialProject:",i))},[e,t,a,i]),C.useEffect(()=>{if(i&&t&&a){if(console.log("🔄 Actualizando estados del editor con datos del proyecto"),i.pages&&Array.isArray(i.pages)){console.log("🔧 Recreando páginas con backgrounds actualizados...");const m=i.pages.map(x=>{let h=null,y=a.background_color||"#ffffff";return x.type==="cover"?t.cover_image?(h=`/storage/images/item/${t.cover_image}`,console.log("🖼️ [UPDATE] Cover page - usando cover_image:",h)):console.log("🎨 [UPDATE] Cover page - usando background_color:",y):x.type==="content"?t.content_image?(h=`/storage/images/item/${t.content_image}`,console.log("🖼️ [UPDATE] Content page - usando content_image:",h)):console.log("🎨 [UPDATE] Content page - usando background_color:",y):(x.type==="final"||x.type==="contraportada")&&(t.back_cover_image?(h=`/storage/images/item/${t.back_cover_image}`,console.log("🖼️ [UPDATE] Final page - usando back_cover_image:",h)):console.log("🎨 [UPDATE] Final page - usando background_color:",y)),{...x,backgroundImage:h,backgroundColor:y}});console.log("✅ Páginas actualizadas con backgrounds:",m),w(m),j([JSON.stringify(m)]),ae(0)}else{console.log("🆕 No hay páginas existentes, creando nuevas...");const m=Ge(a,t);w(m),j([JSON.stringify(m)]),ae(0)}typeof i.currentPage=="number"&&S(i.currentPage),i.workspaceSize&&E(i.workspaceSize)}},[i,t,a]);const[u,v]=C.useState(xn.Local.get(`${lt.APP_CORRELATIVE}_cart`)??[]);C.useEffect(()=>{xn.Local.set(`${lt.APP_CORRELATIVE}_cart`,u)},[u]);const[f,w]=C.useState([]),[b,S]=C.useState(0),[D,E]=C.useState("preset"),[N,B]=C.useState(null),[k,G]=C.useState(null),[U,z]=C.useState("elements"),[q,$]=C.useState("basic"),[te,j]=C.useState([JSON.stringify(f)]),[W,ae]=C.useState(0),[R,ve]=C.useState(!1),[me,Q]=C.useState(null),[Y,ce]=C.useState({}),oe=C.useRef(),Ae=()=>{if(a!=null&&a.width&&(a!=null&&a.height)){let F=a.width,_=a.height,K=F*37.8,ge=_*37.8;if(K&&ge){const M=window.innerWidth*.6,X=window.innerHeight*.7,xe=M/K,H=X/ge,ne=Math.min(xe,H,1);return{width:Math.round(K*ne),height:Math.round(ge*ne),originalWidth:F,originalHeight:_,scale:ne,unit:"cm",originalWidthPx:Math.round(K),originalHeightPx:Math.round(ge)}}}if(a!=null&&a.extra_settings)try{const F=typeof a.extra_settings=="string"?JSON.parse(a.extra_settings):a.extra_settings;if(F!=null&&F.canvas_config){const _=F.canvas_config;let K=_.width,ge=_.height,M=K*37.8,X=ge*37.8;if(M&&X){const xe=window.innerWidth*.6,H=window.innerHeight*.7,ne=xe/M,De=H/X,de=Math.min(ne,De,1);return{width:Math.round(M*de),height:Math.round(X*de),originalWidth:K,originalHeight:ge,scale:de,unit:"cm",originalWidthPx:Math.round(M),originalHeightPx:Math.round(X)}}}}catch(F){console.warn("Error parsing extra_settings:",F)}const m={square:{width:600,height:600},landscape:{width:1280,height:720},portrait:{width:600,height:800},wide:{width:1200,height:600},tall:{width:540,height:960},preset:{width:800,height:600}},x=m[D]||m.preset,h=window.innerWidth*.6,y=window.innerHeight*.7,I=h/x.width,A=y/x.height,O=Math.min(I,A,1);return{width:Math.round(x.width*O),height:Math.round(x.height*O),originalWidth:x.width,originalHeight:x.height,scale:O,unit:"px"}},[ee,he]=C.useState({width:800,height:600}),Se=C.useCallback(async()=>{var m;if(!f[b])return null;try{const x=document.querySelector(`#page-${f[b].id}`);if(!x)return console.warn("Workspace element not found for page:",f[b].id),null;const h={quality:.8,bgcolor:((m=f[b])==null?void 0:m.backgroundColor)||"#ffffff",width:x.offsetWidth,height:x.offsetHeight,filter:I=>!(I.classList&&["toolbar","ui-element","floating","overlay","modal","popover","text-toolbar","element-selector","element-controls","resize-handle","sidebar","panel","btn","button","control","menu","dropdown","tooltip","pointer-events-none"].some(O=>I.classList.contains(O))||I.tagName==="INPUT"||I.tagName==="TEXTAREA"||I.contentEditable==="true"||I.dataset&&I.dataset.excludeThumbnail==="true")},y=await ko.toPng(x,h);return console.log("✅ Thumbnail captured for page:",f[b].id),y}catch(x){return console.error("❌ Error capturing workspace:",x),null}},[b,f]),Ie=C.useCallback(async()=>{if(!f[b])return;const m=await Se();m&&(ce(x=>({...x,[f[b].id]:m})),console.log("🖼️ Thumbnail generated for page:",f[b].id))},[Se,b,f]);C.useCallback(()=>{clearTimeout(oe.current),oe.current=setTimeout(()=>{f[b]&&!Y[f[b].id]&&Ie()},1200)},[Ie,f,b,Y]);const Re=C.useCallback(()=>{f[b]&&!Y[f[b].id]&&setTimeout(()=>{Ie()},300)},[Ie,f,b,Y]);C.useEffect(()=>{const m=Ae();he(m)},[a,D]),C.useEffect(()=>{const m=()=>{const x=Ae();he(x)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[a,D]),C.useEffect(()=>{if(f[b]&&!Y[f[b].id]){const m=setTimeout(()=>{Re()},400);return()=>clearTimeout(m)}},[b]),C.useEffect(()=>{const m=`${ee.width}x${ee.height}`,x=sessionStorage.getItem("lastWorkspaceDimensions");x&&x!==m&&f.length>0&&(console.log("🔄 Dimensiones del workspace cambiaron, limpiando miniaturas"),ce({}),setTimeout(()=>{f[b]&&Re()},800)),sessionStorage.setItem("lastWorkspaceDimensions",m)},[ee.width,ee.height]);const[We,pe]=C.useState(!1),[Le,Qe]=C.useState({elementId:null,cellId:null}),[$e,Be]=C.useState(!1),Fe=ku(f,e,t,a,{width:800,height:600},Y),Oe=()=>`editor_progress_project_${e==null?void 0:e.id}`;C.useEffect(()=>{e&&t&&a&&(console.log("✅ Todos los datos están disponibles, inicializando editor..."),console.log("📦 projectData:",a,e,t),(!(i!=null&&i.pages)||i.pages.length===0)&&(console.log("📝 No hay páginas iniciales, creando desde preset..."),Ge(a,t)))},[e,t,a,i]);const Ge=(m,x)=>{try{console.log("Creating pages from preset:",m),console.log("Item data:",x),console.log("🖼️ Imágenes disponibles:"),console.log("   - Portada (cover_image):",x.cover_image),console.log("   - Contenido (content_image):",x.content_image),console.log("   - Contraportada (back_cover_image):",x.back_cover_image),console.log("   - Color de fondo del preset:",m.background_color);const h=[],y=m.pages||x.pages||20;console.log("📄 Total pages to create:",y);const I=x.cover_image?`/storage/images/item/${x.cover_image}`:null,A=x.cover_image?null:m.background_color||"#ffffff";console.log("🖼️ [COVER] cover_image:",x.cover_image),console.log("🖼️ [COVER] backgroundImage construida:",I),console.log("🎨 [COVER] backgroundColor:",A);const O={id:"page-cover",type:"cover",layout:"layout-1",backgroundImage:I,backgroundColor:A,cells:[{id:"cell-cover-1",elements:[{id:"cover-title",type:"text",content:x.name||"Mi Álbum Personalizado",position:{x:10,y:20},size:{width:80,height:15},style:{fontSize:"28px",fontFamily:"Arial",color:"#000000",fontWeight:"bold",textAlign:"center",backgroundColor:"transparent",padding:"8px"},zIndex:2},...x.image?[{id:"cover-image",type:"image",content:`/storage/images/item/${x.image}`,position:{x:25,y:40},size:{width:50,height:40},filters:{},mask:"none",zIndex:1}]:[]]}]};h.push(O);const F=x.content_image?`/storage/images/item/${x.content_image}`:null,_=x.content_image?null:m.background_color||"#ffffff";console.log("🖼️ [CONTENT] content_image:",x.content_image),console.log("🖼️ [CONTENT] backgroundImage construida:",F),console.log("🎨 [CONTENT] backgroundColor:",_);for(let X=1;X<=y;X++){const xe={id:`page-content-${X}`,type:"content",pageNumber:X,layout:"layout-1",backgroundImage:F,backgroundColor:_,cells:[{id:`cell-content-${X}-1`,elements:[{id:`page-number-${X}`,type:"text",content:`Página ${X}`,position:{x:5,y:5},size:{width:20,height:8},style:{fontSize:"14px",fontFamily:"Arial",color:"#666666",textAlign:"left"},zIndex:1},{id:`content-area-${X}`,type:"text",content:"Haz clic para agregar contenido...",position:{x:10,y:20},size:{width:80,height:60},style:{fontSize:"16px",fontFamily:"Arial",color:"#999999",textAlign:"center"},zIndex:1}]}]};h.push(xe)}const K=x.back_cover_image?`/storage/images/item/${x.back_cover_image}`:null,ge=x.back_cover_image?null:m.background_color||"#ffffff";console.log("🖼️ [FINAL] back_cover_image:",x.back_cover_image),console.log("🖼️ [FINAL] backgroundImage construida:",K),console.log("🎨 [FINAL] backgroundColor:",ge);const M={id:"page-final",type:"final",layout:"layout-1",backgroundImage:K,backgroundColor:ge,cells:[{id:"cell-final-1",elements:[]}]};h.push(M),console.log("✅ Created pages:",h),w(h),S(0),m.width&&m.height&&(console.log("📐 Canvas dimensions found, setting workspace to preset dimensions"),E("preset"))}catch(h){console.error("❌ Error creating pages:",h),d(h.message)}},tr=()=>{if(f.length===0)return"Cargando...";const m=f[b];if(!m)return"Página";switch(m.type){case"cover":return"Portada";case"content":return`Página ${m.pageNumber}`;case"final":return"Contraportada";default:return`Página ${b+1}`}},Te=()=>{if(f.length===0)return!1;const m=f[b];return(m==null?void 0:m.type)==="content"},Me=C.useMemo(()=>({cover:f.filter(m=>m.type==="cover"),content:f.filter(m=>m.type==="content"),final:f.filter(m=>m.type==="final")}),[f]),nr=C.useCallback(()=>{if(!N||!k||f.length===0)return null;const m=f[b];if(!m)return null;const x=m.cells.find(h=>h.id===k);return x?x.elements.find(h=>h.id===N):null},[N,k,f,b]),ar=(m,x)=>{if(x){const h=f[b].cells.find(I=>I.id===x),y=h==null?void 0:h.elements.find(I=>I.id===m);if(y!=null&&y.locked){console.log("Elemento bloqueado, no se puede seleccionar");const I=document.createElement("div");I.className="fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-700 px-4 py-2 rounded-lg z-50",I.textContent="Este elemento es parte del diseño base y no se puede editar",document.body.appendChild(I),setTimeout(()=>{document.body.contains(I)&&document.body.removeChild(I)},3e3);return}}if(x&&G(x),B(m),m){const h=f[b].cells.find(I=>I.id===(x||k)),y=h==null?void 0:h.elements.find(I=>I.id===m);(y==null?void 0:y.type)==="image"?(Q(y),console.log(me)):(y==null?void 0:y.type)==="text"?(pe(!0),Qe({elementId:m,cellId:x||k})):pe(!1)}else pe(!1),Q(null)},je=()=>{if(f.length===0)return ie[0];const m=f[b];return m?ie.find(x=>x.id===m.layout)||ie[0]:ie[0]},Ue=C.useCallback(m=>{console.log("📝 [DEBUG] updatePages llamado para página:",b),w(m);const x=[...te.slice(0,W+1),JSON.stringify(m)];j(x),ae(x.length-1);const h=Oe();if(localStorage.setItem(h,JSON.stringify({pages:m,currentPage:b,savedAt:Date.now()})),m[b]){const y=m[b].id;console.log("�️ [DEBUG] Invalidando miniatura por cambios en página:",y),ce(I=>{const A={...I};return delete A[y],console.log("🗑️ [DEBUG] Thumbnail eliminado, forzando regeneración"),A})}},[te,W,Oe,b]);C.useEffect(()=>{const m=Oe();localStorage.setItem(m,JSON.stringify({pages:f,currentPage:b,savedAt:Date.now()}))},[b]);const Or=m=>{const x=ie.find(A=>A.id===m);if(!x)return;const h=[...f],y=h[b],I=Array.from({length:x.cells}).map((A,O)=>y.cells[O]||{id:`cell-${y.id}-${O+1}`,elements:[]});h[b]={...y,layout:m,cells:I},Ue(h),B(null),G(null)},ze=(m,x)=>{console.log("➕ [DEBUG] addElementToCell llamado:",{cellId:m,elementId:x.id,type:x.type});const h=[...f];for(let y=0;y<h[b].cells.length;y++)h[b].cells[y].id===m&&(h[b].cells[y].elements.push(x),console.log("✅ [DEBUG] Elemento añadido a celda. Total elementos en celda:",h[b].cells[y].elements.length));Ue(h),B(x.id),G(m),console.log("🎯 [DEBUG] Elemento añadido, thumbnail debería regenerarse")},He=(m,x,h,y=!1)=>{const I=[...f],A=I[b].cells.findIndex(O=>O.id===m);if(A!==-1){if(y)I[b].cells[A].elements.push({...I[b].cells[A].elements.find(O=>O.id===x),...h}),console.log("🎯 [DEBUG] Elemento duplicado, thumbnail debería regenerarse");else{const O=I[b].cells[A].elements.findIndex(F=>F.id===x);O!==-1&&(I[b].cells[A].elements[O]={...I[b].cells[A].elements[O],...h},console.log("🎯 [DEBUG] Elemento actualizado, thumbnail debería regenerarse"))}Ue(I)}},or=(m,x)=>{console.log("🎯 [DEBUG] Eliminando elemento, thumbnail debería regenerarse");const h=[...f],y=h[b].cells.findIndex(I=>I.id===m);y!==-1&&(h[b].cells[y].elements=h[b].cells[y].elements.filter(I=>I.id!==x),Ue(h),N===x&&B(null))},Tr=()=>{W>0&&(ae(W-1),w(JSON.parse(te[W-1])),B(null),G(null))},Mr=()=>{W<te.length-1&&(ae(W+1),w(JSON.parse(te[W+1])),B(null),G(null))},Lr=()=>{const x={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:.05,y:.05},size:{width:.4,height:.15},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};k?ze(k,x):console.log("Selecciona una celda primero")},Ze=C.useMemo(()=>{var I;const m=f[b];if(!m)return null;const x=((I=m.cells)==null?void 0:I.flatMap(A=>A.elements||[]))||[],h=x.map(A=>{const O={id:A.id,type:A.type,content:A.content,position:A.position,size:A.size,style:A.style,rotation:A.rotation};return A.type==="image"&&(O.src=A.src,O.originalWidth=A.originalWidth,O.originalHeight=A.originalHeight),A.type==="text"&&(O.fontSize=A.fontSize,O.fontFamily=A.fontFamily,O.fontWeight=A.fontWeight,O.textAlign=A.textAlign,O.color=A.color),O}),y={pageId:m.id,elementsCount:x.length,contentHash:JSON.stringify(h),backgroundImage:m.backgroundImage,backgroundColor:m.backgroundColor,layout:m.layout,timestamp:Date.now()};return console.log("🔑 [DEBUG] Nueva clave de thumbnail generada:",y),y},[f,b]);C.useEffect(()=>{if(f.length===0||c||!Ze){console.log("🔍 [DEBUG] Saltando generación de thumbnail:",{pagesLength:f.length,isLoading:c,hasKey:!!Ze});return}let m=!1;const x=async()=>{try{const y=f[b];if(!y||!y.id){console.log("🔍 [DEBUG] No hay página actual válida");return}const I=y.id;if(console.log("🔄 [DEBUG] Forzando regeneración de miniatura para página:",I),console.log("🔍 [DEBUG] Clave de generación completa:",Ze),ce(O=>{const F={...O};return delete F[I],F}),await new Promise(O=>setTimeout(O,100)),m){console.log("🚫 [DEBUG] Generación cancelada");return}console.log("📸 [DEBUG] Capturando workspace...");const A=await Se();A&&!m?(console.log("✅ [DEBUG] Miniatura capturada, aplicando..."),ce(O=>({...O,[I]:A})),console.log("✅ [DEBUG] Miniatura regenerada exitosamente para:",I)):console.warn("⚠️ [DEBUG] No se pudo generar miniatura para:",I)}catch(y){m||console.error("❌ [DEBUG] Error regenerando miniatura:",y)}},h=setTimeout(()=>{console.log("⏰ [DEBUG] Ejecutando generación de thumbnail después del debounce"),x()},500);return()=>{m=!0,clearTimeout(h)}},[b,Ze,c,Se]),C.useEffect(()=>{if(f.length===0||c)return;const m=async()=>{const h=f.filter(y=>!Y[y.id]);if(h.length!==0){console.log("🔄 Generando miniaturas en segundo plano para",h.length,"páginas");for(const y of h)try{const I=document.createElement("canvas");I.width=200,I.height=150;const A=I.getContext("2d");if(A.fillStyle=y.backgroundColor||"#ffffff",A.fillRect(0,0,200,150),y.backgroundImage)try{const F=new Image;F.crossOrigin="anonymous",await new Promise((_,K)=>{F.onload=_,F.onerror=K,F.src=y.backgroundImage}),A.drawImage(F,0,0,200,150)}catch(F){console.warn("No se pudo cargar imagen de fondo para miniatura:",F)}y.cells&&y.cells.forEach(F=>{F.elements&&F.elements.forEach(_=>{var K;_.type==="text"&&_.content&&(A.fillStyle=((K=_.style)==null?void 0:K.color)||"#000000",A.font="12px Arial",A.fillText(_.content.substring(0,20)+(_.content.length>20?"...":""),10,30))})});const O=I.toDataURL("image/jpeg",.7);ce(F=>({...F,[y.id]:O})),console.log("✅ Miniatura de fondo generada para:",y.id),await new Promise(F=>setTimeout(F,300))}catch(I){console.error("❌ Error generando miniatura de fondo para:",y.id,I)}}},x=setTimeout(()=>{m()},2e3);return()=>clearTimeout(x)},[f,Y,c]);const Fr=async()=>{var m;console.log("🛒 === INICIO addAlbumToCart ===");try{if(console.log("📊 Estado actual:",{itemData:t,presetData:a,cartLength:u==null?void 0:u.length,pagesLength:f==null?void 0:f.length}),!t||!a)return console.error("❌ Faltan datos necesarios para crear el álbum"),console.log("itemData:",t),console.log("presetData:",a),sr.error("Error: Datos del álbum incompletos"),!1;console.log("🆔 Generando project_id único...");const x=Date.now(),h=e==null?void 0:e.id;console.log("🆔 Project ID generado:",h),window.currentProjectId=h,window.albumProjectId=h,console.log("📦 Creando producto del álbum...");let y=a.cover_image;Y&&Y["page-cover"]&&(y=Y["page-cover"]);let I=y;y&&y.startsWith("data:image/")&&y.length>1e5&&(console.log("🖼️ Thumbnail muy grande, usando imagen del preset"),I=a.cover_image||"/assets/img/default-album.jpg");const A={...t,project_id:h,quantity:1,type:"custom_album"};console.log("📦 Producto del álbum creado:",A),console.log("💾 Creando registro en canvas_projects...");try{const _={id:h,name:t.name||"Álbum Personalizado",item_id:t.id,canvas_preset_id:a.id,design_data:{pages:f,workspace:{width:ee.width,height:ee.height,scale:ee.scale},itemData:t,presetData:a,createdAt:new Date().toISOString()},status:"draft"},K=await fetch("/api/canvas/create-project",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"))||""},credentials:"include",body:JSON.stringify(_)});if(K.ok){const ge=await K.json();console.log("✅ Proyecto creado en canvas_projects:",ge)}else console.warn("⚠️ No se pudo crear el proyecto en canvas_projects:",K.statusText)}catch(_){console.warn("⚠️ Error creando proyecto en canvas_projects:",_)}console.log("🛒 Agregando producto al carrito...");const O=structuredClone(u),F=O.findIndex(_=>_.id==A.id);return F==-1?(O.push({...A,quantity:1}),console.log("➕ Producto agregado como nuevo item")):(O[F].quantity++,console.log("📈 Cantidad incrementada para producto existente")),v(O),console.log("✅ Carrito actualizado:",O.length,"items"),sr.success("Álbum agregado al carrito",{description:`${A.name} se ha añadido al carrito.`,icon:s.jsx(Oo,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"}),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cart:O,action:"add",product:A}})),console.log("🛒 === FIN addAlbumToCart EXITOSO ==="),!0}catch(x){return console.error("❌ === ERROR EN addAlbumToCart ==="),console.error("Error completo:",x),console.error("Stack trace:",x.stack),console.error("Mensaje del error:",x.message),sr.error("Error al agregar al carrito",{description:`Error específico: ${x.message}`,duration:5e3,position:"bottom-center"}),!1}};return window.finalizeAlbumDesign=async()=>{try{if(!(e!=null&&e.id))return alert("Error: No se encontró el ID del proyecto"),!1;const x={pages:(M=>M.map(X=>({id:X.id,type:X.type,pageNumber:X.pageNumber,layout:X.layout,cells:X.cells.map(xe=>({id:xe.id,elements:xe.elements.map(H=>{const ne={id:H.id,type:H.type,position:H.position,zIndex:H.zIndex||1};if(H.type==="image"){if(H.content.startsWith("data:image/")){const De=btoa(H.content.substring(0,100)).substring(0,20);ne.content=`[BASE64_IMAGE_${De}]`,ne.contentType=H.content.split(";")[0].split(":")[1],ne.originalSize=H.content.length}else ne.content=H.content;if(H.filters){const De=Object.entries(H.filters).filter(([de,be])=>be!==0&&be!==!1&&be!==null).reduce((de,[be,ir])=>(de[be]=ir,de),{});Object.keys(De).length>0&&(ne.filters=De)}H.mask&&H.mask!=="none"&&(ne.mask=H.mask),H.size&&(ne.size=H.size),H.locked&&(ne.locked=H.locked)}else if(H.type==="text"&&(ne.content=H.content,H.style)){const De=Object.entries(H.style).filter(([de,be])=>!(de==="fontSize"&&be==="16px"||de==="color"&&be==="#000000"||de==="fontFamily"&&be==="Arial")).reduce((de,[be,ir])=>(de[be]=ir,de),{});Object.keys(De).length>0&&(ne.style=De)}return ne})}))})))(f),projectInfo:{id:e==null?void 0:e.id,item_id:t==null?void 0:t.id,title:t==null?void 0:t.title,preset_id:a==null?void 0:a.id},presetInfo:{id:a==null?void 0:a.id,name:a==null?void 0:a.name,cover_image:a==null?void 0:a.cover_image,content_image:a==null?void 0:a.content_image,back_cover_image:a==null?void 0:a.back_cover_image},workspace:{width:ee.width,height:ee.height,scale:ee.scale},meta:{finalizedAt:new Date().toISOString(),version:"1.3"}},h=JSON.stringify({design_data:x}),y=Math.round(h.length/1024),I=Math.round(y/1024*100)/100;console.log(`Tamaño del payload: ${y} KB (${I} MB)`);let A=0,O=0;f.forEach(M=>{var X;(X=M.cells)==null||X.forEach(xe=>{var H;(H=xe.elements)==null||H.forEach(ne=>{ne.type==="image"&&ne.content&&ne.content.startsWith("data:image/")&&(A++,O+=ne.content.length)})})});const F=Math.round(O/(1024*1024)*100)/100;if(console.log(`Imágenes base64 encontradas: ${A}, Tamaño total: ${F} MB`),y>1024&&!confirm(`El diseño contiene ${A} imágenes (${F} MB en imágenes). Payload completo: ${I} MB. Esto podría causar problemas al guardarlo. ¿Desea continuar de todos modos?`))return!1;const _=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",K=await fetch(`${_}/api/canvas/projects/${e.id}/save`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:h});if(!K.ok){let M="Error al finalizar el diseño";try{M=(await K.json()).message||M}catch{K.status===413?M="El diseño es demasiado grande para ser guardado. Intente simplificar las imágenes.":K.status>=500&&(M="Error del servidor. Intente nuevamente más tarde.")}throw new Error(M)}const ge=await K.json();return console.log("✅ Diseño finalizado exitosamente en el servidor"),console.log("📄 Respuesta del servidor:",ge),!0}catch(m){console.error("Error al finalizar diseño:",m);let x=m.message;return m.message.includes("Failed to fetch")?x="Error de conexión. Verifique su conexión a internet e intente nuevamente.":(m.message.includes("NetworkError")||m.message.includes("net::"))&&(x="Error de red. Intente nuevamente más tarde."),alert("Error al finalizar el diseño: "+x),!1}},window.generateAlbumPDF=async()=>{let m=document.getElementById("pdf-hidden-pages");m||(m=document.createElement("div"),m.id="pdf-hidden-pages",m.style.position="fixed",m.style.left="-99999px",m.style.top="0",m.style.width="800px",m.style.zIndex="-1",document.body.appendChild(m)),m.innerHTML="";const x=(I,A)=>{var F,_;const O=ie.find(K=>K.id===I.layout)||ie[0];return s.jsx("div",{id:`pdf-page-${I.id}`,style:{width:800,height:600,background:"#fff",overflow:"hidden",position:"relative",boxSizing:"border-box",display:"block",margin:0,padding:0},children:s.jsx("div",{className:`grid ${O.template}`,style:{width:"100%",height:"100%",gap:((F=O.style)==null?void 0:F.gap)||"16px",padding:((_=O.style)==null?void 0:_.padding)||"16px",boxSizing:"border-box"},children:I.cells.map((K,ge)=>s.jsx("div",{style:{position:"relative",width:"100%",height:"100%",background:"#f9fafb",borderRadius:8,overflow:"hidden"},children:K.elements.map(M=>{var X,xe,H,ne,De,de,be,ir,Zt,_t,en,rn,tn,nn,an,on,ln,sn,cn,dn,un,pn,gn,fn,vn;return M.type==="image"?s.jsx("div",{className:((X=wt.find(so=>so.id===M.mask))==null?void 0:X.class)||"",style:{position:"absolute",left:M.position.x,top:M.position.y,width:"100%",height:"100%",zIndex:M.zIndex||1},children:s.jsx("img",{src:M.content,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",filter:`brightness(${(((xe=M.filters)==null?void 0:xe.brightness)||100)/100}) contrast(${(((H=M.filters)==null?void 0:H.contrast)||100)/100}) saturate(${(((ne=M.filters)==null?void 0:ne.saturation)||100)/100}) sepia(${(((De=M.filters)==null?void 0:De.tint)||0)/100}) hue-rotate(${(((de=M.filters)==null?void 0:de.hue)||0)*3.6}deg) blur(${((be=M.filters)==null?void 0:be.blur)||0}px)`,transform:`scale(${((ir=M.filters)==null?void 0:ir.scale)||1}) rotate(${((Zt=M.filters)==null?void 0:Zt.rotate)||0}deg)${(_t=M.filters)!=null&&_t.flipHorizontal?" scaleX(-1)":""}${(en=M.filters)!=null&&en.flipVertical?" scaleY(-1)":""}`,mixBlendMode:((rn=M.filters)==null?void 0:rn.blendMode)||"normal",opacity:(((tn=M.filters)==null?void 0:tn.opacity)||100)/100}})},M.id):s.jsx("div",{style:{position:"absolute",left:M.position.x,top:M.position.y,fontFamily:(nn=M.style)==null?void 0:nn.fontFamily,fontSize:(an=M.style)==null?void 0:an.fontSize,fontWeight:(on=M.style)==null?void 0:on.fontWeight,fontStyle:(ln=M.style)==null?void 0:ln.fontStyle,textDecoration:(sn=M.style)==null?void 0:sn.textDecoration,color:(cn=M.style)==null?void 0:cn.color,textAlign:(dn=M.style)==null?void 0:dn.textAlign,background:((un=M.style)==null?void 0:un.backgroundColor)||"transparent",padding:((pn=M.style)==null?void 0:pn.padding)||"8px",borderRadius:((gn=M.style)==null?void 0:gn.borderRadius)||"0px",border:((fn=M.style)==null?void 0:fn.border)||"none",opacity:((vn=M.style)==null?void 0:vn.opacity)||1},children:M.content},M.id)})},K.id))})},I.id)},h=await co(()=>import("./index-BrXtjC9y.js").then(I=>I.i),__vite__mapDeps([0,1,2,3]));await new Promise(I=>{h.render(s.jsx("div",{children:f.map((A,O)=>x(A))}),m,I)});const y=new Do({orientation:"landscape",unit:"px",format:[800,600]});for(let I=0;I<f.length;I++){const A=document.getElementById(`pdf-page-${f[I].id}`),F=(await Io(A,{backgroundColor:"#fff",scale:2})).toDataURL("image/jpeg",1);I>0&&y.addPage([800,600],"landscape"),y.addImage(F,"JPEG",0,0,800,600)}y.save("album.pdf"),m.innerHTML=""},s.jsxs(vo,{backend:mo,className:"!h-screen !w-screen overflow-hidden",children:[c?s.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold customtext-neutral-dark mb-2",children:"Cargando Editor"}),s.jsx("p",{className:"customtext-neutral-dark",children:"Preparando tu álbum personalizado..."})]})}):g?s.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),s.jsx("p",{className:"customtext-neutral-dark mb-4",children:g}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Reintentar"}),s.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Volver"})]})]})}):f.length===0?s.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold customtext-neutral-dark mb-2",children:"Inicializando Editor"}),s.jsx("p",{className:"customtext-neutral-dark mb-4",children:"Generando páginas del álbum..."}),s.jsx("div",{className:"animate-pulse flex space-x-4",children:s.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded"}),s.jsx("div",{className:"h-4 bg-gray-300 rounded w-5/6"})]})]})})]})}):s.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-gray-50 font-paragraph",children:[s.jsx(jo,{isOpen:$e,onRequestClose:()=>Be(!1),pages:f.map(m=>({...m,layout:ie.find(x=>x.id===m.layout)||ie[0]})),workspaceDimensions:ee,getCurrentLayout:m=>m?ie.find(x=>x.id===m.layout)||ie[0]:ie[0],presetData:a,pageThumbnails:Y,addAlbumToCart:Fr,projectData:e,itemData:t}),s.jsx("header",{className:"fixed top-0 left-0 right-0 h-16 border-b bg-primary shadow-sm flex items-center px-4 z-10",children:s.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:lt.APP_NAME,className:"h-7 object-contain object-center invert brightness-0"}),s.jsx("div",{className:"h-6 w-px bg-white/20"}),s.jsx("h1",{className:"text-lg font-bold text-white truncate hidden sm:block",children:(e==null?void 0:e.name)||"Álbum Sin Título"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"bg-white/10 rounded-full px-4 py-1.5 flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-secondary animate-pulse"}),s.jsx("p",{className:"text-sm text-white font-medium",children:tr()})]}),s.jsx("div",{className:"text-xs text-white/70 hidden sm:block",children:f.length>0&&`${f.length} páginas total`}),Te()?s.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-2 rounded-md text-xs font-medium flex items-center gap-1",children:s.jsx(ni,{className:"h-3 w-3"})}):s.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-2 rounded-md text-xs font-medium flex items-center gap-1",children:s.jsx(_o,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx(Ru,{saveStatus:Fe.saveStatus,lastSaved:Fe.lastSaved,onManualSave:Fe.manualSave}),s.jsx(Ve,{variant:"secondary",size:"sm",onClick:()=>Be(!0),icon:s.jsx(Ct,{className:"h-4 w-4"}),children:"Vista de Álbum"}),!1]})]})}),s.jsxs("div",{className:"flex w-full h-full pt-16",children:[s.jsxs("aside",{className:"w-64 bg-white border-r flex flex-col",children:[s.jsx("div",{className:"p-3 border-b",children:s.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-md",children:[s.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${U==="elements"?"bg-white shadow-sm text-purple-700":"customtext-neutral-dark hover:bg-white/50"}`,onClick:()=>z("elements"),children:"Elementos"}),s.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${U==="filters"?"bg-white shadow-sm text-purple-700":"customtext-neutral-dark hover:bg-white/50"}`,onClick:()=>z("filters"),children:"Filtros"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:[U==="elements"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Layouts"}),s.jsx(bu,{currentLayoutId:(vr=f[b])==null?void 0:vr.layout,onLayoutChange:Or})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Capas"}),s.jsx(hu,{elements:((mr=f[b].cells.find(m=>m.id===k))==null?void 0:mr.elements)||[],onReorder:m=>{const x=[...f],h=x[b].cells.findIndex(y=>y.id===k);h!==-1&&(x[b].cells[h].elements=m,Ue(x))},onSelect:ar,selectedElement:N})]})]}),U==="filters"&&s.jsx("div",{className:"space-y-3 max-h-full",children:(()=>{const m=nr();return m?s.jsxs(s.Fragment,{children:[m.type==="image"&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ur,{className:"h-4 w-4 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Imagen seleccionada"})]}),s.jsx("div",{className:"w-full h-16 rounded-md overflow-hidden bg-gray-200",children:s.jsx("img",{src:m.content,alt:"",className:"w-full h-full object-cover"})})]}),m.type==="image"&&s.jsxs("div",{className:"border-t pt-3",children:[s.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Máscaras"}),s.jsx(xu,{selectedMask:m.mask||"none",onSelect:x=>{He(k,N,{mask:x})},availableMasks:wt.map(x=>x.id),selectedImage:m})]}),s.jsxs("div",{className:"border-t pt-3",children:[s.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Filtros y efectos"}),s.jsx("div",{className:"",children:s.jsx(ho,{filters:m.filters||{},onFilterChange:x=>{He(k,N,{filters:x})},selectedElement:m})})]})]}):s.jsxs("div",{className:"text-center py-8 px-2",children:[s.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-3",children:s.jsx(Ur,{className:"h-6 w-6 text-gray-400 mx-auto"})}),s.jsx("h3",{className:"text-sm font-medium customtext-neutral-dark",children:"Selecciona un elemento"}),s.jsx("p",{className:"text-xs customtext-neutral-dark mt-1",children:"Para aplicar filtros y efectos, primero selecciona una imagen o texto en el lienzo"})]})})()})]})]}),s.jsxs("main",{className:"flex-1 flex flex-col h-full",children:[s.jsx("div",{className:"bg-white border-b px-4 py-2 flex items-center justify-between",children:We?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ve,{variant:"ghost",size:"sm",onClick:()=>pe(!1),className:"h-8 px-2",icon:s.jsx(Ro,{className:"h-4 w-4"}),children:"Volver"}),s.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"})]}),s.jsx("div",{className:"flex-1 flex justify-start",children:s.jsx(Nu,{element:nr(),onUpdate:m=>{He(Le.cellId,Le.elementId,m)},onClose:()=>pe(!1)})})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(Ve,{variant:"ghost",size:"sm",onClick:Tr,disabled:W<=0,className:"h-8 px-2",icon:s.jsx(bo,{className:"h-4 w-4"}),children:"Deshacer"}),s.jsx(Ve,{variant:"ghost",size:"sm",onClick:Mr,disabled:W>=te.length-1,className:"h-8 px-2",icon:s.jsx(xo,{className:"h-4 w-4"}),children:"Rehacer"})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(Ve,{variant:"ghost",size:"sm",onClick:()=>{const m=document.createElement("input");m.type="file",m.accept="image/*",m.onchange=x=>{if(x.target.files&&x.target.files[0]){const y={id:`img-${Date.now()}`,type:"image",content:"",position:{x:.1,y:.1},size:{width:.3,height:.3},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},I=new FileReader;I.onload=A=>{var O,F;(O=A.target)!=null&&O.result&&(y.content=A.target.result,k?ze(k,y):(F=f[b])!=null&&F.cells[0]&&ze(f[b].cells[0].id,y))},I.readAsDataURL(x.target.files[0])}},m.click()},className:"h-8 px-2",icon:s.jsx(Ur,{className:"h-4 w-4"}),children:"Imagen"}),s.jsx(Ve,{variant:"ghost",size:"sm",onClick:Lr,className:"h-8 px-2",icon:s.jsx(Ir,{className:"h-4 w-4"}),children:"Texto"})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),N&&s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(Ve,{variant:"ghost",size:"sm",onClick:()=>{if(N&&k){const m=nr();if(m){const x={...m,id:`${m.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,position:{x:m.position.x+.05,y:m.position.y+.05}};ze(k,x)}}},className:"h-8 px-2",icon:s.jsx(So,{className:"h-4 w-4"}),children:"Duplicar"}),s.jsx(Ve,{variant:"ghost",size:"sm",onClick:()=>{N&&k&&or(k,N)},className:"h-8 px-2 text-red-600 hover:text-white",icon:s.jsx(Bo,{className:"h-4 w-4"}),children:"Eliminar"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(Eu,{currentSize:D,onSizeChange:E,presetData:a,workspaceDimensions:ee})})]})})}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-6 overflow-hidden bg-gray-100",children:R?s.jsx("div",{className:"bg-white rounded-lg shadow-lg",children:s.jsx("div",{className:"overflow-hidden",style:{width:ee.width,height:ee.height},children:s.jsx("div",{id:`page-${f[b].id}`,className:`grid ${je().template} gap-6`,style:{width:"100%",height:"100%"},children:f[b].cells.map((m,x)=>{var h;return s.jsx(hn,{id:m.id,elements:m.elements.filter(y=>!y.locked),workspaceSize:ee,cellStyle:(h=je().cellStyles)==null?void 0:h[f[b].cells.indexOf(m)],selectedElement:k===m.id?N:null,onSelectElement:ar,onAddElement:(y,I)=>ze(I,y),onUpdateElement:(y,I,A)=>He(m.id,y,I,A),onDeleteElement:y=>or(m.id,y),availableMasks:je().maskCategories.flatMap(y=>y.masks)},m.id)})})})}):s.jsxs("div",{id:`page-${f[b].id}`,className:" shadow-xl overflow-hidden",style:{width:ee.width,height:ee.height,position:"relative",backgroundColor:(hr=f[b])!=null&&hr.backgroundImage?"transparent":((br=f[b])==null?void 0:br.backgroundColor)||"#ffffff"},children:["                                        ",(()=>{const m=f[b];if(console.log("🖼️ [WORKSPACE] Renderizando background para página:",m==null?void 0:m.type),console.log("🖼️ [WORKSPACE] backgroundImage:",m==null?void 0:m.backgroundImage),console.log("🖼️ [WORKSPACE] backgroundColor:",m==null?void 0:m.backgroundColor),m!=null&&m.backgroundImage){const x=window.location.origin+m.backgroundImage;console.log("🔗 [WORKSPACE] URL completa de la imagen:",x),console.log("🔗 [WORKSPACE] URL relativa:",m.backgroundImage),fetch(m.backgroundImage,{method:"HEAD"}).then(h=>{h.ok?console.log("✅ [WORKSPACE] Imagen existe en el servidor"):console.error("❌ [WORKSPACE] Imagen NO existe en el servidor. Status:",h.status)}).catch(h=>{console.error("❌ [WORKSPACE] Error verificando imagen:",h)})}return m!=null&&m.backgroundImage?(console.log("🎨 [WORKSPACE] Aplicando imagen de fondo:",m.backgroundImage),s.jsx("img",{src:m.backgroundImage,alt:"background",className:"absolute inset-0 w-full h-full object-cover pointer-events-none",style:{zIndex:1},onLoad:()=>{var x,h,y,I;console.log("✅ [WORKSPACE] Imagen de fondo cargada exitosamente"),console.log("📐 [WORKSPACE] Dimensiones de la imagen cargada:",(h=(x=arguments[0])==null?void 0:x.target)==null?void 0:h.naturalWidth,"x",(I=(y=arguments[0])==null?void 0:y.target)==null?void 0:I.naturalHeight)},onError:x=>{console.error("❌ [WORKSPACE] Error cargando imagen de fondo:",x),console.error("❌ [WORKSPACE] URL que falló:",x.target.src),console.error("❌ [WORKSPACE] Error details:",x.target.error)}})):m!=null&&m.backgroundColor?(console.log("🎨 [WORKSPACE] Aplicando color de fondo:",m.backgroundColor),s.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{backgroundColor:m.backgroundColor,zIndex:1}})):(console.log("⚪ [WORKSPACE] Sin fondo personalizado, usando fondo por defecto"),null)})(),s.jsx("div",{className:`grid ${je().template}`,style:{position:"relative",zIndex:10,width:"100%",height:"100%",boxSizing:"border-box",gap:((xr=je().style)==null?void 0:xr.gap)||"16px",padding:((yr=je().style)==null?void 0:yr.padding)||"16px"},children:f[b].cells.map(m=>{var x;return s.jsx(hn,{id:m.id,elements:m.elements.filter(h=>!h.locked),workspaceSize:ee,cellStyle:(x=je().cellStyles)==null?void 0:x[f[b].cells.indexOf(m)],selectedElement:k===m.id?N:null,onSelectElement:ar,onAddElement:(h,y)=>ze(y,h),onUpdateElement:(h,y,I)=>He(m.id,h,y,I),onDeleteElement:h=>or(m.id,h),availableMasks:je().maskCategories.flatMap(h=>h.masks)},m.id)})})]})})]}),s.jsxs("aside",{className:"w-52 bg-white border-l flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"font-medium text-sm text-gray-700 flex items-center gap-1.5",children:[s.jsx(Ct,{className:"h-4 w-4 text-purple-600"}),"Páginas"]}),s.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded-full border",children:[f.length," total"]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400 mr-1.5"}),"Portada"]}),Me.cover.map((m,x)=>s.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                            ${b===f.indexOf(m)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                            mb-2`,onClick:()=>S(f.indexOf(m)),children:s.jsxs("div",{className:"relative bg-purple-50  overflow-hidden border aspect-[4/3] ",children:[s.jsx(yt,{pageId:m.id,thumbnail:Y[m.id],altText:"Portada",type:"cover"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 pt-6 group-hover:opacity-100 opacity-80 transition-opacity",children:s.jsx("span",{className:"text-[10px] text-white font-medium block",children:"Portada"})})]})},m.id))]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400 mr-1.5"}),"Páginas de contenido"]}),s.jsx("div",{className:"space-y-2",children:Me.content.map((m,x)=>s.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                                ${b===f.indexOf(m)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                                mb-1`,onClick:()=>S(f.indexOf(m)),children:s.jsxs("div",{className:"relative  overflow-hidden border aspect-[4/3]",children:[s.jsx(yt,{pageId:m.id,thumbnail:Y[m.id],altText:`Página ${m.pageNumber}`,type:"content"}),s.jsx("div",{className:"absolute top-1 left-1 bg-white/90 rounded-full h-5 w-5 flex items-center justify-center text-[10px] font-bold shadow-sm",children:m.pageNumber}),s.jsx("div",{className:"absolute top-1 right-1 bg-blue-500 text-white text-[9px] px-1.5 py-0.5 rounded-full opacity-80 group-hover:opacity-100",children:"Editable"})]})},m.id))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400 mr-1.5"}),"Contraportada"]}),Me.final.map((m,x)=>s.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                            ${b===f.indexOf(m)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                            mb-2`,onClick:()=>S(f.indexOf(m)),children:s.jsxs("div",{className:"relative  overflow-hidden border mb-1 aspect-[4/3]",children:[s.jsx(yt,{pageId:m.id,thumbnail:Y[m.id],altText:"Contraportada",type:"final"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 pt-6 group-hover:opacity-100 opacity-80 transition-opacity",children:s.jsx("span",{className:"text-[10px] text-white font-medium block",children:"Contraportada"})})]})},m.id))]})]})})]})]})]}),s.jsx(No,{})]})}export{yp as default};
