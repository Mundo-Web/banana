const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BrXtjC9y.js","assets/index-BH53Isel.js","assets/index-yBjzXJbu.js","assets/index-fNjTmf9T.js"])))=>i.map(i=>d[i]);
import{_ as to}from"./preload-helper-BfFHrpNk.js";import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{R as ie,r as I}from"./index-BH53Isel.js";import{b as cn,c as no,a as ao,d as oo,l as de,i as vt,e as io,D as lo,H as so,B as Ke,F as co,U as uo,R as po,E as dn}from"./EditableCell-QW6XkU6A.js";import{a as go,b as Wr,_ as $}from"./objectWithoutPropertiesLoose-CoVnHxV7.js";import{h as un}from"./hoist-non-react-statics.cjs-kbdZbs82.js";import{r as fo,R as vo}from"./index-BrXtjC9y.js";import{c as ne}from"./createLucideIcon-Cy5Ya80P.js";import{I as zr}from"./image-BEA0kkBS.js";import{T as wr}from"./TextElement-t0TJofq8.js";import{h as mo}from"./EditorLayout-3dTmWtvf.js";import{E as ho}from"./Editor-BQxsfOOe.js";import{T as bo,t as He}from"./index-Bx7_DjT0.js";import{m as $e}from"./main-BvVILmTO.js";import{X as xo}from"./x-DBMwyD6F.js";import{P as yo}from"./palette-DV_Vpyg9.js";import{M as pn}from"./minus-jyhodMPN.js";import{P as gn}from"./plus-Bot15Khs.js";import{C as wo}from"./chevron-down-DS-mdh9v.js";import{B as Co}from"./V1Edit-Byl8Zu3k.js";import{G as Ue}from"./Global-ErywZRdd.js";import{C as So}from"./chevron-left-B2s3ZsB7.js";import{C as Io}from"./copy-6OEekgvq.js";import{T as No}from"./trash-2-DK1wnsDn.js";import{C as Do}from"./circle-check-big-D6DM3vPb.js";import"./index-yBjzXJbu.js";import"./objectSpread2-8ZRf701l.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./sparkles-DeLUn6av.js";import"./sliders-vertical-C5ts4taK.js";import"./settings-BSPs3Zt8.js";import"./chevron-up-D78jyEhP.js";import"./upload-qgEr5bIl.js";import"./index-fNjTmf9T.js";import"./EditorMain-rmOX089k.js";import"./index-BSWw-p5k.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-Chjiymov.js";import"./index.es-p8wkj5I3.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ne("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ne("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ne("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ne("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ne("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ne("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=ne("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ne("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ne("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ne("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=ne("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ne("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=ne("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ne("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ne("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=ne("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ne("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=ne("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=ne("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=ne("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ne("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ne("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=ne("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=ne("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=ne("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=ne("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ne("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);function Jn(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,go(e,r)}var Xn=ie.createContext(null);function ni(e){e()}var Qn=ni,ai=function(r){return Qn=r},oi=function(){return Qn};function ii(){var e=oi(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){e(function(){for(var a=r;a;)a.callback(),a=a.next})},get:function(){for(var a=[],o=r;o;)a.push(o),o=o.next;return a},subscribe:function(a){var o=!0,i=t={callback:a,next:null,prev:t};return i.prev?i.prev.next=i:r=i,function(){!o||r===null||(o=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var fn={notify:function(){},get:function(){return[]}};function Zn(e,r){var t,n=fn;function a(u){return d(),n.subscribe(u)}function o(){n.notify()}function i(){g.onStateChange&&g.onStateChange()}function l(){return!!t}function d(){t||(t=r?r.addNestedSub(i):e.subscribe(i),n=ii())}function p(){t&&(t(),t=void 0,n.clear(),n=fn)}var g={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:i,isSubscribed:l,trySubscribe:d,tryUnsubscribe:p,getListeners:function(){return n}};return g}var _n=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?I.useLayoutEffect:I.useEffect;function li(e){var r=e.store,t=e.context,n=e.children,a=I.useMemo(function(){var l=Zn(r);return{store:r,subscription:l}},[r]),o=I.useMemo(function(){return r.getState()},[r]);_n(function(){var l=a.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==r.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[a,o]);var i=t||Xn;return ie.createElement(i.Provider,{value:a},n)}var nt={exports:{}},oe={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vn;function si(){if(vn)return oe;vn=1;var e=60103,r=60106,t=60107,n=60108,a=60114,o=60109,i=60110,l=60112,d=60113,p=60120,g=60115,u=60116,c=60121,f=60122,v=60117,C=60129,h=60131;if(typeof Symbol=="function"&&Symbol.for){var b=Symbol.for;e=b("react.element"),r=b("react.portal"),t=b("react.fragment"),n=b("react.strict_mode"),a=b("react.profiler"),o=b("react.provider"),i=b("react.context"),l=b("react.forward_ref"),d=b("react.suspense"),p=b("react.suspense_list"),g=b("react.memo"),u=b("react.lazy"),c=b("react.block"),f=b("react.server.block"),v=b("react.fundamental"),C=b("react.debug_trace_mode"),h=b("react.legacy_hidden")}function N(y){if(typeof y=="object"&&y!==null){var z=y.$$typeof;switch(z){case e:switch(y=y.type,y){case t:case a:case n:case d:case p:return y;default:switch(y=y&&y.$$typeof,y){case i:case l:case u:case g:case o:return y;default:return z}}case r:return z}}}var E=o,S=e,k=l,D=t,T=u,L=g,M=r,U=a,H=n,X=d;return oe.ContextConsumer=i,oe.ContextProvider=E,oe.Element=S,oe.ForwardRef=k,oe.Fragment=D,oe.Lazy=T,oe.Memo=L,oe.Portal=M,oe.Profiler=U,oe.StrictMode=H,oe.Suspense=X,oe.isAsyncMode=function(){return!1},oe.isConcurrentMode=function(){return!1},oe.isContextConsumer=function(y){return N(y)===i},oe.isContextProvider=function(y){return N(y)===o},oe.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},oe.isForwardRef=function(y){return N(y)===l},oe.isFragment=function(y){return N(y)===t},oe.isLazy=function(y){return N(y)===u},oe.isMemo=function(y){return N(y)===g},oe.isPortal=function(y){return N(y)===r},oe.isProfiler=function(y){return N(y)===a},oe.isStrictMode=function(y){return N(y)===n},oe.isSuspense=function(y){return N(y)===d},oe.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===a||y===C||y===n||y===d||y===p||y===h||typeof y=="object"&&y!==null&&(y.$$typeof===u||y.$$typeof===g||y.$$typeof===o||y.$$typeof===i||y.$$typeof===l||y.$$typeof===v||y.$$typeof===c||y[0]===f)},oe.typeOf=N,oe}var mn;function ci(){return mn||(mn=1,nt.exports=si()),nt.exports}var di=ci(),ui=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],pi=["reactReduxForwardedRef"],gi=[],fi=[null,null];function vi(e,r){var t=e[1];return[r.payload,t+1]}function hn(e,r,t){_n(function(){return e.apply(void 0,r)},t)}function mi(e,r,t,n,a,o,i){e.current=n,r.current=a,t.current=!1,o.current&&(o.current=null,i())}function hi(e,r,t,n,a,o,i,l,d,p){if(e){var g=!1,u=null,c=function(){if(!g){var C=r.getState(),h,b;try{h=n(C,a.current)}catch(N){b=N,u=N}b||(u=null),h===o.current?i.current||d():(o.current=h,l.current=h,i.current=!0,p({type:"STORE_UPDATED",payload:{error:b}}))}};t.onStateChange=c,t.trySubscribe(),c();var f=function(){if(g=!0,t.tryUnsubscribe(),t.onStateChange=null,u)throw u};return f}}var bi=function(){return[null,0]};function xi(e,r){r===void 0&&(r={});var t=r,n=t.getDisplayName,a=n===void 0?function(E){return"ConnectAdvanced("+E+")"}:n,o=t.methodName,i=o===void 0?"connectAdvanced":o,l=t.renderCountProp,d=l===void 0?void 0:l,p=t.shouldHandleStateChanges,g=p===void 0?!0:p,u=t.storeKey,c=u===void 0?"store":u;t.withRef;var f=t.forwardRef,v=f===void 0?!1:f,C=t.context,h=C===void 0?Xn:C,b=Wr(t,ui),N=h;return function(S){var k=S.displayName||S.name||"Component",D=a(k),T=$({},b,{getDisplayName:a,methodName:i,renderCountProp:d,shouldHandleStateChanges:g,storeKey:c,displayName:D,wrappedComponentName:k,WrappedComponent:S}),L=b.pure;function M(z){return e(z.dispatch,T)}var U=L?I.useMemo:function(z){return z()};function H(z){var te=I.useMemo(function(){var ke=z.reactReduxForwardedRef,qe=Wr(z,pi);return[z.context,ke,qe]},[z]),B=te[0],le=te[1],ce=te[2],J=I.useMemo(function(){return B&&B.Consumer&&di.isContextConsumer(ie.createElement(B.Consumer,null))?B:N},[B,N]),Q=I.useContext(J),ue=!!z.store&&!!z.store.getState&&!!z.store.dispatch;Q&&Q.store;var ee=ue?z.store:Q.store,me=I.useMemo(function(){return M(ee)},[ee]),Ae=I.useMemo(function(){if(!g)return fi;var ke=Zn(ee,ue?null:Q.subscription),qe=ke.notifyNestedSubs.bind(ke);return[ke,qe]},[ee,ue,Q]),ye=Ae[0],Me=Ae[1],Ie=I.useMemo(function(){return ue?Q:$({},Q,{subscription:ye})},[ue,Q,ye]),je=I.useReducer(vi,gi,bi),Le=je[0],we=Le[0],Re=je[1];if(we&&we.error)throw we.error;var Fe=I.useRef(),pe=I.useRef(ce),se=I.useRef(),ze=I.useRef(!1),Ve=U(function(){return se.current&&ce===pe.current?se.current:me(ee.getState(),ce)},[ee,we,ce]);hn(mi,[pe,Fe,ze,ce,Ve,se,Me]),hn(hi,[g,ee,ye,me,pe,Fe,ze,se,Me,Re],[ee,ye,me]);var Ne=I.useMemo(function(){return ie.createElement(S,$({},Ve,{ref:le}))},[le,S,Ve]),We=I.useMemo(function(){return g?ie.createElement(J.Provider,{value:Ie},Ne):Ne},[J,Ne,Ie]);return We}var X=L?ie.memo(H):H;if(X.WrappedComponent=S,X.displayName=H.displayName=D,v){var y=ie.forwardRef(function(te,B){return ie.createElement(X,$({},te,{reactReduxForwardedRef:B}))});return y.displayName=D,y.WrappedComponent=S,un(y,S)}return un(X,S)}}function bn(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function at(e,r){if(bn(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!Object.prototype.hasOwnProperty.call(r,t[a])||!bn(e[t[a]],r[t[a]]))return!1;return!0}function yi(e,r){var t={},n=function(i){var l=e[i];typeof l=="function"&&(t[i]=function(){return r(l.apply(void 0,arguments))})};for(var a in e)n(a);return t}function Ct(e){return function(t,n){var a=e(t,n);function o(){return a}return o.dependsOnOwnProps=!1,o}}function xn(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function ea(e,r){return function(n,a){a.displayName;var o=function(l,d){return o.dependsOnOwnProps?o.mapToProps(l,d):o.mapToProps(l)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,d){o.mapToProps=e,o.dependsOnOwnProps=xn(e);var p=o(l,d);return typeof p=="function"&&(o.mapToProps=p,o.dependsOnOwnProps=xn(p),p=o(l,d)),p},o}}function wi(e){return typeof e=="function"?ea(e):void 0}function Ci(e){return e?void 0:Ct(function(r){return{dispatch:r}})}function Si(e){return e&&typeof e=="object"?Ct(function(r){return yi(e,r)}):void 0}const Ii=[wi,Ci,Si];function Ni(e){return typeof e=="function"?ea(e):void 0}function Di(e){return e?void 0:Ct(function(){return{}})}const Ei=[Ni,Di];function Pi(e,r,t){return $({},t,e,r)}function Ai(e){return function(t,n){n.displayName;var a=n.pure,o=n.areMergedPropsEqual,i=!1,l;return function(p,g,u){var c=e(p,g,u);return i?(!a||!o(c,l))&&(l=c):(i=!0,l=c),l}}}function ji(e){return typeof e=="function"?Ai(e):void 0}function Ri(e){return e?void 0:function(){return Pi}}const ki=[ji,Ri];var Bi=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Oi(e,r,t,n){return function(o,i){return t(e(o,i),r(n,i),i)}}function Ti(e,r,t,n,a){var o=a.areStatesEqual,i=a.areOwnPropsEqual,l=a.areStatePropsEqual,d=!1,p,g,u,c,f;function v(E,S){return p=E,g=S,u=e(p,g),c=r(n,g),f=t(u,c,g),d=!0,f}function C(){return u=e(p,g),r.dependsOnOwnProps&&(c=r(n,g)),f=t(u,c,g),f}function h(){return e.dependsOnOwnProps&&(u=e(p,g)),r.dependsOnOwnProps&&(c=r(n,g)),f=t(u,c,g),f}function b(){var E=e(p,g),S=!l(E,u);return u=E,S&&(f=t(u,c,g)),f}function N(E,S){var k=!i(S,g),D=!o(E,p,S,g);return p=E,g=S,k&&D?C():k?h():D?b():f}return function(S,k){return d?N(S,k):v(S,k)}}function Mi(e,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,a=r.initMergeProps,o=Wr(r,Bi),i=t(e,o),l=n(e,o),d=a(e,o),p=o.pure?Ti:Oi;return p(i,l,d,e,o)}var Li=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function ot(e,r,t){for(var n=r.length-1;n>=0;n--){var a=r[n](e);if(a)return a}return function(o,i){throw new Error("Invalid value of type "+typeof e+" for "+t+" argument when connecting component "+i.wrappedComponentName+".")}}function Fi(e,r){return e===r}function zi(e){var r=e===void 0?{}:e,t=r.connectHOC,n=t===void 0?xi:t,a=r.mapStateToPropsFactories,o=a===void 0?Ei:a,i=r.mapDispatchToPropsFactories,l=i===void 0?Ii:i,d=r.mergePropsFactories,p=d===void 0?ki:d,g=r.selectorFactory,u=g===void 0?Mi:g;return function(f,v,C,h){h===void 0&&(h={});var b=h,N=b.pure,E=N===void 0?!0:N,S=b.areStatesEqual,k=S===void 0?Fi:S,D=b.areOwnPropsEqual,T=D===void 0?at:D,L=b.areStatePropsEqual,M=L===void 0?at:L,U=b.areMergedPropsEqual,H=U===void 0?at:U,X=Wr(b,Li),y=ot(f,o,"mapStateToProps"),z=ot(v,l,"mapDispatchToProps"),te=ot(C,p,"mergeProps");return n(u,$({methodName:"connect",getDisplayName:function(le){return"Connect("+le+")"},shouldHandleStateChanges:!!f,initMapStateToProps:y,initMapDispatchToProps:z,initMergeProps:te,pure:E,areStatesEqual:k,areOwnPropsEqual:T,areStatePropsEqual:M,areMergedPropsEqual:H},X))}}const ra=zi();ai(fo.unstable_batchedUpdates);function Gi(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function ta(e,r){var t=I.useState(function(){return{inputs:r,result:e()}})[0],n=I.useRef(!0),a=I.useRef(t),o=n.current||!!(r&&a.current.inputs&&Gi(r,a.current.inputs)),i=o?a.current:{inputs:r,result:e()};return I.useEffect(function(){n.current=!1,a.current=i},[i]),i.result}function Wi(e,r){return ta(function(){return e},r)}var _=ta,G=Wi,Hi="Invariant failed";function $i(e,r){throw new Error(Hi)}var Ge=function(r){var t=r.top,n=r.right,a=r.bottom,o=r.left,i=n-o,l=a-t,d={top:t,right:n,bottom:a,left:o,width:i,height:l,x:o,y:t,center:{x:(n+o)/2,y:(a+t)/2}};return d},St=function(r,t){return{top:r.top-t.top,left:r.left-t.left,bottom:r.bottom+t.bottom,right:r.right+t.right}},yn=function(r,t){return{top:r.top+t.top,left:r.left+t.left,bottom:r.bottom-t.bottom,right:r.right-t.right}},Ui=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},it={top:0,right:0,bottom:0,left:0},It=function(r){var t=r.borderBox,n=r.margin,a=n===void 0?it:n,o=r.border,i=o===void 0?it:o,l=r.padding,d=l===void 0?it:l,p=Ge(St(t,a)),g=Ge(yn(t,i)),u=Ge(yn(g,d));return{marginBox:p,borderBox:Ge(t),paddingBox:g,contentBox:u,margin:a,border:i,padding:d}},Be=function(r){var t=r.slice(0,-2),n=r.slice(-2);if(n!=="px")return 0;var a=Number(t);return isNaN(a)&&$i(),a},Vi=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Hr=function(r,t){var n=r.borderBox,a=r.border,o=r.margin,i=r.padding,l=Ui(n,t);return It({borderBox:l,border:a,margin:o,padding:i})},$r=function(r,t){return t===void 0&&(t=Vi()),Hr(r,t)},na=function(r,t){var n={top:Be(t.marginTop),right:Be(t.marginRight),bottom:Be(t.marginBottom),left:Be(t.marginLeft)},a={top:Be(t.paddingTop),right:Be(t.paddingRight),bottom:Be(t.paddingBottom),left:Be(t.paddingLeft)},o={top:Be(t.borderTopWidth),right:Be(t.borderRightWidth),bottom:Be(t.borderBottomWidth),left:Be(t.borderLeftWidth)};return It({borderBox:r,margin:n,padding:a,border:o})},aa=function(r){var t=r.getBoundingClientRect(),n=window.getComputedStyle(r);return na(t,n)},wn=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function qi(e,r){return!!(e===r||wn(e)&&wn(r))}function Ki(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!qi(e[t],r[t]))return!1;return!0}function fe(e,r){r===void 0&&(r=Ki);var t,n=[],a,o=!1;function i(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return o&&t===this&&r(l,n)||(a=e.apply(this,l),o=!0,t=this,n=l),a}return i}var Ir=function(r){var t=[],n=null,a=function(){for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];t=l,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function oa(e,r){}oa.bind(null,"warn");oa.bind(null,"error");function Ye(){}function Yi(e,r){return $({},e,{},r)}function Oe(e,r,t){var n=r.map(function(a){var o=Yi(t,a.options);return e.addEventListener(a.eventName,a.fn,o),function(){e.removeEventListener(a.eventName,a.fn,o)}});return function(){n.forEach(function(o){o()})}}var Ji="Invariant failed";function Ur(e){this.message=e}Ur.prototype.toString=function(){return this.message};function j(e,r){throw new Ur(Ji)}var Xi=function(e){Jn(r,e);function r(){for(var n,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,n.callbacks=null,n.unbind=Ye,n.onWindowError=function(l){var d=n.getCallbacks();d.isDragging()&&d.tryAbort();var p=l.error;p instanceof Ur&&l.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(l){n.callbacks=l},n}var t=r.prototype;return t.componentDidMount=function(){this.unbind=Oe(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(a){if(a instanceof Ur){this.setState({});return}throw a},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r}(ie.Component),Qi=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Vr=function(r){return r+1},Zi=function(r){return`
  You have lifted an item in position `+Vr(r.source.index)+`
`},ia=function(r,t){var n=r.droppableId===t.droppableId,a=Vr(r.index),o=Vr(t.index);return n?`
      You have moved the item from position `+a+`
      to position `+o+`
    `:`
    You have moved the item from position `+a+`
    in list `+r.droppableId+`
    to list `+t.droppableId+`
    in position `+o+`
  `},la=function(r,t,n){var a=t.droppableId===n.droppableId;return a?`
      The item `+r+`
      has been combined with `+n.draggableId:`
      The item `+r+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},_i=function(r){var t=r.destination;if(t)return ia(r.source,t);var n=r.combine;return n?la(r.draggableId,r.source,n):"You are over an area that cannot be dropped on"},Cn=function(r){return`
  The item has returned to its starting position
  of `+Vr(r.index)+`
`},el=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+Cn(r.source)+`
    `;var t=r.destination,n=r.combine;return t?`
      You have dropped the item.
      `+ia(r.source,t)+`
    `:n?`
      You have dropped the item.
      `+la(r.draggableId,r.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Cn(r.source)+`
  `},Gr={dragHandleUsageInstructions:Qi,onDragStart:Zi,onDragUpdate:_i,onDragEnd:el},ve={x:0,y:0},be=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},De=function(r,t){return{x:r.x-t.x,y:r.y-t.y}},Je=function(r,t){return r.x===t.x&&r.y===t.y},lr=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},rr=function(r,t,n){var a;return n===void 0&&(n=0),a={},a[r]=t,a[r==="x"?"y":"x"]=n,a},Nr=function(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},Sn=function(r,t){return Math.min.apply(Math,t.map(function(n){return Nr(r,n)}))},sa=function(r){return function(t){return{x:r(t.x),y:r(t.y)}}},rl=function(e,r){var t=Ge({top:Math.max(r.top,e.top),right:Math.min(r.right,e.right),bottom:Math.min(r.bottom,e.bottom),left:Math.max(r.left,e.left)});return t.width<=0||t.height<=0?null:t},Ar=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},In=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},tl={top:0,right:0,bottom:0,left:0},nl=function(r,t){return t?Ar(r,t.scroll.diff.displacement):r},al=function(r,t,n){if(n&&n.increasedBy){var a;return $({},r,(a={},a[t.end]=r[t.end]+n.increasedBy[t.line],a))}return r},ol=function(r,t){return t&&t.shouldClipSubject?rl(t.pageMarginBox,r):Ge(r)},ar=function(e){var r=e.page,t=e.withPlaceholder,n=e.axis,a=e.frame,o=nl(r.marginBox,a),i=al(o,n,t),l=ol(i,a);return{page:r,withPlaceholder:t,active:l}},Nt=function(e,r){e.frame||j();var t=e.frame,n=De(r,t.scroll.initial),a=lr(n),o=$({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:a},max:t.scroll.max}}),i=ar({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o}),l=$({},e,{frame:o,subject:i});return l};function qr(e){return Object.values?Object.values(e):Object.keys(e).map(function(r){return e[r]})}function Dt(e,r){if(e.findIndex)return e.findIndex(r);for(var t=0;t<e.length;t++)if(r(e[t]))return t;return-1}function Ze(e,r){if(e.find)return e.find(r);var t=Dt(e,r);if(t!==-1)return e[t]}function ca(e){return Array.prototype.slice.call(e)}var da=fe(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),ua=fe(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),Xr=fe(function(e){return qr(e)}),il=fe(function(e){return qr(e)}),sr=fe(function(e,r){var t=il(r).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return t});function Et(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Qr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Zr=fe(function(e,r){return r.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),ll=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,a=e.insideDestination,o=e.previousImpact;if(!n.isCombineEnabled)return null;var i=Et(o);if(!i)return null;function l(C){var h={type:"COMBINE",combine:{draggableId:C,droppableId:n.descriptor.id}};return $({},o,{at:h})}var d=o.displaced.all,p=d.length?d[0]:null;if(r)return p?l(p):null;var g=Zr(t,a);if(!p){if(!g.length)return null;var u=g[g.length-1];return l(u.descriptor.id)}var c=Dt(g,function(C){return C.descriptor.id===p});c===-1&&j();var f=c-1;if(f<0)return null;var v=g[f];return l(v.descriptor.id)},cr=function(e,r){return e.descriptor.droppableId===r.descriptor.id},pa={point:ve,value:0},Dr={invisible:{},visible:{},all:[]},sl={displaced:Dr,displacedBy:pa,at:null},Te=function(e,r){return function(t){return e<=t&&t<=r}},ga=function(e){var r=Te(e.top,e.bottom),t=Te(e.left,e.right);return function(n){var a=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);if(a)return!0;var o=r(n.top)||r(n.bottom),i=t(n.left)||t(n.right),l=o&&i;if(l)return!0;var d=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,g=d&&p;if(g)return!0;var u=d&&i||p&&o;return u}},cl=function(e){var r=Te(e.top,e.bottom),t=Te(e.left,e.right);return function(n){var a=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);return a}},Pt={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},fa={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},dl=function(e){return function(r){var t=Te(r.top,r.bottom),n=Te(r.left,r.right);return function(a){return e===Pt?t(a.top)&&t(a.bottom):n(a.left)&&n(a.right)}}},ul=function(r,t){var n=t.frame?t.frame.scroll.diff.displacement:ve;return Ar(r,n)},pl=function(r,t,n){return t.subject.active?n(t.subject.active)(r):!1},gl=function(r,t,n){return n(t)(r)},At=function(r){var t=r.target,n=r.destination,a=r.viewport,o=r.withDroppableDisplacement,i=r.isVisibleThroughFrameFn,l=o?ul(t,n):t;return pl(l,n,i)&&gl(l,a,i)},fl=function(r){return At($({},r,{isVisibleThroughFrameFn:ga}))},va=function(r){return At($({},r,{isVisibleThroughFrameFn:cl}))},vl=function(r){return At($({},r,{isVisibleThroughFrameFn:dl(r.destination.axis)}))},ml=function(r,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var a=t.invisible,o=t.visible;if(a[r])return!1;var i=o[r];return i?i.shouldAnimate:!0};function hl(e,r){var t=e.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return Ge(St(t,n))}function Er(e){var r=e.afterDragging,t=e.destination,n=e.displacedBy,a=e.viewport,o=e.forceShouldAnimate,i=e.last;return r.reduce(function(d,p){var g=hl(p,n),u=p.descriptor.id;d.all.push(u);var c=fl({target:g,destination:t,viewport:a,withDroppableDisplacement:!0});if(!c)return d.invisible[p.descriptor.id]=!0,d;var f=ml(u,i,o),v={draggableId:u,shouldAnimate:f};return d.visible[u]=v,d},{all:[],visible:{},invisible:{}})}function bl(e,r){if(!e.length)return 0;var t=e[e.length-1].descriptor.index;return r.inHomeList?t:t+1}function Nn(e){var r=e.insideDestination,t=e.inHomeList,n=e.displacedBy,a=e.destination,o=bl(r,{inHomeList:t});return{displaced:Dr,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:o}}}}function Kr(e){var r=e.draggable,t=e.insideDestination,n=e.destination,a=e.viewport,o=e.displacedBy,i=e.last,l=e.index,d=e.forceShouldAnimate,p=cr(r,n);if(l==null)return Nn({insideDestination:t,inHomeList:p,displacedBy:o,destination:n});var g=Ze(t,function(C){return C.descriptor.index===l});if(!g)return Nn({insideDestination:t,inHomeList:p,displacedBy:o,destination:n});var u=Zr(r,t),c=t.indexOf(g),f=u.slice(c),v=Er({afterDragging:f,destination:n,displacedBy:o,last:i,viewport:a.frame,forceShouldAnimate:d});return{displaced:v,displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function Qe(e,r){return!!r.effected[e]}var xl=function(e){var r=e.isMovingForward,t=e.destination,n=e.draggables,a=e.combine,o=e.afterCritical;if(!t.isCombineEnabled)return null;var i=a.draggableId,l=n[i],d=l.descriptor.index,p=Qe(i,o);return p?r?d:d-1:r?d+1:d},yl=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var o=a.index,i=r?o+1:o-1,l=n[0].descriptor.index,d=n[n.length-1].descriptor.index,p=t?d:d+1;return i<l||i>p?null:i},wl=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.draggable,a=e.draggables,o=e.destination,i=e.insideDestination,l=e.previousImpact,d=e.viewport,p=e.afterCritical,g=l.at;if(g||j(),g.type==="REORDER"){var u=yl({isMovingForward:r,isInHomeList:t,location:g.destination,insideDestination:i});return u==null?null:Kr({draggable:n,insideDestination:i,destination:o,viewport:d,last:l.displaced,displacedBy:l.displacedBy,index:u})}var c=xl({isMovingForward:r,destination:o,displaced:l.displaced,draggables:a,combine:g.combine,afterCritical:p});return c==null?null:Kr({draggable:n,insideDestination:i,destination:o,viewport:d,last:l.displaced,displacedBy:l.displacedBy,index:c})},Cl=function(e){var r=e.displaced,t=e.afterCritical,n=e.combineWith,a=e.displacedBy,o=!!(r.visible[n]||r.invisible[n]);return Qe(n,t)?o?ve:lr(a.point):o?a.point:ve},Sl=function(e){var r=e.afterCritical,t=e.impact,n=e.draggables,a=Qr(t);a||j();var o=a.draggableId,i=n[o].page.borderBox.center,l=Cl({displaced:t.displaced,afterCritical:r,combineWith:o,displacedBy:t.displacedBy});return be(i,l)},ma=function(r,t){return t.margin[r.start]+t.borderBox[r.size]/2},Il=function(r,t){return t.margin[r.end]+t.borderBox[r.size]/2},jt=function(r,t,n){return t[r.crossAxisStart]+n.margin[r.crossAxisStart]+n.borderBox[r.crossAxisSize]/2},Dn=function(r){var t=r.axis,n=r.moveRelativeTo,a=r.isMoving;return rr(t.line,n.marginBox[t.end]+ma(t,a),jt(t,n.marginBox,a))},En=function(r){var t=r.axis,n=r.moveRelativeTo,a=r.isMoving;return rr(t.line,n.marginBox[t.start]-Il(t,a),jt(t,n.marginBox,a))},Nl=function(r){var t=r.axis,n=r.moveInto,a=r.isMoving;return rr(t.line,n.contentBox[t.start]+ma(t,a),jt(t,n.contentBox,a))},Dl=function(e){var r=e.impact,t=e.draggable,n=e.draggables,a=e.droppable,o=e.afterCritical,i=sr(a.descriptor.id,n),l=t.page,d=a.axis;if(!i.length)return Nl({axis:d,moveInto:a.page,isMoving:l});var p=r.displaced,g=r.displacedBy,u=p.all[0];if(u){var c=n[u];if(Qe(u,o))return En({axis:d,moveRelativeTo:c.page,isMoving:l});var f=Hr(c.page,g.point);return En({axis:d,moveRelativeTo:f,isMoving:l})}var v=i[i.length-1];if(v.descriptor.id===t.descriptor.id)return l.borderBox.center;if(Qe(v.descriptor.id,o)){var C=Hr(v.page,lr(o.displacedBy.point));return Dn({axis:d,moveRelativeTo:C,isMoving:l})}return Dn({axis:d,moveRelativeTo:v.page,isMoving:l})},mt=function(e,r){var t=e.frame;return t?be(r,t.scroll.diff.displacement):r},El=function(r){var t=r.impact,n=r.draggable,a=r.droppable,o=r.draggables,i=r.afterCritical,l=n.page.borderBox.center,d=t.at;return!a||!d?l:d.type==="REORDER"?Dl({impact:t,draggable:n,draggables:o,droppable:a,afterCritical:i}):Sl({impact:t,draggables:o,afterCritical:i})},_r=function(e){var r=El(e),t=e.droppable,n=t?mt(t,r):r;return n},ha=function(e,r){var t=De(r,e.scroll.initial),n=lr(t),a=Ge({top:r.y,bottom:r.y+e.frame.height,left:r.x,right:r.x+e.frame.width}),o={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:r,diff:{value:t,displacement:n}}};return o};function Pn(e,r){return e.map(function(t){return r[t]})}function Pl(e,r){for(var t=0;t<r.length;t++){var n=r[t].visible[e];if(n)return n}return null}var Al=function(e){var r=e.impact,t=e.viewport,n=e.destination,a=e.draggables,o=e.maxScrollChange,i=ha(t,be(t.scroll.current,o)),l=n.frame?Nt(n,be(n.frame.scroll.current,o)):n,d=r.displaced,p=Er({afterDragging:Pn(d.all,a),destination:n,displacedBy:r.displacedBy,viewport:i.frame,last:d,forceShouldAnimate:!1}),g=Er({afterDragging:Pn(d.all,a),destination:l,displacedBy:r.displacedBy,viewport:t.frame,last:d,forceShouldAnimate:!1}),u={},c={},f=[d,p,g];d.all.forEach(function(C){var h=Pl(C,f);if(h){c[C]=h;return}u[C]=!0});var v=$({},r,{displaced:{all:d.all,invisible:u,visible:c}});return v},jl=function(e,r){return be(e.scroll.diff.displacement,r)},Rt=function(e){var r=e.pageBorderBoxCenter,t=e.draggable,n=e.viewport,a=jl(n,r),o=De(a,t.page.borderBox.center);return be(t.client.borderBox.center,o)},ba=function(e){var r=e.draggable,t=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,o=e.withDroppableDisplacement,i=e.onlyOnMainAxis,l=i===void 0?!1:i,d=De(n,r.page.borderBox.center),p=Ar(r.page.borderBox,d),g={target:p,destination:t,withDroppableDisplacement:o,viewport:a};return l?vl(g):va(g)},Rl=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,a=e.draggables,o=e.previousImpact,i=e.viewport,l=e.previousPageBorderBoxCenter,d=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var g=sr(n.descriptor.id,a),u=cr(t,n),c=ll({isMovingForward:r,draggable:t,destination:n,insideDestination:g,previousImpact:o})||wl({isMovingForward:r,isInHomeList:u,draggable:t,draggables:a,destination:n,insideDestination:g,previousImpact:o,viewport:i,afterCritical:p});if(!c)return null;var f=_r({impact:c,draggable:t,droppable:n,draggables:a,afterCritical:p}),v=ba({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var C=Rt({pageBorderBoxCenter:f,draggable:t,viewport:i});return{clientSelection:C,impact:c,scrollJumpRequest:null}}var h=De(f,l),b=Al({impact:c,viewport:i,destination:n,draggables:a,maxScrollChange:h});return{clientSelection:d,impact:b,scrollJumpRequest:h}},Ce=function(r){var t=r.subject.active;return t||j(),t},kl=function(e){var r=e.isMovingForward,t=e.pageBorderBoxCenter,n=e.source,a=e.droppables,o=e.viewport,i=n.subject.active;if(!i)return null;var l=n.axis,d=Te(i[l.start],i[l.end]),p=Xr(a).filter(function(u){return u!==n}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return ga(o.frame)(Ce(u))}).filter(function(u){var c=Ce(u);return r?i[l.crossAxisEnd]<c[l.crossAxisEnd]:c[l.crossAxisStart]<i[l.crossAxisStart]}).filter(function(u){var c=Ce(u),f=Te(c[l.start],c[l.end]);return d(c[l.start])||d(c[l.end])||f(i[l.start])||f(i[l.end])}).sort(function(u,c){var f=Ce(u)[l.crossAxisStart],v=Ce(c)[l.crossAxisStart];return r?f-v:v-f}).filter(function(u,c,f){return Ce(u)[l.crossAxisStart]===Ce(f[0])[l.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var g=p.filter(function(u){var c=Te(Ce(u)[l.start],Ce(u)[l.end]);return c(t[l.line])});return g.length===1?g[0]:g.length>1?g.sort(function(u,c){return Ce(u)[l.start]-Ce(c)[l.start]})[0]:p.sort(function(u,c){var f=Sn(t,In(Ce(u))),v=Sn(t,In(Ce(c)));return f!==v?f-v:Ce(u)[l.start]-Ce(c)[l.start]})[0]},An=function(r,t){var n=r.page.borderBox.center;return Qe(r.descriptor.id,t)?De(n,t.displacedBy.point):n},Bl=function(r,t){var n=r.page.borderBox;return Qe(r.descriptor.id,t)?Ar(n,lr(t.displacedBy.point)):n},Ol=function(e){var r=e.pageBorderBoxCenter,t=e.viewport,n=e.destination,a=e.insideDestination,o=e.afterCritical,i=a.filter(function(l){return va({target:Bl(l,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(l,d){var p=Nr(r,mt(n,An(l,o))),g=Nr(r,mt(n,An(d,o)));return p<g?-1:g<p?1:l.descriptor.index-d.descriptor.index});return i[0]||null},jr=fe(function(r,t){var n=t[r.line];return{value:n,point:rr(r.line,n)}}),Tl=function(r,t,n){var a=r.axis;if(r.descriptor.mode==="virtual")return rr(a.line,t[a.line]);var o=r.subject.page.contentBox[a.size],i=sr(r.descriptor.id,n),l=i.reduce(function(g,u){return g+u.client.marginBox[a.size]},0),d=l+t[a.line],p=d-o;return p<=0?null:rr(a.line,p)},xa=function(r,t){return $({},r,{scroll:$({},r.scroll,{max:t})})},ya=function(r,t,n){var a=r.frame;cr(t,r)&&j(),r.subject.withPlaceholder&&j();var o=jr(r.axis,t.displaceBy).point,i=Tl(r,o,n),l={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!a){var d=ar({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:r.frame});return $({},r,{subject:d})}var p=i?be(a.scroll.max,i):a.scroll.max,g=xa(a,p),u=ar({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:g});return $({},r,{subject:u,frame:g})},Ml=function(r){var t=r.subject.withPlaceholder;t||j();var n=r.frame;if(!n){var a=ar({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return $({},r,{subject:a})}var o=t.oldFrameMaxScroll;o||j();var i=xa(n,o),l=ar({page:r.subject.page,axis:r.axis,frame:i,withPlaceholder:null});return $({},r,{subject:l,frame:i})},Ll=function(e){var r=e.previousPageBorderBoxCenter,t=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,o=e.draggables,i=e.destination,l=e.viewport,d=e.afterCritical;if(!t){if(n.length)return null;var p={displaced:Dr,displacedBy:pa,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},g=_r({impact:p,draggable:a,droppable:i,draggables:o,afterCritical:d}),u=cr(a,i)?i:ya(i,a,o),c=ba({draggable:a,destination:u,newPageBorderBoxCenter:g,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return c?p:null}var f=r[i.axis.line]<=t.page.borderBox.center[i.axis.line],v=function(){var h=t.descriptor.index;return t.descriptor.id===a.descriptor.id||f?h:h+1}(),C=jr(i.axis,a.displaceBy);return Kr({draggable:a,insideDestination:n,destination:i,viewport:l,displacedBy:C,last:Dr,index:v})},Fl=function(e){var r=e.isMovingForward,t=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,o=e.draggables,i=e.droppables,l=e.viewport,d=e.afterCritical,p=kl({isMovingForward:r,pageBorderBoxCenter:t,source:a,droppables:i,viewport:l});if(!p)return null;var g=sr(p.descriptor.id,o),u=Ol({pageBorderBoxCenter:t,viewport:l,destination:p,insideDestination:g,afterCritical:d}),c=Ll({previousPageBorderBoxCenter:t,destination:p,draggable:n,draggables:o,moveRelativeTo:u,insideDestination:g,viewport:l,afterCritical:d});if(!c)return null;var f=_r({impact:c,draggable:n,droppable:p,draggables:o,afterCritical:d}),v=Rt({pageBorderBoxCenter:f,draggable:n,viewport:l});return{clientSelection:v,impact:c,scrollJumpRequest:null}},Ee=function(e){var r=e.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},zl=function(r,t){var n=Ee(r);return n?t[n]:null},Gl=function(e){var r=e.state,t=e.type,n=zl(r.impact,r.dimensions.droppables),a=!!n,o=r.dimensions.droppables[r.critical.droppable.id],i=n||o,l=i.axis.direction,d=l==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||l==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(d&&!a)return null;var p=t==="MOVE_DOWN"||t==="MOVE_RIGHT",g=r.dimensions.draggables[r.critical.draggable.id],u=r.current.page.borderBoxCenter,c=r.dimensions,f=c.draggables,v=c.droppables;return d?Rl({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:g,destination:i,draggables:f,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):Fl({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:g,isOver:i,draggables:f,droppables:v,viewport:r.viewport,afterCritical:r.afterCritical})};function er(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function wa(e){var r=Te(e.top,e.bottom),t=Te(e.left,e.right);return function(a){return r(a.y)&&t(a.x)}}function Wl(e,r){return e.left<r.right&&e.right>r.left&&e.top<r.bottom&&e.bottom>r.top}function Hl(e){var r=e.pageBorderBox,t=e.draggable,n=e.candidates,a=t.page.borderBox.center,o=n.map(function(i){var l=i.axis,d=rr(i.axis.line,r.center[l.line],i.page.borderBox.center[l.crossAxisLine]);return{id:i.descriptor.id,distance:Nr(a,d)}}).sort(function(i,l){return l.distance-i.distance});return o[0]?o[0].id:null}function $l(e){var r=e.pageBorderBox,t=e.draggable,n=e.droppables,a=Xr(n).filter(function(o){if(!o.isEnabled)return!1;var i=o.subject.active;if(!i||!Wl(r,i))return!1;if(wa(i)(r.center))return!0;var l=o.axis,d=i.center[l.crossAxisLine],p=r[l.crossAxisStart],g=r[l.crossAxisEnd],u=Te(i[l.crossAxisStart],i[l.crossAxisEnd]),c=u(p),f=u(g);return!c&&!f?!0:c?p<d:g>d});return a.length?a.length===1?a[0].descriptor.id:Hl({pageBorderBox:r,draggable:t,candidates:a}):null}var Ca=function(r,t){return Ge(Ar(r,t))},Ul=function(e,r){var t=e.frame;return t?Ca(r,t.scroll.diff.value):r};function Sa(e){var r=e.displaced,t=e.id;return!!(r.visible[t]||r.invisible[t])}function Vl(e){var r=e.draggable,t=e.closest,n=e.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var ql=function(e){var r=e.pageBorderBoxWithDroppableScroll,t=e.draggable,n=e.destination,a=e.insideDestination,o=e.last,i=e.viewport,l=e.afterCritical,d=n.axis,p=jr(n.axis,t.displaceBy),g=p.value,u=r[d.start],c=r[d.end],f=Zr(t,a),v=Ze(f,function(h){var b=h.descriptor.id,N=h.page.borderBox.center[d.line],E=Qe(b,l),S=Sa({displaced:o,id:b});return E?S?c<=N:u<N-g:S?c<=N+g:u<N}),C=Vl({draggable:t,closest:v,inHomeList:cr(t,n)});return Kr({draggable:t,insideDestination:a,destination:n,viewport:i,last:o,displacedBy:p,index:C})},Kl=4,Yl=function(e){var r=e.draggable,t=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,o=e.insideDestination,i=e.afterCritical;if(!a.isCombineEnabled)return null;var l=a.axis,d=jr(a.axis,r.displaceBy),p=d.value,g=t[l.start],u=t[l.end],c=Zr(r,o),f=Ze(c,function(C){var h=C.descriptor.id,b=C.page.borderBox,N=b[l.size],E=N/Kl,S=Qe(h,i),k=Sa({displaced:n.displaced,id:h});return S?k?u>b[l.start]+E&&u<b[l.end]-E:g>b[l.start]-p+E&&g<b[l.end]-p-E:k?u>b[l.start]+p+E&&u<b[l.end]+p-E:g>b[l.start]+E&&g<b[l.end]-E});if(!f)return null;var v={displacedBy:d,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:a.descriptor.id}}};return v},Ia=function(e){var r=e.pageOffset,t=e.draggable,n=e.draggables,a=e.droppables,o=e.previousImpact,i=e.viewport,l=e.afterCritical,d=Ca(t.page.borderBox,r),p=$l({pageBorderBox:d,draggable:t,droppables:a});if(!p)return sl;var g=a[p],u=sr(g.descriptor.id,n),c=Ul(g,d);return Yl({pageBorderBoxWithDroppableScroll:c,draggable:t,previousImpact:o,destination:g,insideDestination:u,afterCritical:l})||ql({pageBorderBoxWithDroppableScroll:c,draggable:t,destination:g,insideDestination:u,last:o.displaced,viewport:i,afterCritical:l})},kt=function(e,r){var t;return $({},e,(t={},t[r.descriptor.id]=r,t))},Jl=function(r){var t=r.previousImpact,n=r.impact,a=r.droppables,o=Ee(t),i=Ee(n);if(!o||o===i)return a;var l=a[o];if(!l.subject.withPlaceholder)return a;var d=Ml(l);return kt(a,d)},Xl=function(e){var r=e.draggable,t=e.draggables,n=e.droppables,a=e.previousImpact,o=e.impact,i=Jl({previousImpact:a,impact:o,droppables:n}),l=Ee(o);if(!l)return i;var d=n[l];if(cr(r,d)||d.subject.withPlaceholder)return i;var p=ya(d,r,t);return kt(i,p)},Cr=function(e){var r=e.state,t=e.clientSelection,n=e.dimensions,a=e.viewport,o=e.impact,i=e.scrollJumpRequest,l=a||r.viewport,d=n||r.dimensions,p=t||r.current.client.selection,g=De(p,r.initial.client.selection),u={offset:g,selection:p,borderBoxCenter:be(r.initial.client.borderBoxCenter,g)},c={selection:be(u.selection,l.scroll.current),borderBoxCenter:be(u.borderBoxCenter,l.scroll.current),offset:be(u.offset,l.scroll.diff.value)},f={client:u,page:c};if(r.phase==="COLLECTING")return $({phase:"COLLECTING"},r,{dimensions:d,viewport:l,current:f});var v=d.draggables[r.critical.draggable.id],C=o||Ia({pageOffset:c.offset,draggable:v,draggables:d.draggables,droppables:d.droppables,previousImpact:r.impact,viewport:l,afterCritical:r.afterCritical}),h=Xl({draggable:v,impact:C,previousImpact:r.impact,draggables:d.draggables,droppables:d.droppables}),b=$({},r,{current:f,dimensions:{draggables:d.draggables,droppables:h},impact:C,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null});return b};function Ql(e,r){return e.map(function(t){return r[t]})}var Na=function(e){var r=e.impact,t=e.viewport,n=e.draggables,a=e.destination,o=e.forceShouldAnimate,i=r.displaced,l=Ql(i.all,n),d=Er({afterDragging:l,destination:a,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:i});return $({},r,{displaced:d})},Da=function(e){var r=e.impact,t=e.draggable,n=e.droppable,a=e.draggables,o=e.viewport,i=e.afterCritical,l=_r({impact:r,draggable:t,draggables:a,droppable:n,afterCritical:i});return Rt({pageBorderBoxCenter:l,draggable:t,viewport:o})},Ea=function(e){var r=e.state,t=e.dimensions,n=e.viewport;r.movementMode!=="SNAP"&&j();var a=r.impact,o=n||r.viewport,i=t||r.dimensions,l=i.draggables,d=i.droppables,p=l[r.critical.draggable.id],g=Ee(a);g||j();var u=d[g],c=Na({impact:a,viewport:o,destination:u,draggables:l}),f=Da({impact:c,draggable:p,droppable:u,draggables:l,viewport:o,afterCritical:r.afterCritical});return Cr({impact:c,clientSelection:f,state:r,dimensions:i,viewport:o})},Zl=function(e){return{index:e.index,droppableId:e.droppableId}},Pa=function(e){var r=e.draggable,t=e.home,n=e.draggables,a=e.viewport,o=jr(t.axis,r.displaceBy),i=sr(t.descriptor.id,n),l=i.indexOf(r);l===-1&&j();var d=i.slice(l+1),p=d.reduce(function(f,v){return f[v.descriptor.id]=!0,f},{}),g={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:p},u=Er({afterDragging:d,destination:t,displacedBy:o,last:null,viewport:a.frame,forceShouldAnimate:!1}),c={displaced:u,displacedBy:o,at:{type:"REORDER",destination:Zl(r.descriptor)}};return{impact:c,afterCritical:g}},_l=function(e,r){return{draggables:e.draggables,droppables:kt(e.droppables,r)}},es=function(e){var r=e.draggable,t=e.offset,n=e.initialWindowScroll,a=Hr(r.client,t),o=$r(a,n),i=$({},r,{placeholder:$({},r.placeholder,{client:a}),client:a,page:o});return i},rs=function(e){var r=e.frame;return r||j(),r},ts=function(e){var r=e.additions,t=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return r.map(function(o){var i=o.descriptor.droppableId,l=t[i],d=rs(l),p=d.scroll.diff.value,g=be(a,p),u=es({draggable:o,offset:g,initialWindowScroll:n.scroll.initial});return u})},ns=function(e){var r=e.state,t=e.published,n=t.modified.map(function(E){var S=r.dimensions.droppables[E.droppableId],k=Nt(S,E.scroll);return k}),a=$({},r.dimensions.droppables,{},da(n)),o=ua(ts({additions:t.additions,updatedDroppables:a,viewport:r.viewport})),i=$({},r.dimensions.draggables,{},o);t.removals.forEach(function(E){delete i[E]});var l={droppables:a,draggables:i},d=Ee(r.impact),p=d?l.droppables[d]:null,g=l.draggables[r.critical.draggable.id],u=l.droppables[r.critical.droppable.id],c=Pa({draggable:g,home:u,draggables:i,viewport:r.viewport}),f=c.impact,v=c.afterCritical,C=p&&p.isCombineEnabled?r.impact:f,h=Ia({pageOffset:r.current.page.offset,draggable:l.draggables[r.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:C,viewport:r.viewport,afterCritical:v}),b=$({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:h,onLiftImpact:f,dimensions:l,afterCritical:v,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return b;var N=$({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return N},ht=function(r){return r.movementMode==="SNAP"},lt=function(r,t,n){var a=_l(r.dimensions,t);return!ht(r)||n?Cr({state:r,dimensions:a}):Ea({state:r,dimensions:a})};function st(e){return e.isDragging&&e.movementMode==="SNAP"?$({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var jn={phase:"IDLE",completed:null,shouldFlush:!1},as=function(e,r){if(e===void 0&&(e=jn),r.type==="FLUSH")return $({},jn,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&j();var t=r.payload,n=t.critical,a=t.clientSelection,o=t.viewport,i=t.dimensions,l=t.movementMode,d=i.draggables[n.draggable.id],p=i.droppables[n.droppable.id],g={selection:a,borderBoxCenter:d.client.borderBox.center,offset:ve},u={client:g,page:{selection:be(g.selection,o.scroll.initial),borderBoxCenter:be(g.selection,o.scroll.initial),offset:be(g.selection,o.scroll.diff.value)}},c=Xr(i.droppables).every(function(Re){return!Re.isFixedOnPage}),f=Pa({draggable:d,home:p,draggables:i.draggables,viewport:o}),v=f.impact,C=f.afterCritical,h={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:i,initial:u,current:u,isWindowScrollAllowed:c,impact:v,afterCritical:C,onLiftImpact:v,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null};return h}if(r.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&j();var b=$({phase:"COLLECTING"},e,{phase:"COLLECTING"});return b}if(r.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||j(),ns({state:e,published:r.payload});if(r.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;er(e)||j();var N=r.payload.client;return Je(N,e.current.client.selection)?e:Cr({state:e,clientSelection:N,impact:ht(e)?e.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return st(e);er(e)||j();var E=r.payload,S=E.id,k=E.newScroll,D=e.dimensions.droppables[S];if(!D)return e;var T=Nt(D,k);return lt(e,T,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;er(e)||j();var L=r.payload,M=L.id,U=L.isEnabled,H=e.dimensions.droppables[M];H||j(),H.isEnabled===U&&j();var X=$({},H,{isEnabled:U});return lt(e,X,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;er(e)||j();var y=r.payload,z=y.id,te=y.isCombineEnabled,B=e.dimensions.droppables[z];B||j(),B.isCombineEnabled===te&&j();var le=$({},B,{isCombineEnabled:te});return lt(e,le,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;er(e)||j(),e.isWindowScrollAllowed||j();var ce=r.payload.newScroll;if(Je(e.viewport.scroll.current,ce))return st(e);var J=ha(e.viewport,ce);return ht(e)?Ea({state:e,viewport:J}):Cr({state:e,viewport:J})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!er(e))return e;var Q=r.payload.maxScroll;if(Je(Q,e.viewport.scroll.max))return e;var ue=$({},e.viewport,{scroll:$({},e.viewport.scroll,{max:Q})});return $({phase:"DRAGGING"},e,{viewport:ue})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&j();var ee=Gl({state:e,type:r.type});return ee?Cr({state:e,impact:ee.impact,clientSelection:ee.clientSelection,scrollJumpRequest:ee.scrollJumpRequest}):e}if(r.type==="DROP_PENDING"){var me=r.payload.reason;e.phase!=="COLLECTING"&&j();var Ae=$({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:me});return Ae}if(r.type==="DROP_ANIMATE"){var ye=r.payload,Me=ye.completed,Ie=ye.dropDuration,je=ye.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||j();var Le={phase:"DROP_ANIMATING",completed:Me,dropDuration:Ie,newHomeClientOffset:je,dimensions:e.dimensions};return Le}if(r.type==="DROP_COMPLETE"){var we=r.payload.completed;return{phase:"IDLE",completed:we,shouldFlush:!1}}return e},os=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},is=function(r){return{type:"LIFT",payload:r}},ls=function(r){return{type:"INITIAL_PUBLISH",payload:r}},ss=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},cs=function(){return{type:"COLLECTION_STARTING",payload:null}},ds=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},us=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},ps=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},Aa=function(r){return{type:"MOVE",payload:r}},gs=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},fs=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},vs=function(){return{type:"MOVE_UP",payload:null}},ms=function(){return{type:"MOVE_DOWN",payload:null}},hs=function(){return{type:"MOVE_RIGHT",payload:null}},bs=function(){return{type:"MOVE_LEFT",payload:null}},Bt=function(){return{type:"FLUSH",payload:null}},xs=function(r){return{type:"DROP_ANIMATE",payload:r}},Ot=function(r){return{type:"DROP_COMPLETE",payload:r}},ja=function(r){return{type:"DROP",payload:r}},ys=function(r){return{type:"DROP_PENDING",payload:r}},Ra=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},ws=function(e){return function(r){var t=r.getState,n=r.dispatch;return function(a){return function(o){if(o.type!=="LIFT"){a(o);return}var i=o.payload,l=i.id,d=i.clientSelection,p=i.movementMode,g=t();g.phase==="DROP_ANIMATING"&&n(Ot({completed:g.completed})),t().phase!=="IDLE"&&j(),n(Bt()),n(os({draggableId:l,movementMode:p}));var u={shouldPublishImmediately:p==="SNAP"},c={draggableId:l,scrollOptions:u},f=e.startPublishing(c),v=f.critical,C=f.dimensions,h=f.viewport;n(ls({critical:v,dimensions:C,clientSelection:d,movementMode:p,viewport:h}))}}}},Cs=function(e){return function(){return function(r){return function(t){t.type==="INITIAL_PUBLISH"&&e.dragging(),t.type==="DROP_ANIMATE"&&e.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&e.resting(),r(t)}}}},Tt={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Pr={opacity:{drop:0,combining:.7},scale:{drop:.75}},Mt={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},_e=Mt.outOfTheWay+"s "+Tt.outOfTheWay,Sr={fluid:"opacity "+_e,snap:"transform "+_e+", opacity "+_e,drop:function(r){var t=r+"s "+Tt.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+_e,placeholder:"height "+_e+", width "+_e+", margin "+_e},Rn=function(r){return Je(r,ve)?null:"translate("+r.x+"px, "+r.y+"px)"},bt={moveTo:Rn,drop:function(r,t){var n=Rn(r);return n?t?n+" scale("+Pr.scale.drop+")":n:null}},xt=Mt.minDropTime,ka=Mt.maxDropTime,Ss=ka-xt,kn=1500,Is=.6,Ns=function(e){var r=e.current,t=e.destination,n=e.reason,a=Nr(r,t);if(a<=0)return xt;if(a>=kn)return ka;var o=a/kn,i=xt+Ss*o,l=n==="CANCEL"?i*Is:i;return Number(l.toFixed(2))},Ds=function(e){var r=e.impact,t=e.draggable,n=e.dimensions,a=e.viewport,o=e.afterCritical,i=n.draggables,l=n.droppables,d=Ee(r),p=d?l[d]:null,g=l[t.descriptor.droppableId],u=Da({impact:r,draggable:t,draggables:i,afterCritical:o,droppable:p||g,viewport:a}),c=De(u,t.client.borderBox.center);return c},Es=function(e){var r=e.draggables,t=e.reason,n=e.lastImpact,a=e.home,o=e.viewport,i=e.onLiftImpact;if(!n.at||t!=="DROP"){var l=Na({draggables:r,impact:i,destination:a,viewport:o,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var d=$({},n,{displaced:Dr});return{impact:d,didDropInsideDroppable:!0}},Ps=function(e){var r=e.getState,t=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var o=r(),i=a.payload.reason;if(o.phase==="COLLECTING"){t(ys({reason:i}));return}if(o.phase!=="IDLE"){var l=o.phase==="DROP_PENDING"&&o.isWaiting;l&&j(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||j();var d=o.critical,p=o.dimensions,g=p.draggables[o.critical.draggable.id],u=Es({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),c=u.impact,f=u.didDropInsideDroppable,v=f?Et(c):null,C=f?Qr(c):null,h={index:d.draggable.index,droppableId:d.droppable.id},b={draggableId:g.descriptor.id,type:g.descriptor.type,source:h,reason:i,mode:o.movementMode,destination:v,combine:C},N=Ds({impact:c,draggable:g,dimensions:p,viewport:o.viewport,afterCritical:o.afterCritical}),E={critical:o.critical,afterCritical:o.afterCritical,result:b,impact:c},S=!Je(o.current.client.offset,N)||!!b.combine;if(!S){t(Ot({completed:E}));return}var k=Ns({current:o.current.client.offset,destination:N,reason:i}),D={newHomeClientOffset:N,dropDuration:k,completed:E};t(xs(D))}}}},Ba=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function As(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function js(e){var r=e.onWindowScroll;function t(){r(Ba())}var n=Ir(t),a=As(n),o=Ye;function i(){return o!==Ye}function l(){i()&&j(),o=Oe(window,[a])}function d(){i()||j(),n.cancel(),o(),o=Ye}return{start:l,stop:d,isActive:i}}var Rs=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},ks=function(e){var r=js({onWindowScroll:function(n){e.dispatch(gs({newScroll:n}))}});return function(t){return function(n){!r.isActive()&&n.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&Rs(n)&&r.stop(),t(n)}}},Bs=function(e){var r=!1,t=!1,n=setTimeout(function(){t=!0}),a=function(i){r||t||(r=!0,e(i),clearTimeout(n))};return a.wasCalled=function(){return r},a},Os=function(){var e=[],r=function(o){var i=Dt(e,function(p){return p.timerId===o});i===-1&&j();var l=e.splice(i,1),d=l[0];d.callback()},t=function(o){var i=setTimeout(function(){return r(i)}),l={timerId:i,callback:o};e.push(l)},n=function(){if(e.length){var o=[].concat(e);e.length=0,o.forEach(function(i){clearTimeout(i.timerId),i.callback()})}};return{add:t,flush:n}},Ts=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.droppableId===t.droppableId&&r.index===t.index},Ms=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.draggableId===t.draggableId&&r.droppableId===t.droppableId},Ls=function(r,t){if(r===t)return!0;var n=r.draggable.id===t.draggable.id&&r.draggable.droppableId===t.draggable.droppableId&&r.draggable.type===t.draggable.type&&r.draggable.index===t.draggable.index,a=r.droppable.id===t.droppable.id&&r.droppable.type===t.droppable.type;return n&&a},br=function(r,t){t()},Tr=function(r,t){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:t}},ct=function(r,t,n,a){if(!r){n(a(t));return}var o=Bs(n),i={announce:o};r(t,i),o.wasCalled()||n(a(t))},Fs=function(e,r){var t=Os(),n=null,a=function(c,f){n&&j(),br("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var C={draggableId:c,mode:f};v(C)}})},o=function(c,f){n&&j(),br("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(Tr(c,f))})},i=function(c,f){n&&j();var v=Tr(c,f);n={mode:f,lastCritical:c,lastLocation:v.source,lastCombine:null},t.add(function(){br("onDragStart",function(){return ct(e().onDragStart,v,r,Gr.onDragStart)})})},l=function(c,f){var v=Et(f),C=Qr(f);n||j();var h=!Ls(c,n.lastCritical);h&&(n.lastCritical=c);var b=!Ts(n.lastLocation,v);b&&(n.lastLocation=v);var N=!Ms(n.lastCombine,C);if(N&&(n.lastCombine=C),!(!h&&!b&&!N)){var E=$({},Tr(c,n.mode),{combine:C,destination:v});t.add(function(){br("onDragUpdate",function(){return ct(e().onDragUpdate,E,r,Gr.onDragUpdate)})})}},d=function(){n||j(),t.flush()},p=function(c){n||j(),n=null,br("onDragEnd",function(){return ct(e().onDragEnd,c,r,Gr.onDragEnd)})},g=function(){if(n){var c=$({},Tr(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(c)}};return{beforeCapture:a,beforeStart:o,start:i,update:l,flush:d,drop:p,abort:g}},zs=function(e,r){var t=Fs(e,r);return function(n){return function(a){return function(o){if(o.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){var i=o.payload.critical;t.beforeStart(i,o.payload.movementMode),a(o),t.start(i,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){var l=o.payload.completed.result;t.flush(),a(o),t.drop(l);return}if(a(o),o.type==="FLUSH"){t.abort();return}var d=n.getState();d.phase==="DRAGGING"&&t.update(d.critical,d.impact)}}}},Gs=function(e){return function(r){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){r(t);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&j(),e.dispatch(Ot({completed:n.completed}))}}},Ws=function(e){var r=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)}return function(a){return function(o){if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),a(o),o.type==="DROP_ANIMATE"){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var d=e.getState();d.phase==="DROP_ANIMATING"&&e.dispatch(Ra())}};t=requestAnimationFrame(function(){t=null,r=Oe(window,[i])})}}}},Hs=function(e){return function(){return function(r){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&e.stopPublishing(),r(t)}}}},$s=function(e){var r=!1;return function(){return function(t){return function(n){if(n.type==="INITIAL_PUBLISH"){r=!0,e.tryRecordFocus(n.payload.critical.draggable.id),t(n),e.tryRestoreFocusRecorded();return}if(t(n),!!r){if(n.type==="FLUSH"){r=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){r=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Us=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},Vs=function(e){return function(r){return function(t){return function(n){if(Us(n)){e.stop(),t(n);return}if(n.type==="INITIAL_PUBLISH"){t(n);var a=r.getState();a.phase!=="DRAGGING"&&j(),e.start(a);return}t(n),e.scroll(r.getState())}}}},qs=function(e){return function(r){return function(t){if(r(t),t.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(ja({reason:n.reason})))}}}},Ks=ao,Ys=function(e){var r=e.dimensionMarshal,t=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,o=e.announce,i=e.autoScroller;return no(as,Ks(oo(Cs(n),Hs(r),ws(r),Ps,Gs,Ws,qs,Vs(i),ks,$s(t),zs(a,o))))},dt=function(){return{additions:{},removals:{},modified:{}}};function Js(e){var r=e.registry,t=e.callbacks,n=dt(),a=null,o=function(){a||(t.collectionStarting(),a=requestAnimationFrame(function(){a=null;var g=n,u=g.additions,c=g.removals,f=g.modified,v=Object.keys(u).map(function(b){return r.draggable.getById(b).getDimension(ve)}).sort(function(b,N){return b.descriptor.index-N.descriptor.index}),C=Object.keys(f).map(function(b){var N=r.droppable.getById(b),E=N.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:E}}),h={additions:v,removals:Object.keys(c),modified:C};n=dt(),t.publish(h)}))},i=function(g){var u=g.descriptor.id;n.additions[u]=g,n.modified[g.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],o()},l=function(g){var u=g.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],o()},d=function(){a&&(cancelAnimationFrame(a),a=null,n=dt())};return{add:i,remove:l,stop:d}}var Oa=function(e){var r=e.scrollHeight,t=e.scrollWidth,n=e.height,a=e.width,o=De({x:t,y:r},{x:a,y:n}),i={x:Math.max(0,o.x),y:Math.max(0,o.y)};return i},Ta=function(){var e=document.documentElement;return e||j(),e},Ma=function(){var e=Ta(),r=Oa({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return r},Xs=function(){var e=Ba(),r=Ma(),t=e.y,n=e.x,a=Ta(),o=a.clientWidth,i=a.clientHeight,l=n+o,d=t+i,p=Ge({top:t,left:n,right:l,bottom:d}),g={frame:p,scroll:{initial:e,current:e,max:r,diff:{value:ve,displacement:ve}}};return g},Qs=function(e){var r=e.critical,t=e.scrollOptions,n=e.registry,a=Xs(),o=a.scroll.current,i=r.droppable,l=n.droppable.getAllByType(i.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(o,t)}),d=n.draggable.getAllByType(r.draggable.type).map(function(u){return u.getDimension(o)}),p={draggables:ua(d),droppables:da(l)},g={dimensions:p,critical:r,viewport:a};return g};function Bn(e,r,t){if(t.descriptor.id===r.id||t.descriptor.type!==r.type)return!1;var n=e.droppable.getById(t.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Zs=function(e,r){var t=null,n=Js({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:e}),a=function(f,v){e.droppable.exists(f)||j(),t&&r.updateDroppableIsEnabled({id:f,isEnabled:v})},o=function(f,v){t&&(e.droppable.exists(f)||j(),r.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:v}))},i=function(f,v){t&&(e.droppable.exists(f)||j(),r.updateDroppableScroll({id:f,newScroll:v}))},l=function(f,v){t&&e.droppable.getById(f).callbacks.scroll(v)},d=function(){if(t){n.stop();var f=t.critical.droppable;e.droppable.getAllByType(f.type).forEach(function(v){return v.callbacks.dragStopped()}),t.unsubscribe(),t=null}},p=function(f){t||j();var v=t.critical.draggable;f.type==="ADDITION"&&Bn(e,v,f.value)&&n.add(f.value),f.type==="REMOVAL"&&Bn(e,v,f.value)&&n.remove(f.value)},g=function(f){t&&j();var v=e.draggable.getById(f.draggableId),C=e.droppable.getById(v.descriptor.droppableId),h={draggable:v.descriptor,droppable:C.descriptor},b=e.subscribe(p);return t={critical:h,unsubscribe:b},Qs({critical:h,registry:e,scrollOptions:f.scrollOptions})},u={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:i,startPublishing:g,stopPublishing:d};return u},La=function(e,r){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===r?!1:e.completed.result.reason==="DROP"},_s=function(e){window.scrollBy(e.x,e.y)},ec=fe(function(e){return Xr(e).filter(function(r){return!(!r.isEnabled||!r.frame)})}),rc=function(r,t){var n=Ze(ec(t),function(a){return a.frame||j(),wa(a.frame.pageMarginBox)(r)});return n},tc=function(e){var r=e.center,t=e.destination,n=e.droppables;if(t){var a=n[t];return a.frame?a:null}var o=rc(r,n);return o},Xe={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},nc=function(e,r){var t=e[r.size]*Xe.startFromPercentage,n=e[r.size]*Xe.maxScrollAtPercentage,a={startScrollingFrom:t,maxScrollValueAt:n};return a},Fa=function(e){var r=e.startOfRange,t=e.endOfRange,n=e.current,a=t-r;if(a===0)return 0;var o=n-r,i=o/a;return i},Lt=1,ac=function(e,r){if(e>r.startScrollingFrom)return 0;if(e<=r.maxScrollValueAt)return Xe.maxPixelScroll;if(e===r.startScrollingFrom)return Lt;var t=Fa({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:e}),n=1-t,a=Xe.maxPixelScroll*Xe.ease(n);return Math.ceil(a)},On=Xe.durationDampening.accelerateAt,Tn=Xe.durationDampening.stopDampeningAt,oc=function(e,r){var t=r,n=Tn,a=Date.now(),o=a-t;if(o>=Tn)return e;if(o<On)return Lt;var i=Fa({startOfRange:On,endOfRange:n,current:o}),l=e*Xe.ease(i);return Math.ceil(l)},Mn=function(e){var r=e.distanceToEdge,t=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,o=ac(r,t);return o===0?0:a?Math.max(oc(o,n),Lt):o},Ln=function(e){var r=e.container,t=e.distanceToEdges,n=e.dragStartTime,a=e.axis,o=e.shouldUseTimeDampening,i=nc(r,a),l=t[a.end]<t[a.start];return l?Mn({distanceToEdge:t[a.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o}):-1*Mn({distanceToEdge:t[a.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o})},ic=function(e){var r=e.container,t=e.subject,n=e.proposedScroll,a=t.height>r.height,o=t.width>r.width;return!o&&!a?n:o&&a?null:{x:o?0:n.x,y:a?0:n.y}},lc=sa(function(e){return e===0?0:e}),za=function(e){var r=e.dragStartTime,t=e.container,n=e.subject,a=e.center,o=e.shouldUseTimeDampening,i={top:a.y-t.top,right:t.right-a.x,bottom:t.bottom-a.y,left:a.x-t.left},l=Ln({container:t,distanceToEdges:i,dragStartTime:r,axis:Pt,shouldUseTimeDampening:o}),d=Ln({container:t,distanceToEdges:i,dragStartTime:r,axis:fa,shouldUseTimeDampening:o}),p=lc({x:d,y:l});if(Je(p,ve))return null;var g=ic({container:t,subject:n,proposedScroll:p});return g?Je(g,ve)?null:g:null},sc=sa(function(e){return e===0?0:e>0?1:-1}),Ft=function(){var e=function(t,n){return t<0?t:t>n?t-n:0};return function(r){var t=r.current,n=r.max,a=r.change,o=be(t,a),i={x:e(o.x,n.x),y:e(o.y,n.y)};return Je(i,ve)?null:i}}(),Ga=function(r){var t=r.max,n=r.current,a=r.change,o={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=sc(a),l=Ft({max:o,current:n,change:i});return!l||i.x!==0&&l.x===0||i.y!==0&&l.y===0},zt=function(r,t){return Ga({current:r.scroll.current,max:r.scroll.max,change:t})},cc=function(r,t){if(!zt(r,t))return null;var n=r.scroll.max,a=r.scroll.current;return Ft({current:a,max:n,change:t})},Gt=function(r,t){var n=r.frame;return n?Ga({current:n.scroll.current,max:n.scroll.max,change:t}):!1},dc=function(r,t){var n=r.frame;return!n||!Gt(r,t)?null:Ft({current:n.scroll.current,max:n.scroll.max,change:t})},uc=function(e){var r=e.viewport,t=e.subject,n=e.center,a=e.dragStartTime,o=e.shouldUseTimeDampening,i=za({dragStartTime:a,container:r.frame,subject:t,center:n,shouldUseTimeDampening:o});return i&&zt(r,i)?i:null},pc=function(e){var r=e.droppable,t=e.subject,n=e.center,a=e.dragStartTime,o=e.shouldUseTimeDampening,i=r.frame;if(!i)return null;var l=za({dragStartTime:a,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o});return l&&Gt(r,l)?l:null},Fn=function(e){var r=e.state,t=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,o=e.scrollDroppable,i=r.current.page.borderBoxCenter,l=r.dimensions.draggables[r.critical.draggable.id],d=l.page.marginBox;if(r.isWindowScrollAllowed){var p=r.viewport,g=uc({dragStartTime:t,viewport:p,subject:d,center:i,shouldUseTimeDampening:n});if(g){a(g);return}}var u=tc({center:i,destination:Ee(r.impact),droppables:r.dimensions.droppables});if(u){var c=pc({dragStartTime:t,droppable:u,subject:d,center:i,shouldUseTimeDampening:n});c&&o(u.descriptor.id,c)}},gc=function(e){var r=e.scrollWindow,t=e.scrollDroppable,n=Ir(r),a=Ir(t),o=null,i=function(g){o||j();var u=o,c=u.shouldUseTimeDampening,f=u.dragStartTime;Fn({state:g,scrollWindow:n,scrollDroppable:a,dragStartTime:f,shouldUseTimeDampening:c})},l=function(g){o&&j();var u=Date.now(),c=!1,f=function(){c=!0};Fn({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f}),o={dragStartTime:u,shouldUseTimeDampening:c},c&&i(g)},d=function(){o&&(n.cancel(),a.cancel(),o=null)};return{start:l,stop:d,scroll:i}},fc=function(e){var r=e.move,t=e.scrollDroppable,n=e.scrollWindow,a=function(p,g){var u=be(p.current.client.selection,g);r({client:u})},o=function(p,g){if(!Gt(p,g))return g;var u=dc(p,g);if(!u)return t(p.descriptor.id,g),null;var c=De(g,u);t(p.descriptor.id,c);var f=De(g,c);return f},i=function(p,g,u){if(!p||!zt(g,u))return u;var c=cc(g,u);if(!c)return n(u),null;var f=De(u,c);n(f);var v=De(u,f);return v},l=function(p){var g=p.scrollJumpRequest;if(g){var u=Ee(p.impact);u||j();var c=o(p.dimensions.droppables[u],g);if(c){var f=p.viewport,v=i(p.isWindowScrollAllowed,f,c);v&&a(p,v)}}};return l},vc=function(e){var r=e.scrollDroppable,t=e.scrollWindow,n=e.move,a=gc({scrollWindow:t,scrollDroppable:r}),o=fc({move:n,scrollWindow:t,scrollDroppable:r}),i=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&o(p)}},l={scroll:i,start:a.start,stop:a.stop};return l},or="data-rbd",ir=function(){var e=or+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),yt=function(){var e=or+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),mc=function(){var e=or+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),zn={contextId:or+"-scroll-container-context-id"},hc=function(r){return function(t){return"["+t+'="'+r+'"]'}},xr=function(r,t){return r.map(function(n){var a=n.styles[t];return a?n.selector+" { "+a+" }":""}).join(" ")},bc="pointer-events: none;",xc=function(e){var r=hc(e),t=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(ir.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:bc,dropAnimating:l}}}(),n=function(){var l=`
      transition: `+Sr.outOfTheWay+`;
    `;return{selector:r(yt.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),a={selector:r(mc.contextId),styles:{always:"overflow-anchor: none;"}},o={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},i=[n,t,a,o];return{always:xr(i,"always"),resting:xr(i,"resting"),dragging:xr(i,"dragging"),dropAnimating:xr(i,"dropAnimating"),userCancel:xr(i,"userCancel")}},Pe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?I.useLayoutEffect:I.useEffect,ut=function(){var r=document.querySelector("head");return r||j(),r},Gn=function(r){var t=document.createElement("style");return r&&t.setAttribute("nonce",r),t.type="text/css",t};function yc(e,r){var t=_(function(){return xc(e)},[e]),n=I.useRef(null),a=I.useRef(null),o=G(fe(function(u){var c=a.current;c||j(),c.textContent=u}),[]),i=G(function(u){var c=n.current;c||j(),c.textContent=u},[]);Pe(function(){!n.current&&!a.current||j();var u=Gn(r),c=Gn(r);return n.current=u,a.current=c,u.setAttribute(or+"-always",e),c.setAttribute(or+"-dynamic",e),ut().appendChild(u),ut().appendChild(c),i(t.always),o(t.resting),function(){var f=function(C){var h=C.current;h||j(),ut().removeChild(h),C.current=null};f(n),f(a)}},[r,i,o,t.always,t.resting,e]);var l=G(function(){return o(t.dragging)},[o,t.dragging]),d=G(function(u){if(u==="DROP"){o(t.dropAnimating);return}o(t.userCancel)},[o,t.dropAnimating,t.userCancel]),p=G(function(){a.current&&o(t.resting)},[o,t.resting]),g=_(function(){return{dragging:l,dropping:d,resting:p}},[l,d,p]);return g}var Wa=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function et(e){return e instanceof Wa(e).HTMLElement}function wc(e,r){var t="["+ir.contextId+'="'+e+'"]',n=ca(document.querySelectorAll(t));if(!n.length)return null;var a=Ze(n,function(o){return o.getAttribute(ir.draggableId)===r});return!a||!et(a)?null:a}function Cc(e){var r=I.useRef({}),t=I.useRef(null),n=I.useRef(null),a=I.useRef(!1),o=G(function(c,f){var v={id:c,focus:f};return r.current[c]=v,function(){var h=r.current,b=h[c];b!==v&&delete h[c]}},[]),i=G(function(c){var f=wc(e,c);f&&f!==document.activeElement&&f.focus()},[e]),l=G(function(c,f){t.current===c&&(t.current=f)},[]),d=G(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var c=t.current;c&&i(c)}))},[i]),p=G(function(c){t.current=null;var f=document.activeElement;f&&f.getAttribute(ir.draggableId)===c&&(t.current=c)},[]);Pe(function(){return a.current=!0,function(){a.current=!1;var c=n.current;c&&cancelAnimationFrame(c)}},[]);var g=_(function(){return{register:o,tryRecordFocus:p,tryRestoreFocusRecorded:d,tryShiftRecord:l}},[o,p,d,l]);return g}function Sc(){var e={draggables:{},droppables:{}},r=[];function t(u){return r.push(u),function(){var f=r.indexOf(u);f!==-1&&r.splice(f,1)}}function n(u){r.length&&r.forEach(function(c){return c(u)})}function a(u){return e.draggables[u]||null}function o(u){var c=a(u);return c||j(),c}var i={register:function(c){e.draggables[c.descriptor.id]=c,n({type:"ADDITION",value:c})},update:function(c,f){var v=e.draggables[f.descriptor.id];v&&v.uniqueId===c.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[c.descriptor.id]=c)},unregister:function(c){var f=c.descriptor.id,v=a(f);v&&c.uniqueId===v.uniqueId&&(delete e.draggables[f],n({type:"REMOVAL",value:c}))},getById:o,findById:a,exists:function(c){return!!a(c)},getAllByType:function(c){return qr(e.draggables).filter(function(f){return f.descriptor.type===c})}};function l(u){return e.droppables[u]||null}function d(u){var c=l(u);return c||j(),c}var p={register:function(c){e.droppables[c.descriptor.id]=c},unregister:function(c){var f=l(c.descriptor.id);f&&c.uniqueId===f.uniqueId&&delete e.droppables[c.descriptor.id]},getById:d,findById:l,exists:function(c){return!!l(c)},getAllByType:function(c){return qr(e.droppables).filter(function(f){return f.descriptor.type===c})}};function g(){e.draggables={},e.droppables={},r.length=0}return{draggable:i,droppable:p,subscribe:t,clean:g}}function Ic(){var e=_(Sc,[]);return I.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Wt=ie.createContext(null),Yr=function(){var e=document.body;return e||j(),e},Nc={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Dc=function(r){return"rbd-announcement-"+r};function Ec(e){var r=_(function(){return Dc(e)},[e]),t=I.useRef(null);I.useEffect(function(){var o=document.createElement("div");return t.current=o,o.id=r,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),$(o.style,Nc),Yr().appendChild(o),function(){setTimeout(function(){var d=Yr();d.contains(o)&&d.removeChild(o),o===t.current&&(t.current=null)})}},[r]);var n=G(function(a){var o=t.current;if(o){o.textContent=a;return}},[]);return n}var Pc=0,Ac={separator:"::"};function Ht(e,r){return r===void 0&&(r=Ac),_(function(){return""+e+r.separator+Pc++},[r.separator,e])}function jc(e){var r=e.contextId,t=e.uniqueId;return"rbd-hidden-text-"+r+"-"+t}function Rc(e){var r=e.contextId,t=e.text,n=Ht("hidden-text",{separator:"-"}),a=_(function(){return jc({contextId:r,uniqueId:n})},[n,r]);return I.useEffect(function(){var i=document.createElement("div");return i.id=a,i.textContent=t,i.style.display="none",Yr().appendChild(i),function(){var d=Yr();d.contains(i)&&d.removeChild(i)}},[a,t]),a}var rt=ie.createContext(null);function Ha(e){var r=I.useRef(e);return I.useEffect(function(){r.current=e}),r}function kc(){var e=null;function r(){return!!e}function t(i){return i===e}function n(i){e&&j();var l={abandon:i};return e=l,l}function a(){e||j(),e=null}function o(){e&&(e.abandon(),a())}return{isClaimed:r,isActive:t,claim:n,release:a,tryAbandon:o}}var Bc=9,Oc=13,$t=27,$a=32,Tc=33,Mc=34,Lc=35,Fc=36,zc=37,Gc=38,Wc=39,Hc=40,Mr,$c=(Mr={},Mr[Oc]=!0,Mr[Bc]=!0,Mr),Ua=function(e){$c[e.keyCode]&&e.preventDefault()},tt=function(){var e="visibilitychange";if(typeof document>"u")return e;var r=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],t=Ze(r,function(n){return"on"+n in document});return t||e}(),Va=0,Wn=5;function Uc(e,r){return Math.abs(r.x-e.x)>=Wn||Math.abs(r.y-e.y)>=Wn}var Hn={type:"IDLE"};function Vc(e){var r=e.cancel,t=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(i){var l=i.button,d=i.clientX,p=i.clientY;if(l===Va){var g={x:d,y:p},u=n();if(u.type==="DRAGGING"){i.preventDefault(),u.actions.move(g);return}u.type!=="PENDING"&&j();var c=u.point;if(Uc(c,g)){i.preventDefault();var f=u.actions.fluidLift(g);a({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(i){var l=n();if(l.type!=="DRAGGING"){r();return}i.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(i){n().type==="DRAGGING"&&i.preventDefault(),r()}},{eventName:"keydown",fn:function(i){var l=n();if(l.type==="PENDING"){r();return}if(i.keyCode===$t){i.preventDefault(),r();return}Ua(i)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(i){var l=n();if(l.type==="IDLE"&&j(),l.actions.shouldRespectForcePress()){r();return}i.preventDefault()}},{eventName:tt,fn:r}]}function qc(e){var r=I.useRef(Hn),t=I.useRef(Ye),n=_(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===Va&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var c=e.findClosestDraggableId(u);if(c){var f=e.tryGetLock(c,i,{sourceEvent:u});if(f){u.preventDefault();var v={x:u.clientX,y:u.clientY};t.current(),p(f,v)}}}}}},[e]),a=_(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var c=e.findClosestDraggableId(u);if(c){var f=e.findOptionsForDraggable(c);f&&(f.shouldRespectForcePress||e.canGetLock(c)&&u.preventDefault())}}}}},[e]),o=G(function(){var u={passive:!1,capture:!0};t.current=Oe(window,[a,n],u)},[a,n]),i=G(function(){var g=r.current;g.type!=="IDLE"&&(r.current=Hn,t.current(),o())},[o]),l=G(function(){var g=r.current;i(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[i]),d=G(function(){var u={capture:!0,passive:!1},c=Vc({cancel:l,completed:i,getPhase:function(){return r.current},setPhase:function(v){r.current=v}});t.current=Oe(window,c,u)},[l,i]),p=G(function(u,c){r.current.type!=="IDLE"&&j(),r.current={type:"PENDING",point:c,actions:u},d()},[d]);Pe(function(){return o(),function(){t.current()}},[o])}var nr;function Kc(){}var Yc=(nr={},nr[Mc]=!0,nr[Tc]=!0,nr[Fc]=!0,nr[Lc]=!0,nr);function Jc(e,r){function t(){r(),e.cancel()}function n(){r(),e.drop()}return[{eventName:"keydown",fn:function(o){if(o.keyCode===$t){o.preventDefault(),t();return}if(o.keyCode===$a){o.preventDefault(),n();return}if(o.keyCode===Hc){o.preventDefault(),e.moveDown();return}if(o.keyCode===Gc){o.preventDefault(),e.moveUp();return}if(o.keyCode===Wc){o.preventDefault(),e.moveRight();return}if(o.keyCode===zc){o.preventDefault(),e.moveLeft();return}if(Yc[o.keyCode]){o.preventDefault();return}Ua(o)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:tt,fn:t}]}function Xc(e){var r=I.useRef(Kc),t=_(function(){return{eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==$a)return;var i=e.findClosestDraggableId(o);if(!i)return;var l=e.tryGetLock(i,g,{sourceEvent:o});if(!l)return;o.preventDefault();var d=!0,p=l.snapLift();r.current();function g(){d||j(),d=!1,r.current(),n()}r.current=Oe(window,Jc(p,g),{capture:!0,passive:!1})}}},[e]),n=G(function(){var o={passive:!1,capture:!0};r.current=Oe(window,[t],o)},[t]);Pe(function(){return n(),function(){r.current()}},[n])}var pt={type:"IDLE"},Qc=120,Zc=.15;function _c(e){var r=e.cancel,t=e.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(t().type!=="DRAGGING"){r();return}a.keyCode===$t&&a.preventDefault(),r()}},{eventName:tt,fn:r}]}function ed(e){var r=e.cancel,t=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(o){var i=n();if(i.type!=="DRAGGING"){r();return}i.hasMoved=!0;var l=o.touches[0],d=l.clientX,p=l.clientY,g={x:d,y:p};o.preventDefault(),i.actions.move(g)}},{eventName:"touchend",fn:function(o){var i=n();if(i.type!=="DRAGGING"){r();return}o.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(o){if(n().type!=="DRAGGING"){r();return}o.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(o){var i=n();i.type==="IDLE"&&j();var l=o.touches[0];if(l){var d=l.force>=Zc;if(d){var p=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){p&&r();return}if(p){if(i.hasMoved){o.preventDefault();return}r();return}o.preventDefault()}}}},{eventName:tt,fn:r}]}function rd(e){var r=I.useRef(pt),t=I.useRef(Ye),n=G(function(){return r.current},[]),a=G(function(f){r.current=f},[]),o=_(function(){return{eventName:"touchstart",fn:function(f){if(!f.defaultPrevented){var v=e.findClosestDraggableId(f);if(v){var C=e.tryGetLock(v,l,{sourceEvent:f});if(C){var h=f.touches[0],b=h.clientX,N=h.clientY,E={x:b,y:N};t.current(),u(C,E)}}}}}},[e]),i=G(function(){var f={capture:!0,passive:!1};t.current=Oe(window,[o],f)},[o]),l=G(function(){var c=r.current;c.type!=="IDLE"&&(c.type==="PENDING"&&clearTimeout(c.longPressTimerId),a(pt),t.current(),i())},[i,a]),d=G(function(){var c=r.current;l(),c.type==="DRAGGING"&&c.actions.cancel({shouldBlockNextClick:!0}),c.type==="PENDING"&&c.actions.abort()},[l]),p=G(function(){var f={capture:!0,passive:!1},v={cancel:d,completed:l,getPhase:n},C=Oe(window,ed(v),f),h=Oe(window,_c(v),f);t.current=function(){C(),h()}},[d,n,l]),g=G(function(){var f=n();f.type!=="PENDING"&&j();var v=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[n,a]),u=G(function(f,v){n().type!=="IDLE"&&j();var C=setTimeout(g,Qc);a({type:"PENDING",point:v,actions:f,longPressTimerId:C}),p()},[p,n,a,g]);Pe(function(){return i(),function(){t.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a(pt))}},[n,i,a]),Pe(function(){var f=Oe(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return f},[])}var td={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function qa(e,r){if(r==null)return!1;var t=!!td[r.tagName.toLowerCase()];if(t)return!0;var n=r.getAttribute("contenteditable");return n==="true"||n===""?!0:r===e?!1:qa(e,r.parentElement)}function nd(e,r){var t=r.target;return et(t)?qa(e,t):!1}var ad=function(e){return Ge(e.getBoundingClientRect()).center};function od(e){return e instanceof Wa(e).Element}var id=function(){var e="matches";if(typeof document>"u")return e;var r=[e,"msMatchesSelector","webkitMatchesSelector"],t=Ze(r,function(n){return n in Element.prototype});return t||e}();function Ka(e,r){return e==null?null:e[id](r)?e:Ka(e.parentElement,r)}function ld(e,r){return e.closest?e.closest(r):Ka(e,r)}function sd(e){return"["+ir.contextId+'="'+e+'"]'}function cd(e,r){var t=r.target;if(!od(t))return null;var n=sd(e),a=ld(t,n);return!a||!et(a)?null:a}function dd(e,r){var t=cd(e,r);return t?t.getAttribute(ir.draggableId):null}function ud(e,r){var t="["+yt.contextId+'="'+e+'"]',n=ca(document.querySelectorAll(t)),a=Ze(n,function(o){return o.getAttribute(yt.id)===r});return!a||!et(a)?null:a}function pd(e){e.preventDefault()}function Lr(e){var r=e.expected,t=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||r!==t)}function Ya(e){var r=e.lockAPI,t=e.store,n=e.registry,a=e.draggableId;if(r.isClaimed())return!1;var o=n.draggable.findById(a);return!(!o||!o.options.isEnabled||!La(t.getState(),a))}function gd(e){var r=e.lockAPI,t=e.contextId,n=e.store,a=e.registry,o=e.draggableId,i=e.forceSensorStop,l=e.sourceEvent,d=Ya({lockAPI:r,store:n,registry:a,draggableId:o});if(!d)return null;var p=a.draggable.getById(o),g=ud(t,p.descriptor.id);if(!g||l&&!p.options.canDragInteractiveElements&&nd(g,l))return null;var u=r.claim(i||Ye),c="PRE_DRAG";function f(){return p.options.shouldRespectForcePress}function v(){return r.isActive(u)}function C(D,T){Lr({expected:D,phase:c,isLockActive:v,shouldWarn:!0})&&n.dispatch(T())}var h=C.bind(null,"DRAGGING");function b(D){function T(){r.release(),c="COMPLETED"}c!=="PRE_DRAG"&&(T(),c!=="PRE_DRAG"&&j()),n.dispatch(is(D.liftActionArgs)),c="DRAGGING";function L(M,U){if(U===void 0&&(U={shouldBlockNextClick:!1}),D.cleanup(),U.shouldBlockNextClick){var H=Oe(window,[{eventName:"click",fn:pd,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(H)}T(),n.dispatch(ja({reason:M}))}return $({isActive:function(){return Lr({expected:"DRAGGING",phase:c,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:f,drop:function(U){return L("DROP",U)},cancel:function(U){return L("CANCEL",U)}},D.actions)}function N(D){var T=Ir(function(M){h(function(){return Aa({client:M})})}),L=b({liftActionArgs:{id:o,clientSelection:D,movementMode:"FLUID"},cleanup:function(){return T.cancel()},actions:{move:T}});return $({},L,{move:T})}function E(){var D={moveUp:function(){return h(vs)},moveRight:function(){return h(hs)},moveDown:function(){return h(ms)},moveLeft:function(){return h(bs)}};return b({liftActionArgs:{id:o,clientSelection:ad(g),movementMode:"SNAP"},cleanup:Ye,actions:D})}function S(){var D=Lr({expected:"PRE_DRAG",phase:c,isLockActive:v,shouldWarn:!0});D&&r.release()}var k={isActive:function(){return Lr({expected:"PRE_DRAG",phase:c,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:f,fluidLift:N,snapLift:E,abort:S};return k}var fd=[qc,Xc,rd];function vd(e){var r=e.contextId,t=e.store,n=e.registry,a=e.customSensors,o=e.enableDefaultSensors,i=[].concat(o?fd:[],a||[]),l=I.useState(function(){return kc()})[0],d=G(function(N,E){N.isDragging&&!E.isDragging&&l.tryAbandon()},[l]);Pe(function(){var N=t.getState(),E=t.subscribe(function(){var S=t.getState();d(N,S),N=S});return E},[l,t,d]),Pe(function(){return l.tryAbandon},[l.tryAbandon]);for(var p=G(function(b){return Ya({lockAPI:l,registry:n,store:t,draggableId:b})},[l,n,t]),g=G(function(b,N,E){return gd({lockAPI:l,registry:n,contextId:r,store:t,draggableId:b,forceSensorStop:N,sourceEvent:E&&E.sourceEvent?E.sourceEvent:null})},[r,l,n,t]),u=G(function(b){return dd(r,b)},[r]),c=G(function(b){var N=n.draggable.findById(b);return N?N.options:null},[n.draggable]),f=G(function(){l.isClaimed()&&(l.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Bt()))},[l,t]),v=G(l.isClaimed,[l]),C=_(function(){return{canGetLock:p,tryGetLock:g,findClosestDraggableId:u,findOptionsForDraggable:c,tryReleaseLock:f,isLockClaimed:v}},[p,g,u,c,f,v]),h=0;h<i.length;h++)i[h](C)}var md=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function yr(e){return e.current||j(),e.current}function hd(e){var r=e.contextId,t=e.setCallbacks,n=e.sensors,a=e.nonce,o=e.dragHandleUsageInstructions,i=I.useRef(null),l=Ha(e),d=G(function(){return md(l.current)},[l]),p=Ec(r),g=Rc({contextId:r,text:o}),u=yc(r,a),c=G(function(M){yr(i).dispatch(M)},[]),f=_(function(){return cn({publishWhileDragging:ss,updateDroppableScroll:ds,updateDroppableIsEnabled:us,updateDroppableIsCombineEnabled:ps,collectionStarting:cs},c)},[c]),v=Ic(),C=_(function(){return Zs(v,f)},[v,f]),h=_(function(){return vc($({scrollWindow:_s,scrollDroppable:C.scrollDroppable},cn({move:Aa},c)))},[C.scrollDroppable,c]),b=Cc(r),N=_(function(){return Ys({announce:p,autoScroller:h,dimensionMarshal:C,focusMarshal:b,getResponders:d,styleMarshal:u})},[p,h,C,b,d,u]);i.current=N;var E=G(function(){var M=yr(i),U=M.getState();U.phase!=="IDLE"&&M.dispatch(Bt())},[]),S=G(function(){var M=yr(i).getState();return M.isDragging||M.phase==="DROP_ANIMATING"},[]),k=_(function(){return{isDragging:S,tryAbort:E}},[S,E]);t(k);var D=G(function(M){return La(yr(i).getState(),M)},[]),T=G(function(){return er(yr(i).getState())},[]),L=_(function(){return{marshal:C,focus:b,contextId:r,canLift:D,isMovementAllowed:T,dragHandleUsageInstructionsId:g,registry:v}},[r,C,g,b,D,T,v]);return vd({contextId:r,store:N,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),I.useEffect(function(){return E},[E]),ie.createElement(rt.Provider,{value:L},ie.createElement(li,{context:Wt,store:N},e.children))}var bd=0;function xd(){return _(function(){return""+bd++},[])}function yd(e){var r=xd(),t=e.dragHandleUsageInstructions||Gr.dragHandleUsageInstructions;return ie.createElement(Xi,null,function(n){return ie.createElement(hd,{nonce:e.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Ja=function(r){return function(t){return r===t}},wd=Ja("scroll"),Cd=Ja("auto"),$n=function(r,t){return t(r.overflowX)||t(r.overflowY)},Sd=function(r){var t=window.getComputedStyle(r),n={overflowX:t.overflowX,overflowY:t.overflowY};return $n(n,wd)||$n(n,Cd)},Id=function(){return!1},Nd=function e(r){return r==null?null:r===document.body?Id()?r:null:r===document.documentElement?null:Sd(r)?r:e(r.parentElement)},wt=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Dd=function e(r){if(!r)return!1;var t=window.getComputedStyle(r);return t.position==="fixed"?!0:e(r.parentElement)},Ed=function(e){var r=Nd(e),t=Dd(e);return{closestScrollable:r,isFixedOnPage:t}},Pd=function(e){var r=e.descriptor,t=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,o=e.direction,i=e.client,l=e.page,d=e.closest,p=function(){if(!d)return null;var f=d.scrollSize,v=d.client,C=Oa({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:v,scrollSize:f,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:C,diff:{value:ve,displacement:ve}}}}(),g=o==="vertical"?Pt:fa,u=ar({page:l,withPlaceholder:null,axis:g,frame:p}),c={descriptor:r,isCombineEnabled:n,isFixedOnPage:a,axis:g,isEnabled:t,client:i,page:l,frame:p,subject:u};return c},Ad=function(r,t){var n=aa(r);if(!t||r!==t)return n;var a=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,i=a+t.scrollHeight,l=o+t.scrollWidth,d={top:a,right:l,bottom:i,left:o},p=St(d,n.border),g=It({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return g},jd=function(e){var r=e.ref,t=e.descriptor,n=e.env,a=e.windowScroll,o=e.direction,i=e.isDropDisabled,l=e.isCombineEnabled,d=e.shouldClipSubject,p=n.closestScrollable,g=Ad(r,p),u=$r(g,a),c=function(){if(!p)return null;var v=aa(p),C={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:v,page:$r(v,a),scroll:wt(p),scrollSize:C,shouldClipSubject:d}}(),f=Pd({descriptor:t,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:o,client:g,page:u,closest:c});return f},Rd={passive:!1},kd={passive:!0},Un=function(e){return e.shouldPublishImmediately?Rd:kd};function Jr(e){var r=I.useContext(e);return r||j(),r}var Fr=function(r){return r&&r.env.closestScrollable||null};function Bd(e){var r=I.useRef(null),t=Jr(rt),n=Ht("droppable"),a=t.registry,o=t.marshal,i=Ha(e),l=_(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),d=I.useRef(l),p=_(function(){return fe(function(S,k){r.current||j();var D={x:S,y:k};o.updateDroppableScroll(l.id,D)})},[l.id,o]),g=G(function(){var S=r.current;return!S||!S.env.closestScrollable?ve:wt(S.env.closestScrollable)},[]),u=G(function(){var S=g();p(S.x,S.y)},[g,p]),c=_(function(){return Ir(u)},[u]),f=G(function(){var S=r.current,k=Fr(S);S&&k||j();var D=S.scrollOptions;if(D.shouldPublishImmediately){u();return}c()},[c,u]),v=G(function(S,k){r.current&&j();var D=i.current,T=D.getDroppableRef();T||j();var L=Ed(T),M={ref:T,descriptor:l,env:L,scrollOptions:k};r.current=M;var U=jd({ref:T,descriptor:l,env:L,windowScroll:S,direction:D.direction,isDropDisabled:D.isDropDisabled,isCombineEnabled:D.isCombineEnabled,shouldClipSubject:!D.ignoreContainerClipping}),H=L.closestScrollable;return H&&(H.setAttribute(zn.contextId,t.contextId),H.addEventListener("scroll",f,Un(M.scrollOptions))),U},[t.contextId,l,f,i]),C=G(function(){var S=r.current,k=Fr(S);return S&&k||j(),wt(k)},[]),h=G(function(){var S=r.current;S||j();var k=Fr(S);r.current=null,k&&(c.cancel(),k.removeAttribute(zn.contextId),k.removeEventListener("scroll",f,Un(S.scrollOptions)))},[f,c]),b=G(function(S){var k=r.current;k||j();var D=Fr(k);D||j(),D.scrollTop+=S.y,D.scrollLeft+=S.x},[]),N=_(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:C,dragStopped:h,scroll:b}},[h,v,C,b]),E=_(function(){return{uniqueId:n,descriptor:l,callbacks:N}},[N,l,n]);Pe(function(){return d.current=E.descriptor,a.droppable.register(E),function(){r.current&&h(),a.droppable.unregister(E)}},[N,l,h,E,o,a.droppable]),Pe(function(){r.current&&o.updateDroppableIsEnabled(d.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),Pe(function(){r.current&&o.updateDroppableIsCombineEnabled(d.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function gt(){}var Vn={width:0,height:0,margin:tl},Od=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,a=r.animate;return t||a==="close"?Vn:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Td=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,a=r.animate,o=Od({isAnimatingOpenOnMount:t,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Sr.placeholder:null}};function Md(e){var r=I.useRef(null),t=G(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),n=e.animate,a=e.onTransitionEnd,o=e.onClose,i=e.contextId,l=I.useState(e.animate==="open"),d=l[0],p=l[1];I.useEffect(function(){return d?n!=="open"?(t(),p(!1),gt):r.current?gt:(r.current=setTimeout(function(){r.current=null,p(!1)}),t):gt},[n,d,t]);var g=G(function(c){c.propertyName==="height"&&(a(),n==="close"&&o())},[n,o,a]),u=Td({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return ie.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":i,onTransitionEnd:g,ref:e.innerRef})}var Ld=ie.memo(Md),Ut=ie.createContext(null),Fd=function(e){Jn(r,e);function r(){for(var n,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}r.getDerivedStateFromProps=function(a,o){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:o.isVisible?{isVisible:!0,data:o.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var t=r.prototype;return t.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},r}(ie.PureComponent),qn={dragging:5e3,dropAnimating:4500},zd=function(r,t){return t?Sr.drop(t.duration):r?Sr.snap:Sr.fluid},Gd=function(r,t){return r?t?Pr.opacity.drop:Pr.opacity.combining:null},Wd=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function Hd(e){var r=e.dimension,t=r.client,n=e.offset,a=e.combineWith,o=e.dropping,i=!!a,l=Wd(e),d=!!o,p=d?bt.drop(n,i):bt.moveTo(n),g={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:zd(l,o),transform:p,opacity:Gd(i,d),zIndex:d?qn.dropAnimating:qn.dragging,pointerEvents:"none"};return g}function $d(e){return{transform:bt.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Ud(e){return e.type==="DRAGGING"?Hd(e):$d(e)}function Vd(e,r,t){t===void 0&&(t=ve);var n=window.getComputedStyle(r),a=r.getBoundingClientRect(),o=na(a,n),i=$r(o,t),l={client:o,tagName:r.tagName.toLowerCase(),display:n.display},d={x:o.marginBox.width,y:o.marginBox.height},p={descriptor:e,placeholder:l,displaceBy:d,client:o,page:i};return p}function qd(e){var r=Ht("draggable"),t=e.descriptor,n=e.registry,a=e.getDraggableRef,o=e.canDragInteractiveElements,i=e.shouldRespectForcePress,l=e.isEnabled,d=_(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}},[o,l,i]),p=G(function(f){var v=a();return v||j(),Vd(t,v,f)},[t,a]),g=_(function(){return{uniqueId:r,descriptor:t,options:d,getDimension:p}},[t,p,d,r]),u=I.useRef(g),c=I.useRef(!0);Pe(function(){return n.draggable.register(u.current),function(){return n.draggable.unregister(u.current)}},[n.draggable]),Pe(function(){if(c.current){c.current=!1;return}var f=u.current;u.current=g,n.draggable.update(g,f)},[g,n.draggable])}function Kd(e){e.preventDefault()}function Yd(e){var r=I.useRef(null),t=G(function(M){r.current=M},[]),n=G(function(){return r.current},[]),a=Jr(rt),o=a.contextId,i=a.dragHandleUsageInstructionsId,l=a.registry,d=Jr(Ut),p=d.type,g=d.droppableId,u=_(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:g}},[e.draggableId,e.index,p,g]),c=e.children,f=e.draggableId,v=e.isEnabled,C=e.shouldRespectForcePress,h=e.canDragInteractiveElements,b=e.isClone,N=e.mapped,E=e.dropAnimationFinished;if(!b){var S=_(function(){return{descriptor:u,registry:l,getDraggableRef:n,canDragInteractiveElements:h,shouldRespectForcePress:C,isEnabled:v}},[u,l,n,h,C,v]);qd(S)}var k=_(function(){return v?{tabIndex:0,role:"button","aria-describedby":i,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:Kd}:null},[o,i,f,v]),D=G(function(M){N.type==="DRAGGING"&&N.dropping&&M.propertyName==="transform"&&E()},[E,N]),T=_(function(){var M=Ud(N),U=N.type==="DRAGGING"&&N.dropping?D:null,H={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":f,style:M,onTransitionEnd:U},dragHandleProps:k};return H},[o,k,f,N,D,t]),L=_(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return c(T,N.snapshot,L)}var Xa=function(e,r){return e===r},Qa=function(e){var r=e.combine,t=e.destination;return t?t.droppableId:r?r.droppableId:null},Jd=function(r){return r.combine?r.combine.draggableId:null},Xd=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function Qd(){var e=fe(function(a,o){return{x:a,y:o}}),r=fe(function(a,o,i,l,d){return{isDragging:!0,isClone:o,isDropAnimating:!!d,dropAnimation:d,mode:a,draggingOver:i,combineWith:l,combineTargetFor:null}}),t=fe(function(a,o,i,l,d,p,g){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:p,mode:o,offset:a,dimension:i,forceShouldAnimate:g,snapshot:r(o,l,d,p,null)}}}),n=function(o,i){if(o.isDragging){if(o.critical.draggable.id!==i.draggableId)return null;var l=o.current.client.offset,d=o.dimensions.draggables[i.draggableId],p=Ee(o.impact),g=Xd(o.impact),u=o.forceShouldAnimate;return t(e(l.x,l.y),o.movementMode,d,i.isClone,p,g,u)}if(o.phase==="DROP_ANIMATING"){var c=o.completed;if(c.result.draggableId!==i.draggableId)return null;var f=i.isClone,v=o.dimensions.draggables[i.draggableId],C=c.result,h=C.mode,b=Qa(C),N=Jd(C),E=o.dropDuration,S={duration:E,curve:Tt.drop,moveTo:o.newHomeClientOffset,opacity:N?Pr.opacity.drop:null,scale:N?Pr.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:v,dropping:S,draggingOver:b,combineWith:N,mode:h,forceShouldAnimate:null,snapshot:r(h,f,b,N,S)}}}return null};return n}function Za(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Zd={mapped:{type:"SECONDARY",offset:ve,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Za(null)}};function _d(){var e=fe(function(i,l){return{x:i,y:l}}),r=fe(Za),t=fe(function(i,l,d){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:d,snapshot:r(l)}}}),n=function(l){return l?t(ve,l,!0):null},a=function(l,d,p,g){var u=p.displaced.visible[l],c=!!(g.inVirtualList&&g.effected[l]),f=Qr(p),v=f&&f.draggableId===l?d:null;if(!u){if(!c)return n(v);if(p.displaced.invisible[l])return null;var C=lr(g.displacedBy.point),h=e(C.x,C.y);return t(h,v,!0)}if(c)return n(v);var b=p.displacedBy.point,N=e(b.x,b.y);return t(N,v,u.shouldAnimate)},o=function(l,d){if(l.isDragging)return l.critical.draggable.id===d.draggableId?null:a(d.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var p=l.completed;return p.result.draggableId===d.draggableId?null:a(d.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return o}var eu=function(){var r=Qd(),t=_d(),n=function(o,i){return r(o,i)||t(o,i)||Zd};return n},ru={dropAnimationFinished:Ra},tu=ra(eu,ru,null,{context:Wt,pure:!0,areStatePropsEqual:Xa})(Yd);function _a(e){var r=Jr(Ut),t=r.isUsingCloneFor;return t===e.draggableId&&!e.isClone?null:ie.createElement(tu,e)}function nu(e){var r=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,t=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return ie.createElement(_a,$({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}function au(e){var r=I.useContext(rt);r||j();var t=r.contextId,n=r.isMovementAllowed,a=I.useRef(null),o=I.useRef(null),i=e.children,l=e.droppableId,d=e.type,p=e.mode,g=e.direction,u=e.ignoreContainerClipping,c=e.isDropDisabled,f=e.isCombineEnabled,v=e.snapshot,C=e.useClone,h=e.updateViewportMaxScroll,b=e.getContainerForClone,N=G(function(){return a.current},[]),E=G(function(H){a.current=H},[]);G(function(){return o.current},[]);var S=G(function(H){o.current=H},[]),k=G(function(){n()&&h({maxScroll:Ma()})},[n,h]);Bd({droppableId:l,type:d,mode:p,direction:g,isDropDisabled:c,isCombineEnabled:f,ignoreContainerClipping:u,getDroppableRef:N});var D=ie.createElement(Fd,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(H){var X=H.onClose,y=H.data,z=H.animate;return ie.createElement(Ld,{placeholder:y,onClose:X,innerRef:S,animate:z,contextId:t,onTransitionEnd:k})}),T=_(function(){return{innerRef:E,placeholder:D,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":t}}},[t,l,D,E]),L=C?C.dragging.draggableId:null,M=_(function(){return{droppableId:l,type:d,isUsingCloneFor:L}},[l,L,d]);function U(){if(!C)return null;var H=C.dragging,X=C.render,y=ie.createElement(_a,{draggableId:H.draggableId,index:H.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(z,te){return X(z,te,H)});return vo.createPortal(y,b())}return ie.createElement(Ut.Provider,{value:M},i(T,v),U())}var ft=function(r,t){return r===t.droppable.type},Kn=function(r,t){return t.draggables[r.draggable.id]},ou=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=$({},r,{shouldAnimatePlaceholder:!1}),n=fe(function(i){return{draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}}}),a=fe(function(i,l,d,p,g,u){var c=g.descriptor.id,f=g.descriptor.droppableId===i;if(f){var v=u?{render:u,dragging:n(g.descriptor)}:null,C={isDraggingOver:d,draggingOverWith:d?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:C,useClone:v}}if(!l)return t;if(!p)return r;var h={isDraggingOver:d,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:h,useClone:null}}),o=function(l,d){var p=d.droppableId,g=d.type,u=!d.isDropDisabled,c=d.renderClone;if(l.isDragging){var f=l.critical;if(!ft(g,f))return t;var v=Kn(f,l.dimensions),C=Ee(l.impact)===p;return a(p,u,C,C,v,c)}if(l.phase==="DROP_ANIMATING"){var h=l.completed;if(!ft(g,h.critical))return t;var b=Kn(h.critical,l.dimensions);return a(p,u,Qa(h.result)===p,Ee(h.impact)===p,b,c)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var N=l.completed;if(!ft(g,N.critical))return t;var E=Ee(N.impact)===p,S=!!(N.impact.at&&N.impact.at.type==="COMBINE"),k=N.critical.droppable.id===p;return E?S?r:t:k?r:t}return t};return o},iu={updateViewportMaxScroll:fs};function lu(){return document.body||j(),document.body}var su={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:lu},eo=ra(ou,iu,null,{context:Wt,pure:!0,areStatePropsEqual:Xa})(au);eo.defaultProps=su;const cu=({elements:e,onReorder:r,onSelect:t,selectedElement:n})=>{const a=o=>{if(!o.destination)return;const i=Array.from(e),[l]=i.splice(o.source.index,1);i.splice(o.destination.index,0,l),r(i)};return s.jsx("div",{className:"bg-white ",children:s.jsx(yd,{onDragEnd:a,children:s.jsx(eo,{droppableId:"layers",children:o=>s.jsxs("div",{...o.droppableProps,ref:o.innerRef,className:"space-y-2",children:[e.map((i,l)=>s.jsx(nu,{draggableId:i.id,index:l,children:d=>s.jsxs("div",{ref:d.innerRef,...d.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===i.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>t(i.id),children:[s.jsx("div",{...d.dragHandleProps,className:"mr-2",children:s.jsx(Oo,{size:16})}),i.type==="image"?s.jsx(zr,{size:16,className:"mr-2"}):s.jsx(wr,{size:16,className:"mr-2"}),s.jsx("span",{className:"text-sm truncate",children:i.type==="text"?i.content.substring(0,20):`Imagen ${l+1}`})]})},i.id)),o.placeholder]})})})})};function du({currentLayoutId:e,onLayoutChange:r}){const[t,n]=I.useState("all"),a={all:{name:"Todos",layouts:de},hero:{name:"Hero",layouts:de.filter(o=>o.category==="hero")},editorial:{name:"Editorial",layouts:de.filter(o=>o.category==="editorial")},storytelling:{name:"Historia",layouts:de.filter(o=>o.category==="storytelling")},minimal:{name:"Minimal",layouts:de.filter(o=>o.category==="minimal")},creative:{name:"Creativo",layouts:de.filter(o=>o.category==="creative")},classic:{name:"Clásico",layouts:de.filter(o=>o.category==="classic")}};return Object.keys(a).filter(o=>o==="all"||a[o].layouts.length>0),s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"grid grid-cols-2  gap-3 overflow-x-hidden custom-scroll",children:a[t].layouts.map(o=>s.jsxs("div",{className:`relative group cursor-pointer transition-all duration-200 
                                 hover:shadow-md hover:scale-102
                        `,onClick:()=>r(o.id),children:[s.jsxs("div",{className:"aspect-square relative bg-white rounded-lg p-2 border border-gray-200",children:[s.jsx("div",{className:`w-full h-full grid ${o.template}`,style:{gap:"2px",padding:"4px"},children:Array.from({length:o.cells}).map((i,l)=>{var d,p;return s.jsx("div",{className:`bg-gradient-to-br from-purple-100 to-purple-200 ${(p=(d=o.cellStyles)==null?void 0:d[l])!=null&&p.includes("rounded")?"rounded":"rounded-sm"}`,style:{minHeight:"8px"}},l)})}),e===o.id&&s.jsx("div",{className:"absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2 w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"mt-2 text-center",children:[s.jsx("h4",{className:"text-xs font-medium text-gray-900 truncate",children:o.name}),o.description&&s.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:o.description}),s.jsx("div",{className:"flex items-center justify-center mt-1 space-x-2",children:s.jsxs("span",{className:"text-xs text-gray-400",children:[o.cells," ",o.cells===1?"celda":"celdas"]})})]})]},o.id))}),a[t].layouts.length===0&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:s.jsx("p",{children:"No hay layouts disponibles en esta categoría."})})]})}const uu=({selectedMask:e,onSelect:r,availableMasks:t=[],selectedImage:n})=>{var l,d;const[a,o]=I.useState("Básicas"),i={};return vt.forEach(p=>{i[p.category]||(i[p.category]=[]),(t.includes(p.id)||p.id==="none")&&i[p.category].push(p)}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"grid grid-cols-2 gap-1 bg-gray-100 p-1 rounded-lg",children:Object.keys(i).slice(0,2).map(p=>i[p].length>0&&s.jsx("button",{onClick:()=>o(p),className:`py-1.5 px-2 text-xs rounded-md transition font-medium ${a===p?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-purple-600"}`,children:p},p))}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:(l=i[a])==null?void 0:l.slice(0,6).map(p=>s.jsxs("div",{onClick:()=>r(p.id),className:`cursor-pointer border rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all ${e===p.id?"ring-2 ring-purple-500 border-purple-300":"border-gray-200"}`,children:[s.jsx("div",{className:"aspect-square bg-white flex items-center justify-center p-1",children:n!=null&&n.content?s.jsx("img",{src:n.content,alt:p.name,className:`w-full h-full object-cover ${p.class}`}):s.jsx("div",{className:`w-full h-full bg-gray-200 ${p.class}`})}),s.jsx("p",{className:"text-center text-[10px] text-gray-700 p-1 truncate",children:p.name})]},p.id))}),((d=i[a])==null?void 0:d.length)>6&&s.jsxs("button",{className:"w-full py-2 text-xs text-purple-600 hover:text-purple-700 border border-purple-200 rounded-lg hover:bg-purple-50 transition",children:["Ver más máscaras (",i[a].length-6," más)"]})]})},pu=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],gu=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],fu=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],vu=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],mu=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],hu=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],bu=({element:e,onUpdate:r,onClose:t})=>{var ue,ee,me,Ae,ye,Me,Ie,je,Le,we,Re,Fe,pe,se,ze,Ve,Ne,We,ke,qe,Rr,kr,dr,ge,ur,Br,pr,gr,fr,vr,mr,hr,m,w,P,A,O,V,W,q,ae;const[n,a]=I.useState(!1),[o,i]=I.useState(!1),[l,d]=I.useState(!1),[p,g]=I.useState(!1),[u,c]=I.useState(!1),[f,v]=I.useState(!1),[C,h]=I.useState(!1),[b,N]=I.useState(!1),[E,S]=I.useState("basic"),[k,D]=I.useState(((ue=e==null?void 0:e.style)==null?void 0:ue.color)||"#000000"),[T,L]=I.useState(((ee=e==null?void 0:e.style)==null?void 0:ee.backgroundColor)||"transparent"),M=I.useRef(null),U=I.useRef(null),H=I.useRef(null),X=I.useRef(null),y=I.useRef(null),z=I.useRef(null),te=I.useRef(null);I.useEffect(()=>{function x(F){M.current&&!M.current.contains(F.target)&&a(!1),U.current&&!U.current.contains(F.target)&&i(!1),H.current&&!H.current.contains(F.target)&&g(!1),X.current&&!X.current.contains(F.target)&&c(!1),y.current&&!y.current.contains(F.target)&&v(!1),z.current&&!z.current.contains(F.target)&&d(!1),te.current&&!te.current.contains(F.target)&&h(!1)}return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const B=(x,F)=>{r({style:{...e==null?void 0:e.style,[x]:F}})},le=(x,F,R)=>{var K;r({style:{...e==null?void 0:e.style,[x]:((K=e==null?void 0:e.style)==null?void 0:K[x])===F?R:F}})},ce=(x,F)=>{B(x,F)};if(!e)return null;const J=({active:x,onClick:F,icon:R,title:K,className:re=""})=>s.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${x?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${re}`,onClick:F,title:K,children:R}),Q=({onClick:x,icon:F,text:R,isOpen:K,title:re})=>s.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${K?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:x,title:re,children:[F&&s.jsx("span",{className:"flex-shrink-0",children:F}),R&&s.jsx("span",{className:"text-sm truncate",children:R}),s.jsx(wo,{className:"h-3.5 w-3.5 opacity-70"})]});return s.jsx("div",{className:"  bg-white  rounded-lg shadow-sm px-4  border-gray-200  z-50 transition-all duration-200",children:s.jsxs("div",{className:"w-full ",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[s.jsx(wr,{className:"h-4 w-4"}),"Formato de texto"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>N(!b),title:b?"Modo compacto":"Modo expandido",children:b?s.jsx(Ko,{className:"h-4 w-4"}):s.jsx(qo,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:t,title:"Cerrar",children:s.jsx(xo,{className:"h-4 w-4"})})]})]}),b&&s.jsxs("div",{className:"flex border-b mb-2",children:[s.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${E==="basic"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>S("basic"),children:"Básico"}),s.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${E==="paragraph"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>S("paragraph"),children:"Párrafo"}),s.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${E==="advanced"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>S("advanced"),children:"Avanzado"})]}),(E==="basic"||!b)&&s.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[s.jsx("div",{className:"relative",ref:H,children:s.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((me=e.style)==null?void 0:me.fontFamily)||"Arial",onChange:x=>{B("fontFamily",x.target.value)},children:pu.map(x=>s.jsx("option",{value:x.value,style:{fontFamily:x.value},children:x.name},x.value))})}),s.jsxs("div",{className:"relative",ref:X,children:[s.jsx(Q,{onClick:()=>c(!u),text:((Ae=e.style)==null?void 0:Ae.fontSize)||"16px",isOpen:u,title:"Tamaño de fuente"}),u&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:gu.map(x=>s.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{B("fontSize",x),c(!1)},children:x},x))})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(J,{active:((ye=e.style)==null?void 0:ye.fontWeight)==="bold",onClick:()=>le("fontWeight","bold","normal"),icon:s.jsx(Ro,{className:"h-4 w-4"}),title:"Negrita"}),s.jsx(J,{active:((Me=e.style)==null?void 0:Me.fontStyle)==="italic",onClick:()=>le("fontStyle","italic","normal"),icon:s.jsx(Ho,{className:"h-4 w-4"}),title:"Cursiva"}),s.jsx(J,{active:((Ie=e.style)==null?void 0:Ie.textDecoration)==="underline",onClick:()=>le("textDecoration","underline","none"),icon:s.jsx(ti,{className:"h-4 w-4"}),title:"Subrayado"}),s.jsx(J,{active:((je=e.style)==null?void 0:je.textDecoration)==="line-through",onClick:()=>le("textDecoration","line-through","none"),icon:s.jsx(_o,{className:"h-4 w-4"}),title:"Tachado"})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(J,{active:((Le=e.style)==null?void 0:Le.textAlign)==="left",onClick:()=>B("textAlign","left"),icon:s.jsx(Ao,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),s.jsx(J,{active:((we=e.style)==null?void 0:we.textAlign)==="center",onClick:()=>B("textAlign","center"),icon:s.jsx(Eo,{className:"h-4 w-4"}),title:"Centrar"}),s.jsx(J,{active:((Re=e.style)==null?void 0:Re.textAlign)==="right",onClick:()=>B("textAlign","right"),icon:s.jsx(jo,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),s.jsx(J,{active:((Fe=e.style)==null?void 0:Fe.textAlign)==="justify",onClick:()=>B("textAlign","justify"),icon:s.jsx(Po,{className:"h-4 w-4"}),title:"Justificar"})]}),s.jsxs("div",{className:"relative",ref:M,children:[s.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[s.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:k}}),s.jsx(yo,{className:"h-4 w-4"})]}),n&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),s.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:k}})]}),s.jsx("input",{type:"color",value:k,onChange:x=>{D(x.target.value),B("color",x.target.value)},className:"w-full h-8 cursor-pointer"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),s.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:vu.map(x=>s.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${k===x.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:x.color},onClick:()=>{D(x.color),B("color",x.color)},title:x.name},x.color))})]})]})})]}),s.jsxs("div",{className:"relative",ref:U,children:[s.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>i(!o),title:"Color de fondo",children:[s.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:T,backgroundImage:T==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),s.jsx(Yo,{className:"h-4 w-4"})]}),o&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),s.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:T,backgroundImage:T==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),s.jsx("input",{type:"color",value:T==="transparent"?"#ffffff":T,onChange:x=>{L(x.target.value),B("backgroundColor",x.target.value)},className:"w-full h-8 cursor-pointer"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),s.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:mu.map(x=>s.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${T===x.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:x.color,backgroundImage:x.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{L(x.color),B("backgroundColor",x.color)},title:x.name},x.color))})]})]})})]}),s.jsxs("div",{className:"relative",ref:y,children:[s.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>v(!f),title:"Transformación de texto",children:s.jsx(ko,{className:"h-4 w-4"})}),f&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:fu.map(x=>{var F;return s.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((F=e.style)==null?void 0:F.textTransform)===x.value?"bg-gray-100":""}`,style:{textTransform:x.value},onClick:()=>{B("textTransform",x.value),v(!1)},children:x.label},x.value)})})]}),s.jsxs("div",{className:"relative",ref:te,children:[s.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>h(!C),title:"Encabezados",children:s.jsx(wr,{className:"h-4 w-4"})}),C&&s.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{B("fontSize","32px"),B("fontWeight","bold"),h(!1)},children:[s.jsx(To,{className:"h-4 w-4"})," ","Encabezado 1"]}),s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{B("fontSize","24px"),B("fontWeight","bold"),h(!1)},children:[s.jsx(Mo,{className:"h-4 w-4"})," ","Encabezado 2"]}),s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{B("fontSize","20px"),B("fontWeight","bold"),h(!1)},children:[s.jsx(Lo,{className:"h-4 w-4"})," ","Encabezado 3"]}),s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{B("fontSize","16px"),B("fontWeight","bold"),h(!1)},children:[s.jsx(Fo,{className:"h-4 w-4"})," ","Encabezado 4"]}),s.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{B("fontSize","16px"),B("fontWeight","normal"),h(!1)},children:[s.jsx(wr,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(J,{active:((pe=e.style)==null?void 0:pe.verticalAlign)==="super",onClick:()=>le("verticalAlign","super","baseline"),icon:s.jsx(ri,{className:"h-4 w-4"}),title:"Superíndice"}),s.jsx(J,{active:((se=e.style)==null?void 0:se.verticalAlign)==="sub",onClick:()=>le("verticalAlign","sub","baseline"),icon:s.jsx(ei,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),b&&E==="paragraph"&&s.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(J,{active:((ze=e.style)==null?void 0:ze.listStyleType)==="disc",onClick:()=>{var x;return B("listStyleType",((x=e.style)==null?void 0:x.listStyleType)==="disc"?"none":"disc")},icon:s.jsx(Uo,{className:"h-4 w-4"}),title:"Lista con viñetas"}),s.jsx(J,{active:((Ve=e.style)==null?void 0:Ve.listStyleType)==="decimal",onClick:()=>{var x;return B("listStyleType",((x=e.style)==null?void 0:x.listStyleType)==="decimal"?"none":"decimal")},icon:s.jsx($o,{className:"h-4 w-4"}),title:"Lista numerada"})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(J,{onClick:()=>{var F;const x=Number.parseInt(((F=e.style)==null?void 0:F.textIndent)||"0");B("textIndent",`${x+20}px`)},icon:s.jsx(Wo,{className:"h-4 w-4"}),title:"Aumentar sangría"}),s.jsx(J,{onClick:()=>{var F;const x=Number.parseInt(((F=e.style)==null?void 0:F.textIndent)||"0");x>=20&&B("textIndent",`${x-20}px`)},icon:s.jsx(Go,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pn,{className:"h-3 w-3 text-gray-500"}),s.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((Ne=e.style)==null?void 0:Ne.lineHeight)||"1.5"),onChange:x=>ce("lineHeight",x.target.value),className:"w-24"}),s.jsx(gn,{className:"h-3 w-3 text-gray-500"})]}),s.jsx("span",{className:"text-xs",children:((We=e.style)==null?void 0:We.lineHeight)||"1.5"})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pn,{className:"h-3 w-3 text-gray-500"}),s.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((ke=e.style)==null?void 0:ke.letterSpacing)||"0"),onChange:x=>ce("letterSpacing",`${x.target.value}px`),className:"w-24"}),s.jsx(gn,{className:"h-3 w-3 text-gray-500"})]}),s.jsx("span",{className:"text-xs",children:((qe=e.style)==null?void 0:qe.letterSpacing)||"0px"})]}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[s.jsx(J,{active:((Rr=e.style)==null?void 0:Rr.fontStyle)==="italic"&&((kr=e.style)==null?void 0:kr.paddingLeft)==="20px"&&((dr=e.style)==null?void 0:dr.borderLeft)==="4px solid #ccc",onClick:()=>{var x,F,R;((x=e.style)==null?void 0:x.fontStyle)==="italic"&&((F=e.style)==null?void 0:F.paddingLeft)==="20px"&&((R=e.style)==null?void 0:R.borderLeft)==="4px solid #ccc"?(B("fontStyle","normal"),B("paddingLeft","0"),B("borderLeft","none")):(B("fontStyle","italic"),B("paddingLeft","20px"),B("borderLeft","4px solid #ccc"))},icon:s.jsx(Xo,{className:"h-4 w-4"}),title:"Formato de cita"}),s.jsx(J,{active:((ge=e.style)==null?void 0:ge.fontFamily)==="'Courier New', monospace"&&((ur=e.style)==null?void 0:ur.backgroundColor)==="#f5f5f5"&&((Br=e.style)==null?void 0:Br.padding)==="2px 4px",onClick:()=>{var x,F;((x=e.style)==null?void 0:x.fontFamily)==="'Courier New', monospace"&&((F=e.style)==null?void 0:F.backgroundColor)==="#f5f5f5"?(B("fontFamily","Arial, sans-serif"),B("backgroundColor","transparent"),B("padding","0")):(B("fontFamily","'Courier New', monospace"),B("backgroundColor","#f5f5f5"),B("padding","2px 4px"))},icon:s.jsx(Bo,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),b&&E==="advanced"&&s.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[s.jsxs("div",{className:"relative",ref:z,children:[s.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>d(!l),title:"Opciones de borde",children:[s.jsx(Zo,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Bordes"})]}),l&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),s.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((pr=e.style)==null?void 0:pr.borderStyle)||"none",onChange:x=>B("borderStyle",x.target.value),children:hu.map(x=>s.jsx("option",{value:x.value,children:x.label},x.value))})]}),((gr=e.style)==null?void 0:gr.borderStyle)&&((fr=e.style)==null?void 0:fr.borderStyle)!=="none"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((vr=e.style)==null?void 0:vr.borderWidth)||"1"),onChange:x=>B("borderWidth",`${x.target.value}px`),className:"flex-1"}),s.jsx("span",{className:"text-xs",children:((mr=e.style)==null?void 0:mr.borderWidth)||"1px"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:((hr=e.style)==null?void 0:hr.borderColor)||"#000000",onChange:x=>B("borderColor",x.target.value),className:"w-8 h-8"}),s.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(x=>s.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:x},onClick:()=>B("borderColor",x)},x))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((m=e.style)==null?void 0:m.borderRadius)||"0"),onChange:x=>B("borderRadius",`${x.target.value}px`),className:"flex-1"}),s.jsx("span",{className:"text-xs",children:((w=e.style)==null?void 0:w.borderRadius)||"0px"})]})]})]})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),s.jsx("button",{className:`px-2 py-1 text-xs rounded ${(P=e.style)!=null&&P.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var x;(x=e.style)!=null&&x.textShadow?B("textShadow",""):B("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(A=e.style)!=null&&A.textShadow?"Quitar":"Añadir"}),((O=e.style)==null?void 0:O.textShadow)&&s.jsxs("select",{className:"text-xs p-1 border rounded",value:(V=e.style)==null?void 0:V.textShadow,onChange:x=>B("textShadow",x.target.value),children:[s.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),s.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),s.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),s.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),s.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((W=e.style)==null?void 0:W.opacity)||"1"),onChange:x=>ce("opacity",x.target.value),className:"w-24"})}),s.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat(((q=e.style)==null?void 0:q.opacity)||"1")*100),"%"]})]}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((ae=e.style)==null?void 0:ae.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var x;((x=e.style)==null?void 0:x.backgroundColor)==="#ffff00"?B("backgroundColor","transparent"):B("backgroundColor","#ffff00")},title:"Resaltar texto",children:[s.jsx(zo,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),s.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[s.jsx(J,{onClick:()=>{alert("Función deshacer (implementar)")},icon:s.jsx(io,{className:"h-4 w-4"}),title:"Deshacer"}),s.jsx(J,{onClick:()=>{alert("Función rehacer (implementar)")},icon:s.jsx(Qo,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},xu=({currentSize:e,onSizeChange:r,presetData:t,workspaceDimensions:n})=>((()=>{if(t!=null&&t.canvas_config){const o=typeof t.canvas_config=="string"?JSON.parse(t.canvas_config):t.canvas_config;let i=o.width,l=o.height;return{width:i,height:l,unit:"cm"}}return null})(),s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:n&&s.jsx("div",{className:"text-sm customtext-neutral-dark font-medium ml-2",children:n.originalWidth&&s.jsxs("div",{children:["Dimensiones: ",n.originalWidth," cm x",n.originalHeight," cm"]})})}));function yu(e,r,t){var h,b,N,E;const n={};if(!e||!e.template)return console.warn("⚠️ [THUMBNAIL] Layout inválido, usando posiciones fallback"),t.forEach(S=>{n[S.id]={x:0,y:0,width:r.width,height:r.height}}),n;console.log("🗂️ [THUMBNAIL] Calculando posiciones para layout:",e.template);const a=S=>{const k=S.match(/grid-cols-(\d+)/),D=S.match(/grid-rows-(\d+)/),T=k?parseInt(k[1]):1,L=D?parseInt(D[1]):1;return{cols:T,rows:L}},{cols:o,rows:i}=a(e.template);console.log("🗂️ [THUMBNAIL] Grid calculado:",{cols:o,rows:i});const l=parseInt((b=(h=e.style)==null?void 0:h.gap)==null?void 0:b.replace("px",""))||0,d=parseInt((E=(N=e.style)==null?void 0:N.padding)==null?void 0:E.replace("px",""))||0,p=r.width-2*d-l*(o-1),g=r.height-2*d-l*(i-1),u=p/o,c=g/i;console.log("📏 [THUMBNAIL] Dimensiones base de celda:",{baseCellWidth:u,baseCellHeight:c,gap:l,padding:d,availableWidth:p,availableHeight:g});const f=Array(i).fill(null).map(()=>Array(o).fill(null)),v=(S,k,D=1)=>{if(!S)return D;const T=new RegExp(`${k}-span-(\\d+)`),L=S.match(T);return L?parseInt(L[1]):D},C=(S,k,D,T,L)=>{for(let M=0;M<=k-T;M++)for(let U=0;U<=D-L;U++){let H=!0;for(let X=0;X<T&&H;X++)for(let y=0;y<L&&H;y++)S[M+X]&&S[M+X][U+y]!==null&&(H=!1);if(H)return{row:M,col:U}}return{row:0,col:0}};return t.forEach((S,k)=>{var te;const D=((te=e.cellStyles)==null?void 0:te[k])||"",T=v(D,"col",1),L=v(D,"row",1);console.log(`🗂️ [THUMBNAIL] Celda ${k} (${S.id}):`,{colSpan:T,rowSpan:L,cellStyle:D});const{row:M,col:U}=C(f,i,o,L,T);for(let B=0;B<L;B++)for(let le=0;le<T;le++)f[M+B]&&(f[M+B][U+le]=S.id);const H=d+U*(u+l),X=d+M*(c+l),y=u*T+l*(T-1),z=c*L+l*(L-1);n[S.id]={x:H,y:X,width:y,height:z},console.log(`📍 [THUMBNAIL] Celda ${S.id} posicionada en:`,{gridPos:{row:M,col:U},realPos:{x:H,y:X,width:y,height:z}})}),n}function Yn(e,r,t,n,a,o){if(!r||!e){console.warn("⚠️ No se puede dibujar: contexto o imagen no válidos");return}const i=r.width,l=r.height;if(i===0||l===0){console.warn("⚠️ Imagen con dimensiones cero:",{sWidth:i,sHeight:l});return}if(a<=0||o<=0){console.warn("⚠️ Dimensiones de destino inválidas:",{dWidth:a,dHeight:o});return}const d=a/o,p=i/l;let g,u,c,f;d>p?(c=i,f=c/d,g=0,u=(l-f)/2):(f=l,c=f*d,g=(i-c)/2,u=0);try{e.save(),e.imageSmoothingQuality="high",e.drawImage(r,Math.max(0,g),Math.max(0,u),Math.min(c,i-g),Math.min(f,l-u),t,n,a,o),e.restore()}catch(v){console.error("❌ Error al dibujar imagen:",v),console.error("Detalles:",{source:{x:g,y:u,width:c,height:f},dest:{x:t,y:n,width:a,height:o},imgSize:{width:i,height:l}})}}async function wu({pages:e,workspaceDimensions:r,presetData:t}){var a,o,i,l,d,p;const n={};console.log("🚀 [THUMBNAIL] Iniciando generación de thumbnails PRECISOS..."),console.log("📊 [THUMBNAIL] Parámetros recibidos:",{pagesCount:e.length,workspaceDimensions:r,hasPresetData:!!t});for(const g of e)try{const u=document.createElement("canvas"),c=u.getContext("2d",{willReadFrequently:!0});u.width=r.width,u.height=r.height,c.imageSmoothingEnabled=!0,c.imageSmoothingQuality="high",c.textRendering="geometricPrecision",c.webkitImageSmoothingEnabled=!0,c.mozImageSmoothingEnabled=!0,c.msImageSmoothingEnabled=!0,console.log("🖼️ [THUMBNAIL] Generando miniatura para página:",g==null?void 0:g.type),console.log("🖼️ [THUMBNAIL] Layout:",g==null?void 0:g.layout);let f=g.backgroundColor||"#ffffff";if(c.fillStyle=f,c.fillRect(0,0,r.width,r.height),g.backgroundImage)try{const E=new Image;E.crossOrigin="anonymous",E.src=g.backgroundImage,await new Promise((S,k)=>{if(E.complete)return console.log("✅ [THUMBNAIL] Imagen de fondo ya cargada"),S();E.onload=()=>{console.log("✅ [THUMBNAIL] Imagen de fondo cargada exitosamente"),S()},E.onerror=D=>{console.error("❌ [THUMBNAIL] Error cargando imagen de fondo:",D),k(D)}}),Yn(c,E,0,0,r.width,r.height),console.log("✅ [THUMBNAIL] Imagen de fondo dibujada")}catch(E){console.error("❌ [THUMBNAIL] Error procesando imagen de fondo:",E)}if(g.cells&&Array.isArray(g.cells)&&g.cells.length>0){const E=de.find(D=>D.id===g.layout);if(!E){console.warn("⚠️ [THUMBNAIL] Layout no encontrado para:",g.layout);continue}console.log("🗂️ [THUMBNAIL] Layout encontrado:",E.name);const S=yu(E,r,g.cells),k=[...g.cells].sort((D,T)=>{const L=S[D.id],M=S[T.id];return!L||!M?0:L.y!==M.y?L.y-M.y:L.x-M.x});for(const D of k){if(!D||!D.elements)continue;const T=S[D.id];if(!T){console.warn("⚠️ [THUMBNAIL] No se encontró posición para celda:",D.id);continue}const{x:L,y:M,width:U,height:H}=T;console.log(`🗂️ [THUMBNAIL] Procesando celda ${D.id} en posición:`,T);const X=[...D.elements||[]].sort((y,z)=>(y.zIndex||0)-(z.zIndex||0));for(const y of X)if(!(y.type==="image"&&(y.id==="cover-base"||y.id==="final-base"||typeof y.id=="string"&&y.id.startsWith("content-base-")))&&!(!y||y.type!=="image"&&y.type!=="text"||!y.content)){if(y.type==="image")try{const z=new Image;z.crossOrigin="anonymous",await new Promise((ue,ee)=>{z.onload=ue,z.onerror=ee,z.src=y.content});const te=0,B=0,le=U,ce=H,J=L+te,Q=M+B;console.log("📐 [THUMBNAIL] Renderizando imagen (OCUPANDO TODA LA CELDA):",{elementId:y.id,cellId:D.id,cellPosition:{x:L,y:M,width:U,height:H},elementPosition:{x:te,y:B,width:le,height:ce},finalPosition:{dx:J,dy:Q},note:"Imagen ocupa toda la celda como en workspace"}),Yn(c,z,J,Q,le,ce)}catch(z){console.error("❌ [THUMBNAIL] Error al cargar imagen:",z,y)}else if(y.type==="text"){console.log("🔤 [THUMBNAIL] Procesando elemento de texto:",y.id,y.content);try{const z=((a=y.position)==null?void 0:a.x)!==void 0&&Math.abs(y.position.x)<=1,te=((o=y.position)==null?void 0:o.y)!==void 0&&Math.abs(y.position.y)<=1,B=z?y.position.x*U:((i=y.position)==null?void 0:i.x)||10,le=te?y.position.y*H:((l=y.position)==null?void 0:l.y)||20;let ce=U*.8,J=H*.3;((d=y.size)==null?void 0:d.width)!==void 0&&(ce=y.size.width<=1?y.size.width*U:y.size.width),((p=y.size)==null?void 0:p.height)!==void 0&&(J=y.size.height<=1?y.size.height*H:y.size.height);const Q=L+B,ue=M+le;console.log("📐 [THUMBNAIL] Renderizando texto:",{elementId:y.id,content:y.content,cellPosition:{x:L,y:M,width:U,height:H},elementPosition:{x:B,y:le,width:ce,height:J},finalPosition:{dx:Q,dy:ue},originalPosition:y.position,isRelative:{x:z,y:te}});const ee=y.style||{};c.save();const me=parseInt(ee.fontSize)||16,Ae=ee.fontFamily||"Arial",ye=ee.fontWeight||"normal",Me=ee.fontStyle||"normal";c.font=`${ye} ${Me} ${me}px ${Ae}`,c.fillStyle=ee.color||"#000000";const Ie=ee.textAlign||"left";c.textAlign=Ie,c.textBaseline="top",ee.backgroundColor&&ee.backgroundColor!=="transparent"&&(c.fillStyle=ee.backgroundColor,c.fillRect(Q,ue,ce,J),c.fillStyle=ee.color||"#000000");const je=y.content.split(`
`),Le=me*1.2,we=parseInt(ee.padding)||8;je.forEach((Re,Fe)=>{if(Re.trim()){let pe,se;switch(se=ue+Fe*Le+we,Ie){case"center":pe=Q+ce/2;break;case"right":pe=Q+ce-we;break;case"left":default:pe=Q+we;break}pe>=0&&se>=0&&pe<r.width&&se<r.height&&(c.fillText(Re,pe,se),console.log(`✅ [THUMBNAIL] Línea "${Re}" dibujada en x=${pe}, y=${se}`))}}),c.restore(),console.log("✅ [THUMBNAIL] Texto renderizado exitosamente:",y.id)}catch(z){console.error("❌ [THUMBNAIL] Error renderizando texto:",z,y)}}}}}const v=document.createElement("canvas"),C=v.getContext("2d"),h=800;let b,N;r.width>r.height?(b=Math.min(h,r.width),N=b/r.width*r.height):(N=Math.min(h,r.height),b=N/r.height*r.width),b=Math.round(b),N=Math.round(N),v.width=b,v.height=N,C.imageSmoothingEnabled=!0,C.imageSmoothingQuality="high",C.webkitImageSmoothingEnabled=!0,C.mozImageSmoothingEnabled=!0,C.msImageSmoothingEnabled=!0,C.drawImage(u,0,0,u.width,u.height,0,0,b,N),n[g.id]=v.toDataURL("image/png",.92),console.log("✅ [THUMBNAIL] Thumbnail PRECISO generado exitosamente para página:",g.id)}catch(u){console.error(`❌ Error generando thumbnail para página ${g.id}:`,u),n[g.id]=null}return console.log("🎯 [THUMBNAIL] Generación de thumbnails PRECISOS completada"),n}function dp(){var pr,gr,fr,vr,mr,hr;const[e,r]=I.useState(null),[t,n]=I.useState(null),[a,o]=I.useState(null),[i,l]=I.useState(null),[d,p]=I.useState(!0),[g,u]=I.useState(null);I.useEffect(()=>{(async()=>{var w;try{const A=new URLSearchParams(window.location.search).get("project");if(!A){u("No se encontró el ID del proyecto en la URL"),p(!1);return}console.log("� Cargando proyecto con ID:",A);const O=await fetch(`/api/canvas/projects/${A}`,{headers:{"X-CSRF-TOKEN":((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.content)||""}});if(!O.ok)throw new Error("Error al cargar el proyecto");const V=await O.json();console.log("✅ Datos del proyecto cargados:",V),r(V.project),n(V.item),o(V.canvasPreset),l(V.initialProject),p(!1)}catch(P){console.error("❌ Error cargando proyecto:",P),u(P.message),p(!1)}})()},[]),I.useEffect(()=>{e&&t&&a&&(console.log("🔍 Editor datos cargados exitosamente:"),console.log("📦 project:",e),console.log("🎯 item:",t),console.log("🎨 canvasPreset:",a),console.log("📄 initialProject:",i))},[e,t,a,i]),I.useEffect(()=>{if(i&&t&&a){if(console.log("🔄 Actualizando estados del editor con datos del proyecto"),i.pages&&Array.isArray(i.pages)){console.log("🔧 Recreando páginas con backgrounds actualizados...");const m=i.pages.map(w=>{let P=null,A=a.background_color||"#ffffff";return w.type==="cover"?t.cover_image?(P=`/storage/images/item/${t.cover_image}`,console.log("🖼️ [UPDATE] Cover page - usando cover_image:",P)):console.log("🎨 [UPDATE] Cover page - usando background_color:",A):w.type==="content"?t.content_image?(P=`/storage/images/item/${t.content_image}`,console.log("🖼️ [UPDATE] Content page - usando content_image:",P)):console.log("🎨 [UPDATE] Content page - usando background_color:",A):(w.type==="final"||w.type==="contraportada")&&(t.back_cover_image?(P=`/storage/images/item/${t.back_cover_image}`,console.log("🖼️ [UPDATE] Final page - usando back_cover_image:",P)):console.log("🎨 [UPDATE] Final page - usando background_color:",A)),{...w,backgroundImage:P,backgroundColor:A}});console.log("✅ Páginas actualizadas con backgrounds:",m),C(m),y([JSON.stringify(m)]),te(0)}else{console.log("🆕 No hay páginas existentes, creando nuevas...");const m=Le(a,t);C(m),y([JSON.stringify(m)]),te(0)}typeof i.currentPage=="number"&&b(i.currentPage),i.workspaceSize&&E(i.workspaceSize)}},[i,t,a]);const[c,f]=I.useState($e.Local.get(`${Ue.APP_CORRELATIVE}_cart`)??[]);I.useEffect(()=>{$e.Local.set(`${Ue.APP_CORRELATIVE}_cart`,c)},[c]);const[v,C]=I.useState([]),[h,b]=I.useState(0),[N,E]=I.useState("preset"),[S,k]=I.useState(null),[D,T]=I.useState(null),[L,M]=I.useState("elements"),[U,H]=I.useState("basic"),[X,y]=I.useState([JSON.stringify(v)]),[z,te]=I.useState(0),[B,le]=I.useState(!1),[ce,J]=I.useState(null),[Q,ue]=I.useState({}),[ee,me]=I.useState(!1),[Ae,ye]=I.useState({elementId:null,cellId:null}),[Me,Ie]=I.useState(!1),je=()=>`editor_progress_project_${e==null?void 0:e.id}`;I.useEffect(()=>{e&&t&&a&&(console.log("✅ Todos los datos están disponibles, inicializando editor..."),console.log("📦 projectData:",a,e,t),(!(i!=null&&i.pages)||i.pages.length===0)&&(console.log("📝 No hay páginas iniciales, creando desde preset..."),Le(a,t)))},[e,t,a,i]);const Le=(m,w)=>{try{console.log("Creating pages from preset:",m),console.log("Item data:",w),console.log("🖼️ Imágenes disponibles:"),console.log("   - Portada (cover_image):",w.cover_image),console.log("   - Contenido (content_image):",w.content_image),console.log("   - Contraportada (back_cover_image):",w.back_cover_image),console.log("   - Color de fondo del preset:",m.background_color);const P=[],A=m.pages||w.pages||20;console.log("📄 Total pages to create:",A);const O=w.cover_image?`/storage/images/item/${w.cover_image}`:null,V=w.cover_image?null:m.background_color||"#ffffff";console.log("🖼️ [COVER] cover_image:",w.cover_image),console.log("🖼️ [COVER] backgroundImage construida:",O),console.log("🎨 [COVER] backgroundColor:",V);const W={id:"page-cover",type:"cover",layout:"layout-1",backgroundImage:O,backgroundColor:V,cells:[{id:"cell-cover-1",elements:[{id:"cover-title",type:"text",content:w.name||"Mi Álbum Personalizado",position:{x:10,y:20},size:{width:80,height:15},style:{fontSize:"28px",fontFamily:"Arial",color:"#000000",fontWeight:"bold",textAlign:"center",backgroundColor:"transparent",padding:"8px"},zIndex:2},...w.image?[{id:"cover-image",type:"image",content:`/storage/images/item/${w.image}`,position:{x:25,y:40},size:{width:50,height:40},filters:{},mask:"none",zIndex:1}]:[]]}]};P.push(W);const q=w.content_image?`/storage/images/item/${w.content_image}`:null,ae=w.content_image?null:m.background_color||"#ffffff";console.log("🖼️ [CONTENT] content_image:",w.content_image),console.log("🖼️ [CONTENT] backgroundImage construida:",q),console.log("🎨 [CONTENT] backgroundColor:",ae);for(let K=1;K<=A;K++){const re={id:`page-content-${K}`,type:"content",pageNumber:K,layout:"layout-1",backgroundImage:q,backgroundColor:ae,cells:[{id:`cell-content-${K}-1`,elements:[{id:`page-number-${K}`,type:"text",content:`Página ${K}`,position:{x:5,y:5},size:{width:20,height:8},style:{fontSize:"14px",fontFamily:"Arial",color:"#666666",textAlign:"left"},zIndex:1},{id:`content-area-${K}`,type:"text",content:"Haz clic para agregar contenido...",position:{x:10,y:20},size:{width:80,height:60},style:{fontSize:"16px",fontFamily:"Arial",color:"#999999",textAlign:"center"},zIndex:1}]}]};P.push(re)}const x=w.back_cover_image?`/storage/images/item/${w.back_cover_image}`:null,F=w.back_cover_image?null:m.background_color||"#ffffff";console.log("🖼️ [FINAL] back_cover_image:",w.back_cover_image),console.log("🖼️ [FINAL] backgroundImage construida:",x),console.log("🎨 [FINAL] backgroundColor:",F);const R={id:"page-final",type:"final",layout:"layout-1",backgroundImage:x,backgroundColor:F,cells:[{id:"cell-final-1",elements:[]}]};P.push(R),console.log("✅ Created pages:",P),C(P),b(0),m.width&&m.height&&(console.log("📐 Canvas dimensions found, setting workspace to preset dimensions"),E("preset"))}catch(P){console.error("❌ Error creating pages:",P),u(P.message)}},we=()=>{if(v.length===0)return"Cargando...";const m=v[h];if(!m)return"Página";switch(m.type){case"cover":return"Portada";case"content":return`Página ${m.pageNumber}`;case"final":return"Contraportada";default:return`Página ${h+1}`}},Re=()=>{if(v.length===0)return!1;const m=v[h];return(m==null?void 0:m.type)==="content"},Fe=I.useCallback(()=>{if(!S||!D||v.length===0)return null;const m=v[h];if(!m)return null;const w=m.cells.find(P=>P.id===D);return w?w.elements.find(P=>P.id===S):null},[S,D,v,h]),pe=(m,w)=>{if(w){const P=v[h].cells.find(O=>O.id===w),A=P==null?void 0:P.elements.find(O=>O.id===m);if(A!=null&&A.locked){console.log("Elemento bloqueado, no se puede seleccionar");const O=document.createElement("div");O.className="fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-700 px-4 py-2 rounded-lg z-50",O.textContent="Este elemento es parte del diseño base y no se puede editar",document.body.appendChild(O),setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O)},3e3);return}}if(w&&T(w),k(m),m){const P=v[h].cells.find(O=>O.id===(w||D)),A=P==null?void 0:P.elements.find(O=>O.id===m);(A==null?void 0:A.type)==="image"?(J(A),console.log(ce)):(A==null?void 0:A.type)==="text"?(me(!0),ye({elementId:m,cellId:w||D})):me(!1)}else me(!1),J(null)},se=()=>{if(v.length===0)return de[0];const m=v[h];return m?de.find(w=>w.id===m.layout)||de[0]:de[0]},ze=m=>{C(m);const w=[...X.slice(0,z+1),JSON.stringify(m)];y(w),te(w.length-1);const P=je();localStorage.setItem(P,JSON.stringify({pages:m,currentPage:h,savedAt:Date.now()}))};I.useEffect(()=>{const m=je();localStorage.setItem(m,JSON.stringify({pages:v,currentPage:h,savedAt:Date.now()}))},[h]);const Ve=m=>{const w=de.find(V=>V.id===m);if(!w)return;const P=[...v],A=P[h],O=Array.from({length:w.cells}).map((V,W)=>A.cells[W]||{id:`cell-${A.id}-${W+1}`,elements:[]});P[h]={...A,layout:m,cells:O},ze(P),k(null),T(null)},Ne=(m,w)=>{console.log("[Editor] addElementToCell",{cellId:m,elementId:w.id});const P=[...v];for(let A=0;A<P[h].cells.length;A++)P[h].cells[A].id===m&&P[h].cells[A].elements.push(w);ze(P),k(w.id),T(m)},We=(m,w,P,A=!1)=>{const O=[...v],V=O[h].cells.findIndex(W=>W.id===m);if(V!==-1){if(A)O[h].cells[V].elements.push({...O[h].cells[V].elements.find(W=>W.id===w),...P});else{const W=O[h].cells[V].elements.findIndex(q=>q.id===w);W!==-1&&(O[h].cells[V].elements[W]={...O[h].cells[V].elements[W],...P})}ze(O)}},ke=(m,w)=>{const P=[...v],A=P[h].cells.findIndex(O=>O.id===m);A!==-1&&(P[h].cells[A].elements=P[h].cells[A].elements.filter(O=>O.id!==w),ze(P),S===w&&k(null))},qe=()=>{z>0&&(te(z-1),C(JSON.parse(X[z-1])),k(null),T(null))},Rr=()=>{z<X.length-1&&(te(z+1),C(JSON.parse(X[z+1])),k(null),T(null))},kr=()=>{const w={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:.05,y:.05},size:{width:.4,height:.15},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};D?Ne(D,w):console.log("Selecciona una celda primero")},dr=()=>{if(a!=null&&a.width&&(a!=null&&a.height)){let q=a.width,ae=a.height,x=q*37.8,F=ae*37.8;if(x&&F){const R=window.innerWidth*.6,K=window.innerHeight*.7,re=R/x,Y=K/F,Z=Math.min(re,Y,1);return{width:Math.round(x*Z),height:Math.round(F*Z),originalWidth:q,originalHeight:ae,scale:Z,unit:"cm",originalWidthPx:Math.round(x),originalHeightPx:Math.round(F)}}}if(a!=null&&a.extra_settings)try{const q=typeof a.extra_settings=="string"?JSON.parse(a.extra_settings):a.extra_settings;if(q!=null&&q.canvas_config){const ae=q.canvas_config;let x=ae.width,F=ae.height,R=x*37.8,K=F*37.8;if(R&&K){const re=window.innerWidth*.6,Y=window.innerHeight*.7,Z=re/R,xe=Y/K,he=Math.min(Z,xe,1);return{width:Math.round(R*he),height:Math.round(K*he),originalWidth:x,originalHeight:F,scale:he,unit:"cm",originalWidthPx:Math.round(R),originalHeightPx:Math.round(K)}}}}catch(q){console.warn("Error parsing extra_settings:",q)}const m={square:{width:600,height:600},landscape:{width:1280,height:720},portrait:{width:600,height:800},wide:{width:1200,height:600},tall:{width:540,height:960},preset:{width:800,height:600}},w=m[N]||m.preset,P=window.innerWidth*.6,A=window.innerHeight*.7,O=P/w.width,V=A/w.height,W=Math.min(O,V,1);return{width:Math.round(w.width*W),height:Math.round(w.height*W),originalWidth:w.width,originalHeight:w.height,scale:W,unit:"px"}},[ge,ur]=I.useState({width:800,height:600});I.useEffect(()=>{const m=dr();ur(m)},[a,N]),I.useEffect(()=>{const m=()=>{const w=dr();ur(w)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[a,N]),I.useEffect(()=>{const m=async()=>{try{console.log("🔄 Iniciando generación de miniaturas...");const A=JSON.parse(JSON.stringify(v)).map(V=>({...V,cells:(V.cells||[]).map(W=>{var q,ae,x,F;return{...W,position:{x:((q=W.position)==null?void 0:q.x)||0,y:((ae=W.position)==null?void 0:ae.y)||0,...W.position},size:{width:((x=W.size)==null?void 0:x.width)||ge.width,height:((F=W.size)==null?void 0:F.height)||ge.height,...W.size},elements:(W.elements||[]).map(R=>({...R,zIndex:R.zIndex||0})).sort((R,K)=>(R.zIndex||0)-(K.zIndex||0))}}).sort((W,q)=>{var F,R,K,re;const ae=((F=W.position)==null?void 0:F.y)||0,x=((R=q.position)==null?void 0:R.y)||0;return ae!==x?ae-x:(((K=W.position)==null?void 0:K.x)||0)-(((re=q.position)==null?void 0:re.x)||0)})})),O=await wu({pages:A,workspaceDimensions:ge,presetData:a});console.log("🖼️ Miniaturas generadas:",O),ue(V=>{const W={...V,...Object.fromEntries(Object.entries(O||{}).map(([q,ae])=>[q,ae||V[q]]))};return console.log("🔄 Miniaturas actualizadas:",W),W})}catch(P){console.error("❌ Error generando miniatura:",P)}},w=setTimeout(()=>{m()},500);return()=>clearTimeout(w)},[v,h,ge,a]);const Br=()=>{var m;console.log("🛒 === INICIO addAlbumToCart ===");try{if(console.log("📊 Estado actual:",{itemData:t,presetData:a,cartLength:c==null?void 0:c.length,hasItemData:!!t,hasPresetData:!!a,itemId:t==null?void 0:t.id,presetId:a==null?void 0:a.id}),console.log("🔍 Verificando dependencias..."),console.log("Local type:",typeof $e.Local),console.log("Global type:",typeof Ue),console.log("Local object:",$e.Local),console.log("Global object:",Ue),typeof $e.Local>"u")return console.error("❌ Local no está definido"),He.error("Error del sistema",{description:"Sistema Local no disponible.",duration:3e3,position:"bottom-center"}),!1;if(typeof Ue>"u")return console.error("❌ Global no está definido"),He.error("Error del sistema",{description:"Sistema Global no disponible.",duration:3e3,position:"bottom-center"}),!1;if(console.log("Global.APP_CORRELATIVE:",Ue.APP_CORRELATIVE),!Ue.APP_CORRELATIVE)return console.error("❌ Global.APP_CORRELATIVE no está definido"),He.error("Error del sistema",{description:"Configuración del sistema incompleta.",duration:3e3,position:"bottom-center"}),!1;if(!t)return console.error("❌ itemData no está disponible"),console.log("itemData actual:",t),He.error("Error",{description:"Datos del item no disponibles.",duration:3e3,position:"bottom-center"}),!1;if(!a)return console.error("❌ presetData no está disponible"),console.log("presetData actual:",a),He.error("Error",{description:"Datos del preset no disponibles.",duration:3e3,position:"bottom-center"}),!1;console.log("✅ Todas las verificaciones pasaron, continuando..."),console.log("🧹 Verificando espacio en localStorage...");try{let re=0;for(let Y in localStorage)localStorage.hasOwnProperty(Y)&&(re+=localStorage[Y].length);if(console.log("📊 Tamaño actual del localStorage:",(re/1024/1024).toFixed(2),"MB"),re>8*1024*1024){console.log("⚠️ localStorage lleno, limpiando datos innecesarios...");for(let Y in localStorage)(Y.includes("thumbnail")||Y.includes("temp")||Y.includes("cache"))&&(localStorage.removeItem(Y),console.log("🗑️ Eliminado:",Y))}}catch(re){console.warn("⚠️ Error al verificar localStorage:",re)}const w=Date.now(),P=`album_${t.id}_${w}`;console.log("🆔 ID generado para el álbum:",P);let A=a.cover_image;Q&&Q["page-cover"]&&(A=Q["page-cover"]),console.log("🖼️ Thumbnail del álbum:",A),console.log("📦 Creando producto del álbum...");const O={item_id:t.id,preset_id:a.id,pages_count:v.length,title:t.title,description:((m=t.description)==null?void 0:m.substring(0,200))||"",selected_pages:t.pages,selected_cover_type:t.selected_cover_type,selected_finish:t.selected_finish,created_at:new Date().toISOString()};let V=A;A&&A.startsWith("data:image/")&&A.length>1e5&&(console.log("🖼️ Thumbnail muy grande, usando imagen del preset"),V=a.cover_image||"/assets/img/default-album.jpg"),console.log("🖼️ Thumbnail optimizado:",a);const W={id:P,name:t.title||`Álbum Personalizado - ${a.name}`,image:(a==null?void 0:a.image)||V,price:a.price||0,final_price:a.final_price||a.price||0,discount:a.discount||null,slug:`album-${t.id}-${w}`,quantity:1,type:"custom_album",item_data:O,preset_data:{id:a.id,name:a.name,cover_image:a.cover_image,price:a.price,final_price:a.final_price}};console.log("📦 Producto del álbum creado exitosamente"),console.log("📊 Tamaño estimado del producto:",JSON.stringify(W).length,"caracteres"),console.log("🛒 Obteniendo carrito actual...");const q=`${Ue.APP_CORRELATIVE}_cart`;console.log("🔑 Clave del carrito:",q);const ae=$e.Local.get(q)||[];console.log("🛒 Carrito actual desde localStorage:",ae),console.log("🛒 Longitud del carrito actual:",ae.length),console.log("➕ Agregando producto al carrito...");let x=[...ae,W];console.log("🛒 Nuevo carrito:",x),console.log("🛒 Nueva longitud del carrito:",x.length),console.log("💾 Guardando en estado y localStorage...");let F=null;try{f(x),$e.Local.set(q,x),console.log("✅ Carrito actualizado en estado y localStorage")}catch(re){if(F=re,re.name==="QuotaExceededError"){console.error("❌ Error de cuota de localStorage excedida"),console.log("🧹 Intentando liberar espacio del carrito...");try{const Z=[...ae.slice(-2),W];console.log("📦 Carrito reducido:",Z),f(Z),$e.Local.set(q,Z),console.log("✅ Carrito guardado con espacio reducido"),x=Z,He.success("Álbum agregado al carrito",{description:"Se liberó espacio eliminando productos antiguos.",duration:4e3,position:"bottom-center"})}catch(Y){console.error("❌ No se pudo liberar espacio suficiente:",Y);try{const xe=[{id:P,name:W.name,price:W.price,final_price:W.final_price,quantity:1,type:"custom_album",item_data:{item_id:t.id,preset_id:a.id,title:t.title}}];f(xe),$e.Local.set(q,xe),console.log("✅ Guardado con datos mínimos"),x=xe,He.success("Álbum agregado al carrito",{description:"Guardado con información esencial.",duration:3e3,position:"bottom-center"})}catch(Z){throw console.error("❌ Error final al guardar:",Z),new Error("No se pudo guardar en el carrito por falta de espacio")}}}else throw re}console.log("🔍 Verificando que se guardó correctamente...");const R=$e.Local.get(q);console.log("🔍 Verificación del carrito guardado:",R),console.log("🔍 Longitud del carrito verificado:",R==null?void 0:R.length);const K=R==null?void 0:R.find(re=>re.id===P);return console.log("📦 Álbum encontrado en carrito:",K?"SÍ":"NO"),console.log("📦 Datos del álbum en carrito:",K),K?((!F||F.name!=="QuotaExceededError")&&(console.log("✅ Mostrando notificación de éxito..."),He.success("Álbum agregado al carrito",{description:`${W.name} se ha añadido al carrito.`,icon:s.jsx(Do,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"})),console.log("📡 Disparando evento cartUpdated..."),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cart:x,action:"add",product:W}})),console.log("🛒 === FIN addAlbumToCart EXITOSO ==="),!0):(console.error("❌ ERROR: El álbum no se encontró en el carrito después de guardarlo"),He.error("Error al verificar carrito",{description:"El álbum no se guardó correctamente en el carrito.",duration:3e3,position:"bottom-center"}),!1)}catch(w){return console.error("❌ === ERROR EN addAlbumToCart ==="),console.error("Error completo:",w),console.error("Stack trace:",w.stack),console.error("Mensaje del error:",w.message),He.error("Error al agregar al carrito",{description:`Error específico: ${w.message}`,duration:5e3,position:"bottom-center"}),!1}};return window.finalizeAlbumDesign=async()=>{try{if(!(e!=null&&e.id))return alert("Error: No se encontró el ID del proyecto"),!1;const w={pages:(R=>R.map(K=>({id:K.id,type:K.type,pageNumber:K.pageNumber,layout:K.layout,cells:K.cells.map(re=>({id:re.id,elements:re.elements.map(Y=>{const Z={id:Y.id,type:Y.type,position:Y.position,zIndex:Y.zIndex||1};if(Y.type==="image"){if(Y.content.startsWith("data:image/")){const xe=btoa(Y.content.substring(0,100)).substring(0,20);Z.content=`[BASE64_IMAGE_${xe}]`,Z.contentType=Y.content.split(";")[0].split(":")[1],Z.originalSize=Y.content.length}else Z.content=Y.content;if(Y.filters){const xe=Object.entries(Y.filters).filter(([he,Se])=>Se!==0&&Se!==!1&&Se!==null).reduce((he,[Se,tr])=>(he[Se]=tr,he),{});Object.keys(xe).length>0&&(Z.filters=xe)}Y.mask&&Y.mask!=="none"&&(Z.mask=Y.mask),Y.size&&(Z.size=Y.size),Y.locked&&(Z.locked=Y.locked)}else if(Y.type==="text"&&(Z.content=Y.content,Y.style)){const xe=Object.entries(Y.style).filter(([he,Se])=>!(he==="fontSize"&&Se==="16px"||he==="color"&&Se==="#000000"||he==="fontFamily"&&Se==="Arial")).reduce((he,[Se,tr])=>(he[Se]=tr,he),{});Object.keys(xe).length>0&&(Z.style=xe)}return Z})}))})))(v),projectInfo:{id:e==null?void 0:e.id,item_id:t==null?void 0:t.id,title:t==null?void 0:t.title,preset_id:a==null?void 0:a.id},presetInfo:{id:a==null?void 0:a.id,name:a==null?void 0:a.name,cover_image:a==null?void 0:a.cover_image,content_image:a==null?void 0:a.content_image,back_cover_image:a==null?void 0:a.back_cover_image},workspace:{width:ge.width,height:ge.height,scale:ge.scale},meta:{finalizedAt:new Date().toISOString(),version:"1.3"}},P=JSON.stringify({design_data:w}),A=Math.round(P.length/1024),O=Math.round(A/1024*100)/100;console.log(`Tamaño del payload: ${A} KB (${O} MB)`);let V=0,W=0;v.forEach(R=>{var K;(K=R.cells)==null||K.forEach(re=>{var Y;(Y=re.elements)==null||Y.forEach(Z=>{Z.type==="image"&&Z.content&&Z.content.startsWith("data:image/")&&(V++,W+=Z.content.length)})})});const q=Math.round(W/(1024*1024)*100)/100;if(console.log(`Imágenes base64 encontradas: ${V}, Tamaño total: ${q} MB`),A>1024&&!confirm(`El diseño contiene ${V} imágenes (${q} MB en imágenes). Payload completo: ${O} MB. Esto podría causar problemas al guardarlo. ¿Desea continuar de todos modos?`))return!1;const ae=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",x=await fetch(`${ae}/api/canvas/projects/${e.id}/save`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:P});if(!x.ok){let R="Error al finalizar el diseño";try{R=(await x.json()).message||R}catch{x.status===413?R="El diseño es demasiado grande para ser guardado. Intente simplificar las imágenes.":x.status>=500&&(R="Error del servidor. Intente nuevamente más tarde.")}throw new Error(R)}const F=await x.json();return console.log("✅ Diseño finalizado exitosamente en el servidor"),console.log("📄 Respuesta del servidor:",F),!0}catch(m){console.error("Error al finalizar diseño:",m);let w=m.message;return m.message.includes("Failed to fetch")?w="Error de conexión. Verifique su conexión a internet e intente nuevamente.":(m.message.includes("NetworkError")||m.message.includes("net::"))&&(w="Error de red. Intente nuevamente más tarde."),alert("Error al finalizar el diseño: "+w),!1}},window.generateAlbumPDF=async()=>{let m=document.getElementById("pdf-hidden-pages");m||(m=document.createElement("div"),m.id="pdf-hidden-pages",m.style.position="fixed",m.style.left="-99999px",m.style.top="0",m.style.width="800px",m.style.zIndex="-1",document.body.appendChild(m)),m.innerHTML="";const w=(O,V)=>{var q,ae;const W=de.find(x=>x.id===O.layout)||de[0];return s.jsx("div",{id:`pdf-page-${O.id}`,style:{width:800,height:600,background:"#fff",overflow:"hidden",position:"relative",boxSizing:"border-box",display:"block",margin:0,padding:0},children:s.jsx("div",{className:`grid ${W.template}`,style:{width:"100%",height:"100%",gap:((q=W.style)==null?void 0:q.gap)||"16px",padding:((ae=W.style)==null?void 0:ae.padding)||"16px",boxSizing:"border-box"},children:O.cells.map((x,F)=>s.jsx("div",{style:{position:"relative",width:"100%",height:"100%",background:"#f9fafb",borderRadius:8,overflow:"hidden"},children:x.elements.map(R=>{var K,re,Y,Z,xe,he,Se,tr,Vt,qt,Kt,Yt,Jt,Xt,Qt,Zt,_t,en,rn,tn,nn,an,on,ln,sn;return R.type==="image"?s.jsx("div",{className:((K=vt.find(ro=>ro.id===R.mask))==null?void 0:K.class)||"",style:{position:"absolute",left:R.position.x,top:R.position.y,width:"100%",height:"100%",zIndex:R.zIndex||1},children:s.jsx("img",{src:R.content,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",filter:`brightness(${(((re=R.filters)==null?void 0:re.brightness)||100)/100}) contrast(${(((Y=R.filters)==null?void 0:Y.contrast)||100)/100}) saturate(${(((Z=R.filters)==null?void 0:Z.saturation)||100)/100}) sepia(${(((xe=R.filters)==null?void 0:xe.tint)||0)/100}) hue-rotate(${(((he=R.filters)==null?void 0:he.hue)||0)*3.6}deg) blur(${((Se=R.filters)==null?void 0:Se.blur)||0}px)`,transform:`scale(${((tr=R.filters)==null?void 0:tr.scale)||1}) rotate(${((Vt=R.filters)==null?void 0:Vt.rotate)||0}deg)${(qt=R.filters)!=null&&qt.flipHorizontal?" scaleX(-1)":""}${(Kt=R.filters)!=null&&Kt.flipVertical?" scaleY(-1)":""}`,mixBlendMode:((Yt=R.filters)==null?void 0:Yt.blendMode)||"normal",opacity:(((Jt=R.filters)==null?void 0:Jt.opacity)||100)/100}})},R.id):s.jsx("div",{style:{position:"absolute",left:R.position.x,top:R.position.y,fontFamily:(Xt=R.style)==null?void 0:Xt.fontFamily,fontSize:(Qt=R.style)==null?void 0:Qt.fontSize,fontWeight:(Zt=R.style)==null?void 0:Zt.fontWeight,fontStyle:(_t=R.style)==null?void 0:_t.fontStyle,textDecoration:(en=R.style)==null?void 0:en.textDecoration,color:(rn=R.style)==null?void 0:rn.color,textAlign:(tn=R.style)==null?void 0:tn.textAlign,background:((nn=R.style)==null?void 0:nn.backgroundColor)||"transparent",padding:((an=R.style)==null?void 0:an.padding)||"8px",borderRadius:((on=R.style)==null?void 0:on.borderRadius)||"0px",border:((ln=R.style)==null?void 0:ln.border)||"none",opacity:((sn=R.style)==null?void 0:sn.opacity)||1},children:R.content},R.id)})},x.id))})},O.id)},P=await to(()=>import("./index-BrXtjC9y.js").then(O=>O.i),__vite__mapDeps([0,1,2,3]));await new Promise(O=>{P.render(s.jsx("div",{children:v.map((V,W)=>w(V))}),m,O)});const A=new ho({orientation:"landscape",unit:"px",format:[800,600]});for(let O=0;O<v.length;O++){const V=document.getElementById(`pdf-page-${v[O].id}`),q=(await mo(V,{backgroundColor:"#fff",scale:2})).toDataURL("image/jpeg",1);O>0&&A.addPage([800,600],"landscape"),A.addImage(q,"JPEG",0,0,800,600)}A.save("album.pdf"),m.innerHTML=""},s.jsxs(lo,{backend:so,children:[d?s.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold customtext-neutral-dark mb-2",children:"Cargando Editor"}),s.jsx("p",{className:"customtext-neutral-dark",children:"Preparando tu álbum personalizado..."})]})}):g?s.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),s.jsx("p",{className:"customtext-neutral-dark mb-4",children:g}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Reintentar"}),s.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Volver"})]})]})}):v.length===0?s.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold customtext-neutral-dark mb-2",children:"Inicializando Editor"}),s.jsx("p",{className:"customtext-neutral-dark mb-4",children:"Generando páginas del álbum..."}),s.jsx("div",{className:"animate-pulse flex space-x-4",children:s.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded"}),s.jsx("div",{className:"h-4 bg-gray-300 rounded w-5/6"})]})]})})]})}):s.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-gray-50 font-paragraph",children:[s.jsx(Co,{isOpen:Me,onRequestClose:()=>Ie(!1),pages:v.map(m=>({...m,layout:de.find(w=>w.id===m.layout)||de[0]})),workspaceDimensions:ge,getCurrentLayout:m=>m?de.find(w=>w.id===m.layout)||de[0]:de[0],presetData:a,pageThumbnails:Q,addAlbumToCart:Br}),s.jsx("header",{className:"fixed top-0 left-0 right-0 h-16 border-b bg-primary shadow-sm flex items-center px-4 z-10",children:s.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:Ue.APP_NAME,className:"h-7 object-contain object-center invert brightness-0"}),s.jsx("div",{className:"h-6 w-px bg-white/20"}),s.jsx("h1",{className:"text-lg font-bold text-white truncate hidden sm:block",children:(e==null?void 0:e.name)||"Álbum Sin Título"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"bg-white/10 rounded-full px-4 py-1.5 flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-secondary animate-pulse"}),s.jsx("p",{className:"text-sm text-white font-medium",children:we()})]}),s.jsx("div",{className:"text-xs text-white/70 hidden sm:block",children:v.length>0&&`${v.length} páginas total`}),Re()?s.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-2 rounded-md text-xs font-medium flex items-center gap-1",children:s.jsx(Jo,{className:"h-3 w-3"})}):s.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-2 rounded-md text-xs font-medium flex items-center gap-1",children:s.jsx(Vo,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx(Ke,{variant:"secondary",size:"sm",onClick:()=>Ie(!0),icon:s.jsx(Or,{className:"h-4 w-4"}),children:"Vista de Álbum"}),!1]})]})}),s.jsxs("div",{className:"flex w-full h-full pt-16",children:[s.jsxs("aside",{className:"w-64 bg-white border-r flex flex-col",children:[s.jsx("div",{className:"p-3 border-b",children:s.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-md",children:[s.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${L==="elements"?"bg-white shadow-sm text-purple-700":"customtext-neutral-dark hover:bg-white/50"}`,onClick:()=>M("elements"),children:"Elementos"}),s.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${L==="filters"?"bg-white shadow-sm text-purple-700":"customtext-neutral-dark hover:bg-white/50"}`,onClick:()=>M("filters"),children:"Filtros"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:[L==="elements"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Layouts"}),s.jsx(du,{currentLayoutId:(pr=v[h])==null?void 0:pr.layout,onLayoutChange:Ve})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Capas"}),s.jsx(cu,{elements:((gr=v[h].cells.find(m=>m.id===D))==null?void 0:gr.elements)||[],onReorder:m=>{const w=[...v],P=w[h].cells.findIndex(A=>A.id===D);P!==-1&&(w[h].cells[P].elements=m,ze(w))},onSelect:pe,selectedElement:S})]})]}),L==="filters"&&s.jsx("div",{className:"space-y-3 max-h-full",children:(()=>{const m=Fe();return m?s.jsxs(s.Fragment,{children:[m.type==="image"&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(zr,{className:"h-4 w-4 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Imagen seleccionada"})]}),s.jsx("div",{className:"w-full h-16 rounded-md overflow-hidden bg-gray-200",children:s.jsx("img",{src:m.content,alt:"",className:"w-full h-full object-cover"})})]}),m.type==="image"&&s.jsxs("div",{className:"border-t pt-3",children:[s.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Máscaras"}),s.jsx(uu,{selectedMask:m.mask||"none",onSelect:w=>{We(D,S,{mask:w})},availableMasks:vt.map(w=>w.id),selectedImage:m})]}),s.jsxs("div",{className:"border-t pt-3",children:[s.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Filtros y efectos"}),s.jsx("div",{className:"",children:s.jsx(co,{filters:m.filters||{},onFilterChange:w=>{We(D,S,{filters:w})},selectedElement:m})})]})]}):s.jsxs("div",{className:"text-center py-8 px-2",children:[s.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-3",children:s.jsx(zr,{className:"h-6 w-6 text-gray-400 mx-auto"})}),s.jsx("h3",{className:"text-sm font-medium customtext-neutral-dark",children:"Selecciona un elemento"}),s.jsx("p",{className:"text-xs customtext-neutral-dark mt-1",children:"Para aplicar filtros y efectos, primero selecciona una imagen o texto en el lienzo"})]})})()})]})]}),s.jsxs("main",{className:"flex-1 flex flex-col h-full",children:[s.jsx("div",{className:"bg-white border-b px-4 py-2 flex items-center justify-between",children:ee?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ke,{variant:"ghost",size:"sm",onClick:()=>me(!1),className:"h-8 px-2",icon:s.jsx(So,{className:"h-4 w-4"}),children:"Volver"}),s.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"})]}),s.jsx("div",{className:"flex-1 flex justify-start",children:s.jsx(bu,{element:Fe(),onUpdate:m=>{We(Ae.cellId,Ae.elementId,m)},onClose:()=>me(!1)})})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(Ke,{variant:"ghost",size:"sm",onClick:qe,disabled:z<=0,className:"h-8 px-2",icon:s.jsx(uo,{className:"h-4 w-4"}),children:"Deshacer"}),s.jsx(Ke,{variant:"ghost",size:"sm",onClick:Rr,disabled:z>=X.length-1,className:"h-8 px-2",icon:s.jsx(po,{className:"h-4 w-4"}),children:"Rehacer"})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(Ke,{variant:"ghost",size:"sm",onClick:()=>{const m=document.createElement("input");m.type="file",m.accept="image/*",m.onchange=w=>{if(w.target.files&&w.target.files[0]){const A={id:`img-${Date.now()}`,type:"image",content:"",position:{x:.1,y:.1},size:{width:.3,height:.3},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},O=new FileReader;O.onload=V=>{var W,q;(W=V.target)!=null&&W.result&&(A.content=V.target.result,D?Ne(D,A):(q=v[h])!=null&&q.cells[0]&&Ne(v[h].cells[0].id,A))},O.readAsDataURL(w.target.files[0])}},m.click()},className:"h-8 px-2",icon:s.jsx(zr,{className:"h-4 w-4"}),children:"Imagen"}),s.jsx(Ke,{variant:"ghost",size:"sm",onClick:kr,className:"h-8 px-2",icon:s.jsx(wr,{className:"h-4 w-4"}),children:"Texto"})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),S&&s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(Ke,{variant:"ghost",size:"sm",onClick:()=>{if(S&&D){const m=Fe();if(m){const w={...m,id:`${m.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,position:{x:m.position.x+.05,y:m.position.y+.05}};Ne(D,w)}}},className:"h-8 px-2",icon:s.jsx(Io,{className:"h-4 w-4"}),children:"Duplicar"}),s.jsx(Ke,{variant:"ghost",size:"sm",onClick:()=>{S&&D&&ke(D,S)},className:"h-8 px-2 text-red-600 hover:text-white",icon:s.jsx(No,{className:"h-4 w-4"}),children:"Eliminar"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(xu,{currentSize:N,onSizeChange:E,presetData:a,workspaceDimensions:ge})})]})})}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-6 overflow-hidden bg-gray-100",children:B?s.jsx("div",{className:"bg-white rounded-lg shadow-lg",children:s.jsx("div",{className:"overflow-hidden",style:{width:ge.width,height:ge.height},children:s.jsx("div",{id:`page-${v[h].id}`,className:`grid ${se().template} gap-6`,style:{width:"100%",height:"100%"},children:v[h].cells.map((m,w)=>{var P;return s.jsx(dn,{id:m.id,elements:m.elements.filter(A=>!A.locked),workspaceSize:ge,cellStyle:(P=se().cellStyles)==null?void 0:P[v[h].cells.indexOf(m)],selectedElement:D===m.id?S:null,onSelectElement:pe,onAddElement:(A,O)=>Ne(O,A),onUpdateElement:(A,O,V)=>We(m.id,A,O,V),onDeleteElement:A=>ke(m.id,A),availableMasks:se().maskCategories.flatMap(A=>A.masks)},m.id)})})})}):s.jsxs("div",{id:`page-${v[h].id}`,className:" shadow-xl overflow-hidden",style:{width:ge.width,height:ge.height,position:"relative",backgroundColor:(fr=v[h])!=null&&fr.backgroundImage?"transparent":((vr=v[h])==null?void 0:vr.backgroundColor)||"#ffffff"},children:["                                        ",(()=>{const m=v[h];if(console.log("🖼️ [WORKSPACE] Renderizando background para página:",m==null?void 0:m.type),console.log("🖼️ [WORKSPACE] backgroundImage:",m==null?void 0:m.backgroundImage),console.log("🖼️ [WORKSPACE] backgroundColor:",m==null?void 0:m.backgroundColor),m!=null&&m.backgroundImage){const w=window.location.origin+m.backgroundImage;console.log("🔗 [WORKSPACE] URL completa de la imagen:",w),console.log("🔗 [WORKSPACE] URL relativa:",m.backgroundImage),fetch(m.backgroundImage,{method:"HEAD"}).then(P=>{P.ok?console.log("✅ [WORKSPACE] Imagen existe en el servidor"):console.error("❌ [WORKSPACE] Imagen NO existe en el servidor. Status:",P.status)}).catch(P=>{console.error("❌ [WORKSPACE] Error verificando imagen:",P)})}return m!=null&&m.backgroundImage?(console.log("🎨 [WORKSPACE] Aplicando imagen de fondo:",m.backgroundImage),s.jsx("img",{src:m.backgroundImage,alt:"background",className:"absolute inset-0 w-full h-full object-cover pointer-events-none",style:{zIndex:1},onLoad:()=>{var w,P,A,O;console.log("✅ [WORKSPACE] Imagen de fondo cargada exitosamente"),console.log("📐 [WORKSPACE] Dimensiones de la imagen cargada:",(P=(w=arguments[0])==null?void 0:w.target)==null?void 0:P.naturalWidth,"x",(O=(A=arguments[0])==null?void 0:A.target)==null?void 0:O.naturalHeight)},onError:w=>{console.error("❌ [WORKSPACE] Error cargando imagen de fondo:",w),console.error("❌ [WORKSPACE] URL que falló:",w.target.src),console.error("❌ [WORKSPACE] Error details:",w.target.error)}})):m!=null&&m.backgroundColor?(console.log("🎨 [WORKSPACE] Aplicando color de fondo:",m.backgroundColor),s.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{backgroundColor:m.backgroundColor,zIndex:1}})):(console.log("⚪ [WORKSPACE] Sin fondo personalizado, usando fondo por defecto"),null)})(),s.jsx("div",{className:`grid ${se().template}`,style:{position:"relative",zIndex:10,width:"100%",height:"100%",boxSizing:"border-box",gap:((mr=se().style)==null?void 0:mr.gap)||"16px",padding:((hr=se().style)==null?void 0:hr.padding)||"16px"},children:v[h].cells.map(m=>{var w;return s.jsx(dn,{id:m.id,elements:m.elements.filter(P=>!P.locked),workspaceSize:ge,cellStyle:(w=se().cellStyles)==null?void 0:w[v[h].cells.indexOf(m)],selectedElement:D===m.id?S:null,onSelectElement:pe,onAddElement:(P,A)=>Ne(A,P),onUpdateElement:(P,A,O)=>We(m.id,P,A,O),onDeleteElement:P=>ke(m.id,P),availableMasks:se().maskCategories.flatMap(P=>P.masks)},m.id)})})]})})]}),s.jsxs("aside",{className:"w-52 bg-white border-l flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"font-medium text-sm text-gray-700 flex items-center gap-1.5",children:[s.jsx(Or,{className:"h-4 w-4 text-purple-600"}),"Páginas"]}),s.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded-full border",children:[v.length," total"]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400 mr-1.5"}),"Portada"]}),v.filter(m=>m.type==="cover").map((m,w)=>s.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                            ${h===v.indexOf(m)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                            mb-2`,onClick:()=>b(v.indexOf(m)),children:s.jsxs("div",{className:"relative bg-purple-50  overflow-hidden border aspect-[4/3] ",children:[Q[m.id]?s.jsx("img",{src:Q[m.id],alt:"Portada",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("div",{className:"text-purple-300",children:s.jsx(Or,{className:"h-8 w-8"})})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 pt-6 group-hover:opacity-100 opacity-80 transition-opacity",children:s.jsx("span",{className:"text-[10px] text-white font-medium block",children:"Portada"})})]})},m.id))]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400 mr-1.5"}),"Páginas de contenido"]}),s.jsx("div",{className:"space-y-2",children:v.filter(m=>m.type==="content").map((m,w)=>s.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                                ${h===v.indexOf(m)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                                mb-1`,onClick:()=>b(v.indexOf(m)),children:s.jsxs("div",{className:"relative  overflow-hidden border aspect-[4/3]",children:[Q[m.id]?s.jsx("img",{src:Q[m.id],alt:`Página ${m.pageNumber}`,className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("div",{className:`grid ${se().template} gap-0.5 w-full h-full `,children:Array.from({length:se().cells}).map((P,A)=>s.jsx("div",{className:"bg-gray-200 rounded-sm"},A))})}),s.jsx("div",{className:"absolute top-1 left-1 bg-white/90 rounded-full h-5 w-5 flex items-center justify-center text-[10px] font-bold shadow-sm",children:m.pageNumber}),s.jsx("div",{className:"absolute top-1 right-1 bg-blue-500 text-white text-[9px] px-1.5 py-0.5 rounded-full opacity-80 group-hover:opacity-100",children:"Editable"})]})},m.id))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400 mr-1.5"}),"Contraportada"]}),v.filter(m=>m.type==="final").map((m,w)=>s.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                            ${h===v.indexOf(m)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                            mb-2`,onClick:()=>b(v.indexOf(m)),children:s.jsxs("div",{className:"relative  overflow-hidden border mb-1 aspect-[4/3]",children:[Q[m.id]?s.jsx("img",{src:Q[m.id],alt:"Contraportada",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("div",{className:"text-green-300",children:s.jsx(Or,{className:"h-8 w-8"})})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 pt-6 group-hover:opacity-100 opacity-80 transition-opacity",children:s.jsx("span",{className:"text-[10px] text-white font-medium block",children:"Contraportada"})})]})},m.id))]})]})})]})]})]}),s.jsx(bo,{})]})}export{dp as default};
