import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r as i}from"./index-BH53Isel.js";import{c as D}from"./ReactAppend-DTVVXReZ.js";import{B as E}from"./Base-DY-AUNty.js";import{C as P}from"./CreateReactScript-BoGwggCx.js";import{T as S}from"./Table-DitbKwtZ.js";import{I as a}from"./InputFormGroup-D5I6zpZc.js";import{R as T}from"./ReactAppend-D7S498fx.js";import{D as j}from"./DxButton-DV0H-ZcL.js";import{S as k}from"./SwitchFormGroup-CGYpv_4Q.js";import{T as B}from"./TextareaFormGroup-DVzYJtLM.js";import{S as G}from"./SelectFormGroup-YqB1XVb8.js";import{M as I}from"./Modal-CIqmjseY.js";import{S as q}from"./ProductCard-Ap6bpF1Q.js";import{C as A}from"./CanvasPresetsRest-CYySZwL9.js";import"./index-yBjzXJbu.js";import"./index-fNjTmf9T.js";import"./Global-ErywZRdd.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";/* empty css              */import"./Logout-7s5dsuEK.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./MenuItemContainer-C_dOKkRB.js";import"./index.esm-DAJ8Pwbk.js";import"./index-xsH4HHeE.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";import"./BasicRest-B3rfI5GY.js";import"./index-CMHsc23u.js";const v=new A,M=({presetTypes:l={}})=>{const n=i.useRef(),g=i.useRef(),c=i.useRef(),u=i.useRef(),p=i.useRef(),d=i.useRef(),m=i.useRef(),f=i.useRef(),h=i.useRef(),x=i.useRef(),s=i.useRef(),[w,R]=i.useState(!1),b=e=>{e!=null&&e.id?(R(!0),c.current.value=e.id,u.current.value=e.name||"",p.current.value=e.description||"",d.current.value=e.width||"",m.current.value=e.height||"",f.current.value=e.dpi||300,h.current.value=e.pages||1,x.current.value=e.background_color||"#FFFFFF",s.current&&$(s.current).val(e.type||"other").trigger("change")):(R(!1),c.current.value="",u.current.value="",p.current.value="",d.current.value="",m.current.value="",f.current.value=300,h.current.value=1,x.current.value="#FFFFFF",s.current&&$(s.current).val("other").trigger("change")),$(g.current).modal("show")},F=async e=>{e.preventDefault();const r={id:c.current.value||void 0,name:u.current.value,description:p.current.value,width:parseFloat(d.current.value),height:parseFloat(m.current.value),dpi:parseInt(f.current.value,10),pages:parseInt(h.current.value,10),background_color:x.current.value,type:s.current.value};await v.save(r)&&($(n.current).dxDataGrid("instance").refresh(),$(g.current).modal("hide"))},C=async e=>{const{isConfirmed:r}=await q.fire({title:"Eliminar preset",text:"¿Estás seguro de eliminar este preset?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await v.delete(e)||$(n.current).dxDataGrid("instance").refresh()},y=async({id:e,value:r})=>{await v.boolean({id:e,field:"active",value:r})&&$(n.current).dxDataGrid("instance").refresh()};return t.jsxs(t.Fragment,{children:[t.jsx(S,{gridRef:n,title:"Presets de Canvas",rest:v,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(n.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo preset",hint:"Nuevo preset",onClick:()=>b()}})},columns:[{dataField:"id",caption:"ID",width:70},{dataField:"name",caption:"Nombre",minWidth:200},{caption:"Dimensiones",cellTemplate:(e,{data:r})=>{e.text(`${r.width} x ${r.height} cm`)},width:150,allowFiltering:!1},{dataField:"type",caption:"Tipo",cellTemplate:(e,{data:r})=>{const o=r.type,N=l[o]||o||"Otro";e.text(N)},width:120},{dataField:"pages",caption:"Páginas",width:100,alignment:"center"},{dataField:"dpi",caption:"DPI",width:100,alignment:"center"},{dataField:"active",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(e,{data:r})=>{T(e,t.jsx(k,{checked:r.active,onChange:o=>y({id:r.id,value:o.target.checked})}))}},{caption:"Acciones",cellTemplate:(e,{data:r})=>{e.css("text-overflow","unset"),e.append(j({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>b(r)})),e.append(j({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>C(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(I,{modalRef:g,title:w?"Editar preset":"Agregar preset",onSubmit:F,size:"lg",children:t.jsxs("div",{className:"row",id:"principal-container",children:[t.jsx("input",{ref:c,type:"hidden"}),t.jsx("div",{className:"col-md-6",children:t.jsx(a,{eRef:u,label:"Nombre del Preset",placeholder:"Ej: Canvas 30x40cm",required:!0})}),t.jsx("div",{className:"col-md-6",children:t.jsx(G,{dropdownParent:"#principal-container",eRef:s,label:"Tipo de Producto",optionValue:"value",optionLabel:"label",required:!0,children:l&&Object.entries(l).map(([e])=>t.jsx("option",{value:e,children:e},e))})}),t.jsx("div",{className:"col-md-12",children:t.jsx(B,{eRef:p,label:"Descripción",placeholder:"Descripción del preset (opcional)",rows:2})}),t.jsx("div",{className:"col-md-3",children:t.jsx(a,{eRef:d,label:"Ancho (cm)",type:"number",min:"0.1",step:"0.1",required:!0})}),t.jsx("div",{className:"col-md-3",children:t.jsx(a,{eRef:m,label:"Alto (cm)",type:"number",min:"0.1",step:"0.1",required:!0})}),t.jsx("div",{className:"col-md-3",children:t.jsx(a,{eRef:f,label:"DPI",type:"number",min:"72",max:"1200",required:!0})}),t.jsx("div",{className:"col-md-3",children:t.jsx(a,{eRef:h,label:"N° de Páginas",type:"number",min:"1",required:!0})}),t.jsx("div",{className:"col-md-6",children:t.jsx(a,{eRef:x,label:"Color de Fondo",type:"color"})})]})})]})};P((l,n)=>{D.createRoot(l).render(t.jsx(E,{...n,title:"Presets de Canvas",children:t.jsx(M,{...n})}))});
